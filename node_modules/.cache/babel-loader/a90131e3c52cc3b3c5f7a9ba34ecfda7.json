{"ast":null,"code":"var _jsxFileName = \"/home/parth/Documents/Github/resourcified-frontend/src/pages/myposts.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport moment from 'moment';\nexport class Myposts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [],\n      subscription: '/mysubscription',\n      myprofile: '/userProfile',\n      myposts: '/myposts',\n      likedposts: '/likedposts',\n      editid: 0,\n      editable: false,\n      link: '',\n      description: ''\n    };\n\n    this.handleCreateDescriptionChange = event => {\n      this.setState({\n        description: event.target.value\n      });\n    };\n\n    this.handleCreateLinkChange = event => {\n      this.setState({\n        link: event.target.value\n      });\n    };\n\n    this.handleSubmit = (event, postid) => {\n      event.preventDefault();\n      const url = 'http://localhost:8000/api/posts/' + postid;\n      console.log(url);\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      };\n      const link = this.state.link;\n      const description = this.state.description;\n      let bodyFormData = new FormData();\n      bodyFormData.set('link', link);\n      bodyFormData.set('description', description);\n      axios.put(url, bodyFormData, {\n        headers\n      }).then(result => {\n        console.log(result.data);\n      }).catch(error => {\n        console.log(error);\n      });\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 500);\n    };\n\n    this.editingHandler = e => {\n      this.setState({\n        editable: false\n      });\n    };\n\n    this.deleteHandler = (e, id) => {\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      };\n      const url = 'http://localhost:8000/api/posts/' + id;\n      axios.delete(url, {\n        headers\n      }).then(result => {\n        // this.setState({ posts: result.data });\n        console.log(result.data);\n      }).catch(error => {\n        console.log(error);\n      });\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 200);\n    };\n\n    this.editHandler = (e, id, link, description) => {\n      this.setState({\n        link: link\n      });\n      this.setState({\n        description: description\n      });\n      this.setState({\n        editid: id\n      });\n      this.setState({\n        editable: true\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        modalShow: false\n      });\n    };\n\n    this.handleShow = (e, id) => {\n      this.setState({\n        modalShow: true\n      });\n      this.setState({\n        showId: id\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/');\n      }\n    }\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    };\n    const url = 'http://localhost:8000/api/posts?course=&created_by=' + localStorage.getItem('userid');\n    axios.get(url, {\n      headers\n    }).then(result => {\n      this.setState({\n        posts: result.data\n      });\n      this.setState({\n        link: result.data.link\n      });\n      this.setState({\n        description: result.data.description\n      });\n      console.log(result.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myprofile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, \"My Profile\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px',\n        color: 'white',\n        backgroundColor: 'green'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    }, \"My Posts\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.likedposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, \"Liked Posts\"), ' '), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.subscription,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 15\n      }\n    }, \"My Subscription\"), ' ')), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }), this.state.posts.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, \"No Posts Yet\")) : this.state.posts.map(val => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \" container \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 17\n        }\n      }, this.state.editable && this.state.editid == val.id ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: e => this.handleSubmit(e, val.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-label-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: 'form-control ',\n        id: \"link\",\n        placeholder: \"Link\",\n        type: \"text\",\n        name: \"link\",\n        onChange: this.handleCreateLinkChange,\n        autoFocus: true,\n        required: true,\n        value: this.state.link,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 29\n        }\n      }, \"Link\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-label-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: 'form-control ',\n        id: \"description\",\n        placeholder: \"Description\",\n        type: \"text\",\n        name: \"description\",\n        onChange: this.handleCreateDescriptionChange,\n        autoFocus: true,\n        required: true,\n        value: this.state.description,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 29\n        }\n      }, \"Description\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group editposts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-danger \",\n        onClick: this.editingHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 27\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary \",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 27\n        }\n      }, \"Post \\xA0\\xA0\\xA0\"))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"posts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }\n      }, val.modified_by ? /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          textAlign: 'left'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 25\n        }\n      }, ' ', \"Modified at :\", ' ', moment(val.modified_at).format('dddd, MMMM Do YYYY, h:mm:ss a'), ' ') : /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          textAlign: 'left'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 25\n        }\n      }, ' ', \"Posted at :\", ' ', moment(val.created_at).format('dddd, MMMM Do YYYY, h:mm:ss a'), ' '), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 23\n        }\n      }, val.description), /*#__PURE__*/React.createElement(\"a\", {\n        target: \"_blank\",\n        href: val.link,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 25\n        }\n      }, \" \", val.link)), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 23\n        }\n      }, \"Upvote Count- \", val.upvote_count), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: this.handleShow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 23\n        }\n      }, \"Delete\"), this.state.showId == val.id ? /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.modalShow,\n        onHide: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 27\n        }\n      }, \"Are you sure you want to delete this post?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 27\n        }\n      }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"danger\",\n        onClick: e => this.deleteHandler(e, val.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 27\n        }\n      }, \"Yes\"))) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: e => this.editHandler(e, val.id, val.link, val.description),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 23\n        }\n      }, ' ', \"Edit Post\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 19\n        }\n      }));\n    })));\n  }\n\n}\nexport default Myposts;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/myposts.js"],"names":["React","Component","axios","Link","Redirect","moment","Myposts","state","posts","subscription","myprofile","myposts","likedposts","editid","editable","link","description","handleCreateDescriptionChange","event","setState","target","value","handleCreateLinkChange","handleSubmit","postid","preventDefault","url","console","log","headers","Accept","Authorization","localStorage","getItem","bodyFormData","FormData","set","put","then","result","data","catch","error","window","setTimeout","location","reload","editingHandler","e","deleteHandler","id","delete","editHandler","handleClose","modalShow","handleShow","showId","componentDidMount","props","history","push","get","render","marginRight","color","backgroundColor","length","map","val","modified_by","textAlign","modified_at","format","created_at","upvote_count"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\n\nexport class Myposts extends Component {\n  state = {\n    posts: [],\n    subscription: '/mysubscription',\n    myprofile: '/userProfile',\n    myposts: '/myposts',\n    likedposts: '/likedposts',\n    editid: 0,\n    editable: false,\n    link: '',\n    description: ''\n  }\n\n  handleCreateDescriptionChange = event => {\n    this.setState({ description: event.target.value })\n  }\n\n  handleCreateLinkChange = event => {\n    this.setState({ link: event.target.value })\n  }\n\n  handleSubmit = (event, postid) => {\n    event.preventDefault()\n    const url = 'http://localhost:8000/api/posts/' + postid\n    console.log(url)\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n\n    const link = this.state.link\n    const description = this.state.description\n\n    let bodyFormData = new FormData()\n    bodyFormData.set('link', link)\n    bodyFormData.set('description', description)\n\n    axios\n      .put(url, bodyFormData, { headers })\n      .then(result => {\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 500)\n  }\n\n  componentDidMount () {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url =\n      'http://localhost:8000/api/posts?course=&created_by=' +\n      localStorage.getItem('userid')\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ posts: result.data })\n        this.setState({ link: result.data.link })\n        this.setState({ description: result.data.description })\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  editingHandler = e => {\n    this.setState({ editable: false })\n  }\n  deleteHandler = (e, id) => {\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url = 'http://localhost:8000/api/posts/' + id\n    axios\n      .delete(url, { headers })\n      .then(result => {\n        // this.setState({ posts: result.data });\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 200)\n  }\n\n  editHandler = (e, id, link, description) => {\n    this.setState({ link: link })\n    this.setState({ description: description })\n    this.setState({ editid: id })\n    this.setState({ editable: true })\n  }\n\n  handleClose = () => {\n    this.setState({ modalShow: false })\n  }\n\n  handleShow = (e, id) => {\n    this.setState({ modalShow: true })\n    this.setState({ showId: id })\n  }\n\n  render () {\n    return (\n      <div>\n        <div className='container'>\n          <div>\n            <a type='button' href={this.state.myprofile}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn btn-outline-success '\n              >\n                My Profile\n              </button>\n            </a>\n            <a type='button' href={this.state.myposts}>\n              <button\n                style={{\n                  marginRight: '4px',\n                  color: 'white',\n                  backgroundColor: 'green'\n                }}\n                className='btn btn-outline-success '\n              >\n                My Posts\n              </button>\n            </a>\n            <a type='button' href={this.state.likedposts}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn btn-outline-success '\n              >\n                Liked Posts\n              </button>{' '}\n            </a>\n            <a type='button' href={this.state.subscription}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn btn-outline-success '\n              >\n                My Subscription\n              </button>{' '}\n            </a>\n          </div>\n          <br></br>\n\n          {this.state.posts.length == 0 ? (\n            <div>\n              <h2>No Posts Yet</h2>\n            </div>\n          ) : (\n            this.state.posts.map(val => {\n              return (\n                <div className=' container '>\n                  {this.state.editable && this.state.editid == val.id ? (\n                    <div>\n                      <form onSubmit={e => this.handleSubmit(e, val.id)}>\n                        <div className='form-group'>\n                          <div className='form-label-group'>\n                            <input\n                              className={'form-control '}\n                              id='link'\n                              placeholder='Link'\n                              type='text'\n                              name='link'\n                              onChange={this.handleCreateLinkChange}\n                              autoFocus\n                              required\n                              value={this.state.link}\n                            />\n                            <label htmlFor='link'>Link</label>\n                          </div>\n                          <br></br>\n                          <div className='form-label-group'>\n                            <input\n                              className={'form-control '}\n                              id='description'\n                              placeholder='Description'\n                              type='text'\n                              name='description'\n                              onChange={this.handleCreateDescriptionChange}\n                              autoFocus\n                              required\n                              value={this.state.description}\n                            />\n                            <label htmlFor='description'>Description</label>\n                          </div>\n                        </div>\n\n                        <div className='form-group editposts'>\n                          <button\n                            className='btn btn-danger '\n                            onClick={this.editingHandler}\n                          >\n                            Cancel\n                          </button>\n                          <button className='btn btn-primary ' type='submit'>\n                            Post &nbsp;&nbsp;&nbsp;\n                          </button>\n                        </div>\n                      </form>\n                      <br></br>\n                    </div>\n                  ) : (\n                    <div className='posts'>\n                      {val.modified_by ? (\n                        <h6 style={{ textAlign: 'left' }}>\n                          {' '}\n                          Modified at :{' '}\n                          {moment(val.modified_at).format(\n                            'dddd, MMMM Do YYYY, h:mm:ss a'\n                          )}{' '}\n                        </h6>\n                      ) : (\n                        <h6 style={{ textAlign: 'left' }}>\n                          {' '}\n                          Posted at :{' '}\n                          {moment(val.created_at).format(\n                            'dddd, MMMM Do YYYY, h:mm:ss a'\n                          )}{' '}\n                        </h6>\n                      )}\n                      <h3>{val.description}</h3>\n\n                      <a target='_blank' href={val.link}>\n                        <h3> {val.link}</h3>\n                      </a>\n\n                      <h3>Upvote Count- {val.upvote_count}</h3>\n\n                      <button\n                        className='btn btn-danger'\n                        onClick={this.handleShow}\n                      >\n                        Delete\n                      </button>\n                      {this.state.showId == val.id ? (\n                      <Modal\n                        show={this.state.modalShow}\n                        onHide={this.handleClose}\n                      >\n                        <Modal.Header closeButton>\n                          <Modal.Title>Are you sure you want to delete this post?</Modal.Title>\n                        </Modal.Header>\n\n                        <Modal.Footer>\n                          <Button\n                            variant='secondary'\n                            onClick={this.handleClose}\n                          >\n                            Close\n                          </Button>\n                          <Button\n                            variant='danger'\n                            onClick={e => this.deleteHandler(e, val.id)}\n                          >\n                            Yes\n                          </Button>\n                        </Modal.Footer>\n                      </Modal>\n                      ): (\n                        <div></div>\n                      )}\n\n                      {/* <button\n                        className='btn btn-danger'\n                        onClick={e => this.deleteHandler(e, val.id)}\n                      >\n                        Delete\n                      </button> */}\n\n                      <button\n                        className='btn btn-primary'\n                        onClick={e =>\n                          this.editHandler(e, val.id, val.link, val.description)\n                        }\n                      >\n                        {' '}\n                        Edit Post\n                      </button>\n                    </div>\n                  )}\n                  <br></br>\n                </div>\n              )\n            })\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Myposts\n"]},"metadata":{},"sourceType":"module"}