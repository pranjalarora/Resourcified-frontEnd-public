{"ast":null,"code":"var _jsxFileName = \"/home/parth/Documents/Github/resourcified-frontend/src/pages/register.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link, Redirect } from \"react-router-dom\";\nexport default class Register extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      redirect: false,\n      authError: false,\n      isLoading: false,\n      instituteName: \"\",\n      instituteId: 0,\n      institutes: [],\n      branches: [],\n      branch: \"\"\n    };\n\n    this.handleUsernameChange = event => {\n      this.setState({\n        username: event.target.value\n      });\n    };\n\n    this.handleEmailChange = event => {\n      console.log(this.state.role);\n      this.setState({\n        email: event.target.value\n      });\n      this.setState({\n        username: event.target.value\n      });\n    };\n\n    this.handlePwdChange = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.handleNameChange = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.handleInstitueChange = event => {\n      this.setState({\n        instituteId: event.target.value\n      });\n    };\n\n    this.handleBranchChange = event => {\n      this.setState({\n        branch: event.target.value\n      });\n      console.log(this.state.branch);\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      };\n      const url = \"http://localhost:8000/api/branches?institute=\" + localStorage.getItem('instituteId');\n      axios.get(url, {\n        headers\n      }).then(result => {\n        this.setState({\n          branches: result.data\n        });\n        console.log(result.data);\n      }).catch(error => {\n        console.log(error);\n        this.setState({\n          authError: true,\n          isLoading: false\n        });\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        isLoading: true\n      });\n      const url = \"http://localhost:8000/api/signup\";\n      const email = this.state.email;\n      const role = this.state.role;\n      const password = this.state.password;\n      const full_name = this.state.name;\n      const username = this.state.username;\n      let bodyFormData = new FormData();\n      bodyFormData.set(\"role\", role);\n      bodyFormData.set(\"email\", email);\n      bodyFormData.set(\"full_name\", full_name);\n      bodyFormData.set(\"username\", username);\n      bodyFormData.set(\"password\", password);\n      axios.post(url, bodyFormData).then(result => {\n        this.setState({\n          isLoading: false\n        });\n\n        if (result.data.status !== \"fail\") {\n          this.setState({\n            redirect: true,\n            authError: false\n          });\n        } else {\n          this.setState({\n            redirect: false,\n            authError: true\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n        this.setState({\n          authError: true,\n          isLoading: false\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    };\n    const url = \"http://localhost:8000/api/institutes\";\n    axios.get(url, {\n      headers\n    }).then(result => {\n      // if (result.data.status !== \"fail\") {\n      //   this.setState({ redirect: true, authError: false });\n      // } else {\n      //   this.setState({ redirect: false, authError: true });\n      // }\n      this.setState({\n        institutes: result.data\n      });\n      console.log(result.data);\n    }).catch(error => {\n      console.log(error);\n      this.setState({\n        authError: true,\n        isLoading: false\n      });\n    });\n  } //if(localStorage.getItem(\"isLoggedIn\")!=NULL & localStorage.getItem(\"isLoggedIn\")==true)\n\n\n  // renderRedirect = () => {\n  //   if (this.state.redirect) {\n  //     return <Redirect to=\"/login\" />;\n  //   }\n  // };\n  render() {\n    const isLoading = this.state.isLoading;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-login mx-auto mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header colour-green\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-label-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"inputName\",\n      className: \"form-control\",\n      placeholder: \"name\",\n      name: \"name\",\n      onChange: this.handleNameChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, \"Full Name\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-label-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"inputEmail\",\n      className: \"form-control \" + (this.state.authError ? \"is-invalid\" : \"\"),\n      placeholder: \"Email address\",\n      type: \"text\",\n      name: \"email\",\n      onChange: this.handleEmailChange,\n      autoFocus: true,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, \"Please provide a valid Email. or Email Exist\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-label-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"inputPassword\",\n      placeholder: \"******\",\n      name: \"password\",\n      onChange: this.handlePwdChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, \"Password\"))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"institute\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, \"Institute\"), /*#__PURE__*/React.createElement(\"select\", {\n      reequired: true,\n      class: \"custom-select\",\n      id: \"institute\",\n      name: \"institute\",\n      onChange: this.handleInstitueChange,\n      value: this.state.instituteId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      value: 0,\n      key: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 19\n      }\n    }, \"Choose...\"), this.state.institutes.map(val => /*#__PURE__*/React.createElement(\"option\", {\n      value: val.id,\n      key: val.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }, val.name)), console.log(this.state.instituteId), localStorage.setItem('instituteId', this.state.instituteId))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"institute\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }, \"Branches\"), /*#__PURE__*/React.createElement(\"select\", {\n      reequired: true,\n      class: \"custom-select\",\n      id: \"institute\",\n      name: \"institute\",\n      onClick: this.handleBranchChange,\n      value: this.state.branch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      value: 0,\n      key: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, \"Choose...\"), this.state.branches.map(val => /*#__PURE__*/React.createElement(\"option\", {\n      value: val.name,\n      key: val.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }, val.name)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-block\",\n      type: \"submit\",\n      disabled: this.state.isLoading ? true : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, \"Register \\xA0\\xA0\\xA0\", isLoading ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"spinner-border spinner-border-sm\",\n      role: \"status\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"d-block small mt-3\",\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }, \"Login Your Account\")))));\n  }\n\n}","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/register.js"],"names":["React","Component","axios","Link","Redirect","Register","state","username","name","email","password","redirect","authError","isLoading","instituteName","instituteId","institutes","branches","branch","handleUsernameChange","event","setState","target","value","handleEmailChange","console","log","role","handlePwdChange","handleNameChange","handleInstitueChange","handleBranchChange","headers","Accept","url","localStorage","getItem","get","then","result","data","catch","error","handleSubmit","preventDefault","full_name","bodyFormData","FormData","set","post","status","componentDidMount","render","map","val","id","setItem"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nexport default class Register extends Component {\n  state = {\n    username: \"\",\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    redirect: false,\n    authError: false,\n    isLoading: false,\n    instituteName: \"\",\n    instituteId: 0,\n    institutes: [],\n    branches: [],\n    branch: \"\"\n  };\n\n\n  componentDidMount() {\n\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n\n    };\n    const url = \"http://localhost:8000/api/institutes\";\n    axios\n      .get(url, { headers })\n      .then((result) => {\n\n        // if (result.data.status !== \"fail\") {\n        //   this.setState({ redirect: true, authError: false });\n        // } else {\n        //   this.setState({ redirect: false, authError: true });\n        // }\n        this.setState({ institutes: result.data });\n\n\n        console.log(result.data);\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ authError: true, isLoading: false });\n      });\n  }\n  //if(localStorage.getItem(\"isLoggedIn\")!=NULL & localStorage.getItem(\"isLoggedIn\")==true)\n  handleUsernameChange = (event) => {\n    this.setState({ username: event.target.value });\n  };\n  handleEmailChange = (event) => {\n    console.log(this.state.role);\n    this.setState({ email: event.target.value });\n    this.setState({ username: event.target.value });\n  };\n  handlePwdChange = (event) => {\n    this.setState({ password: event.target.value });\n  };\n  handleNameChange = (event) => {\n    this.setState({ name: event.target.value });\n  };\n\n  handleInstitueChange = (event) => {\n    this.setState({ instituteId: event.target.value });\n  }\n\n  handleBranchChange = (event) => {\n\n    this.setState({ branch: event.target.value });\n    console.log(this.state.branch);\n\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n\n    };\n    const url = \"http://localhost:8000/api/branches?institute=\" + localStorage.getItem('instituteId');\n    axios\n      .get(url, { headers })\n      .then((result) => {\n\n\n        this.setState({ branches: result.data });\n\n\n        console.log(result.data);\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ authError: true, isLoading: false });\n      });\n\n\n  }\n  handleSubmit = (event) => {\n\n    event.preventDefault();\n    this.setState({ isLoading: true });\n    const url = \"http://localhost:8000/api/signup\";\n    const email = this.state.email;\n    const role = this.state.role;\n    const password = this.state.password;\n    const full_name = this.state.name;\n    const username = this.state.username;\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"role\", role);\n    bodyFormData.set(\"email\", email);\n\n    bodyFormData.set(\"full_name\", full_name);\n    bodyFormData.set(\"username\", username);\n    bodyFormData.set(\"password\", password);\n    axios\n      .post(url, bodyFormData)\n      .then((result) => {\n        this.setState({ isLoading: false });\n        if (result.data.status !== \"fail\") {\n          this.setState({ redirect: true, authError: false });\n        } else {\n          this.setState({ redirect: false, authError: true });\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ authError: true, isLoading: false });\n      });\n  };\n\n  // renderRedirect = () => {\n  //   if (this.state.redirect) {\n  //     return <Redirect to=\"/login\" />;\n  //   }\n  // };\n\n  render() {\n    const isLoading = this.state.isLoading;\n    return (\n      <div className=\"container\">\n        <div className=\"card card-login mx-auto mt-5\">\n          <div className=\"card-header colour-green\">Register</div>\n          <div className=\"card-body\">\n            <form onSubmit={this.handleSubmit}>\n\n              <div className=\"form-group\">\n                <div className=\"form-label-group\">\n                  <input\n                    type=\"text\"\n                    id=\"inputName\"\n                    className=\"form-control\"\n                    placeholder=\"name\"\n                    name=\"name\"\n                    onChange={this.handleNameChange}\n                    required\n                  />\n                  <label htmlFor=\"inputName\">Full Name</label>\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <div className=\"form-label-group\">\n                  <input\n                    id=\"inputEmail\"\n                    className={\n                      \"form-control \" +\n                      (this.state.authError ? \"is-invalid\" : \"\")\n                    }\n                    placeholder=\"Email address\"\n                    type=\"text\"\n                    name=\"email\"\n                    onChange={this.handleEmailChange}\n                    autoFocus\n                    required\n                  />\n                  <label htmlFor=\"inputEmail\">Email address</label>\n                  <div className=\"invalid-feedback\">\n                    Please provide a valid Email. or Email Exist\n                  </div>\n                </div>\n              </div>\n              <div className=\"form-group\">\n                <div className=\"form-label-group\">\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    id=\"inputPassword\"\n                    placeholder=\"******\"\n                    name=\"password\"\n                    onChange={this.handlePwdChange}\n                    required\n                  />\n                  <label htmlFor=\"inputPassword\">Password</label>\n                </div>\n              </div>\n\n              <div class=\"form-group\">\n                <label for=\"institute\">Institute</label>\n                <select reequired class=\"custom-select\" id=\"institute\" name=\"institute\" onChange={this.handleInstitueChange} value={this.state.instituteId}>\n                  <option selected value={0} key={0}>Choose...</option>\n                  {this.state.institutes.map((val) =>\n                    <option value={val.id} key={val.name}>{val.name}</option>)}\n                  {console.log(this.state.instituteId)}\n                  {localStorage.setItem('instituteId', this.state.instituteId)}\n\n                </select>\n              </div>\n\n              <div class=\"form-group\">\n                <label for=\"institute\">Branches</label>\n                <select reequired class=\"custom-select\" id=\"institute\" name=\"institute\" onClick={this.handleBranchChange} value={this.state.branch}>\n                  <option selected value={0} key={0}>Choose...</option>\n                  {this.state.branches.map((val) =>\n                    <option value={val.name} key={val.name}>{val.name}</option>)}\n\n\n\n                </select>\n              </div>\n\n              <div className=\"form-group\">\n                <button\n                  className=\"btn btn-primary btn-block\"\n                  type=\"submit\"\n                  disabled={this.state.isLoading ? true : false}\n                >\n                  Register &nbsp;&nbsp;&nbsp;\n                  {isLoading ? (\n                    <span\n                      className=\"spinner-border spinner-border-sm\"\n                      role=\"status\"\n                      aria-hidden=\"true\"\n                    ></span>\n                  ) : (\n                    <span></span>\n                  )}\n                </button>\n              </div>\n            </form>\n            <div className=\"text-center\">\n              <Link className=\"d-block small mt-3\" to={\"/login\"}>\n                Login Your Account\n              </Link>\n\n            </div>\n          </div>\n        </div>\n        {/* {this.renderRedirect()} */}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}