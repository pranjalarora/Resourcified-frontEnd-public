{"ast":null,"code":"import _classCallCheck from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,Redirect}from'react-router-dom';import moment from'moment';import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import Avatar from'react-avatar';import{LinkPreview}from'@dhaiwat10/react-link-preview';import configData from\"./config.json\";export var Myposts=/*#__PURE__*/function(_Component){_inherits(Myposts,_Component);var _super=_createSuper(Myposts);function Myposts(){var _this;_classCallCheck(this,Myposts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={posts:[],subscription:'/mysubscription',myprofile:'/userProfile',myposts:'/myposts',likedposts:'/likedposts',editid:0,editable:false,link:'',description:'',showId:0,modalShow:false,disabled:false};_this.handleCreateDescriptionChange=function(event){_this.setState({description:event.target.value});};_this.handleCreateLinkChange=function(event){_this.setState({link:event.target.value});};_this.handleSubmit=function(event,postid){event.preventDefault();_this.setState({disabled:true});var url=\"\".concat(configData.SERVER_URL,\"api/posts/\")+postid;console.log(url);var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var link=_this.state.link;var description=_this.state.description;var bodyFormData=new FormData();bodyFormData.set('link',link);bodyFormData.set('description',description);axios.put(url,bodyFormData,{headers:headers}).then(function(result){console.log(result.data);}).catch(function(error){console.log(error);});window.setTimeout(function(){window.location.reload();},500);};_this.editingHandler=function(e){_this.setState({editable:false});};_this.deleteHandler=function(e,id){var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var url=\"\".concat(configData.SERVER_URL,\"api/posts/\")+id;axios.delete(url,{headers:headers}).then(function(result){// this.setState({ posts: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});window.setTimeout(function(){window.location.reload();},200);};_this.editHandler=function(e,id,link,description){_this.setState({link:link});_this.setState({description:description});_this.setState({editid:id});_this.setState({editable:true});};_this.handleClose=function(){_this.setState({modalShow:false});};_this.handleShow=function(e,id){_this.setState({modalShow:true});_this.setState({showId:id});};return _this;}_createClass(Myposts,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!localStorage.getItem('isLoggedIn')){{this.props.history.push('/');}}var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var url=\"\".concat(configData.SERVER_URL,\"api/posts?course=&created_by=\")+localStorage.getItem('userid');axios.get(url,{headers:headers}).then(function(result){_this2.setState({posts:result.data});_this2.setState({link:result.data.link});_this2.setState({description:result.data.description});console.log(result.data);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.myprofile},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn hover \"},\"My Profile\")),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.myposts},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px',color:'black'},className:\"btn hover activeness\"},\"My Posts\")),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.likedposts},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn hover  \"},\"Liked Posts\"),' '),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.subscription},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn hover\"},\"My Subscription\"),' ')),/*#__PURE__*/React.createElement(\"br\",null),this.state.posts.length==0?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"No Posts Yet\")):this.state.posts.map(function(val){return/*#__PURE__*/React.createElement(\"div\",{className:\" container \"},_this3.state.editable&&_this3.state.editid==val.id?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this3.handleSubmit(e,val.id);}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group editpostsdetails\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{className:'form-control ',id:\"link\",placeholder:\"Link\",type:\"text\",name:\"link\",onChange:_this3.handleCreateLinkChange,autoFocus:true,required:true,value:_this3.state.link}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"link\"},\"Link\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{className:'form-control ',id:\"description\",placeholder:\"Description\",type:\"text\",name:\"description\",onChange:_this3.handleCreateDescriptionChange,autoFocus:true,required:true,value:_this3.state.description}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description\"},\"Description\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group editposts\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger \",onClick:_this3.editingHandler},\"Cancel\"),/*#__PURE__*/React.createElement(\"button\",{className:_this3.state.disabled?'btn btn-disabled ':'btn btn-primary ',type:\"submit\"},\"Post \\xA0\\xA0\\xA0\"))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null)):/*#__PURE__*/React.createElement(\"div\",{className:\"posts\"},/*#__PURE__*/React.createElement(Avatar,{style:{float:'left',marginRight:'10px'},round:true,name:val.created_by.full_name,size:\"40px\"}),/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:'25px',color:'black'}},val.created_by.full_name,\" - \",val.created_by.email),val.modified_by?/*#__PURE__*/React.createElement(\"h6\",{style:{textAlign:'left',color:'rgba(72, 70, 75, 0.979)'}},' ',\"Modified at :\",' ',moment(val.modified_at).format('dddd, MMMM Do YYYY, h:mm:ss a'),' '):/*#__PURE__*/React.createElement(\"h6\",{style:{textAlign:'left',color:'rgba(72, 70, 75, 0.979)'}},' ',moment(val.created_at).format('dddd, MMMM Do YYYY, h:mm:ss a'),' '),/*#__PURE__*/React.createElement(\"h6\",null,val.description),/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",href:val.link},/*#__PURE__*/React.createElement(LinkPreview,{url:val.link,width:\"100%\",height:\"300px\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",null,\"Upvote Count- \",val.upvote_count),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(e){return _this3.handleShow(e,val.id);}},/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-trash\"})),_this3.state.showId==val.id?/*#__PURE__*/React.createElement(Modal,{show:_this3.state.modalShow,onHide:_this3.handleClose},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,\"Are you sure you want to delete this post?\")),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:_this3.handleClose},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:function onClick(e){return _this3.deleteHandler(e,val.id);}},\"Yes\"))):/*#__PURE__*/React.createElement(\"span\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:function onClick(e){return _this3.editHandler(e,val.id,val.link,val.description);}},' ',/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-user-edit\"}))),/*#__PURE__*/React.createElement(\"br\",null));})));}}]);return Myposts;}(Component);export default Myposts;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/myposts.js"],"names":["React","Component","axios","Link","Redirect","moment","Modal","Button","Avatar","LinkPreview","configData","Myposts","state","posts","subscription","myprofile","myposts","likedposts","editid","editable","link","description","showId","modalShow","disabled","handleCreateDescriptionChange","event","setState","target","value","handleCreateLinkChange","handleSubmit","postid","preventDefault","url","SERVER_URL","console","log","headers","Accept","Authorization","localStorage","getItem","bodyFormData","FormData","set","put","then","result","data","catch","error","window","setTimeout","location","reload","editingHandler","e","deleteHandler","id","delete","editHandler","handleClose","handleShow","props","history","push","get","marginRight","color","length","map","val","float","created_by","full_name","fontSize","email","modified_by","textAlign","modified_at","format","created_at","upvote_count"],"mappings":"opBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,WAAT,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CAEA,UAAaC,CAAAA,OAAb,+TACEC,KADF,CACU,CACNC,KAAK,CAAE,EADD,CAENC,YAAY,CAAE,iBAFR,CAGNC,SAAS,CAAE,cAHL,CAINC,OAAO,CAAE,UAJH,CAKNC,UAAU,CAAE,aALN,CAMNC,MAAM,CAAE,CANF,CAONC,QAAQ,CAAE,KAPJ,CAQNC,IAAI,CAAE,EARA,CASNC,WAAW,CAAE,EATP,CAUNC,MAAM,CAAC,CAVD,CAWNC,SAAS,CAAC,KAXJ,CAYNC,QAAQ,CAAC,KAZH,CADV,OAgBEC,6BAhBF,CAgBkC,SAAAC,KAAK,CAAI,CACvC,MAAKC,QAAL,CAAc,CAAEN,WAAW,CAAEK,KAAK,CAACE,MAAN,CAAaC,KAA5B,CAAd,EACD,CAlBH,OAoBEC,sBApBF,CAoB2B,SAAAJ,KAAK,CAAI,CAChC,MAAKC,QAAL,CAAc,CAAEP,IAAI,CAAEM,KAAK,CAACE,MAAN,CAAaC,KAArB,CAAd,EACD,CAtBH,OAwBEE,YAxBF,CAwBiB,SAACL,KAAD,CAAQM,MAAR,CAAmB,CAEhCN,KAAK,CAACO,cAAN,GACA,MAAKN,QAAL,CAAc,CAACH,QAAQ,CAAC,IAAV,CAAd,EACA,GAAMU,CAAAA,GAAG,CAAG,UAAGxB,UAAU,CAACyB,UAAd,eAAuCH,MAAnD,CACAI,OAAO,CAACC,GAAR,CAAYH,GAAZ,EAEA,GAAMI,CAAAA,OAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAMA,GAAMtB,CAAAA,IAAI,CAAG,MAAKR,KAAL,CAAWQ,IAAxB,CACA,GAAMC,CAAAA,WAAW,CAAG,MAAKT,KAAL,CAAWS,WAA/B,CAEA,GAAIsB,CAAAA,YAAY,CAAG,GAAIC,CAAAA,QAAJ,EAAnB,CACAD,YAAY,CAACE,GAAb,CAAiB,MAAjB,CAAyBzB,IAAzB,EACAuB,YAAY,CAACE,GAAb,CAAiB,aAAjB,CAAgCxB,WAAhC,EAEAnB,KAAK,CACF4C,GADH,CACOZ,GADP,CACYS,YADZ,CAC0B,CAAEL,OAAO,CAAPA,OAAF,CAD1B,EAEGS,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACdZ,OAAO,CAACC,GAAR,CAAYW,MAAM,CAACC,IAAnB,EACD,CAJH,EAKGC,KALH,CAKS,SAAAC,KAAK,CAAI,CACdf,OAAO,CAACC,GAAR,CAAYc,KAAZ,EACD,CAPH,EAUAC,MAAM,CAACC,UAAP,CAAkB,UAAY,CAC5BD,MAAM,CAACE,QAAP,CAAgBC,MAAhB,GACD,CAFD,CAEG,GAFH,EAGD,CAzDH,OAuFEC,cAvFF,CAuFmB,SAAAC,CAAC,CAAI,CACpB,MAAK9B,QAAL,CAAc,CAAER,QAAQ,CAAE,KAAZ,CAAd,EACD,CAzFH,OA0FEuC,aA1FF,CA0FkB,SAACD,CAAD,CAAIE,EAAJ,CAAW,CACzB,GAAMrB,CAAAA,OAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAKA,GAAMR,CAAAA,GAAG,CAAG,UAAGxB,UAAU,CAACyB,UAAd,eAAuCwB,EAAnD,CACAzD,KAAK,CACF0D,MADH,CACU1B,GADV,CACe,CAAEI,OAAO,CAAPA,OAAF,CADf,EAEGS,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd;AAEAZ,OAAO,CAACC,GAAR,CAAYW,MAAM,CAACC,IAAnB,EACD,CANH,EAOGC,KAPH,CAOS,SAAAC,KAAK,CAAI,CACdf,OAAO,CAACC,GAAR,CAAYc,KAAZ,EACD,CATH,EAUAC,MAAM,CAACC,UAAP,CAAkB,UAAY,CAC5BD,MAAM,CAACE,QAAP,CAAgBC,MAAhB,GACD,CAFD,CAEG,GAFH,EAGD,CA9GH,OAgHEM,WAhHF,CAgHgB,SAACJ,CAAD,CAAIE,EAAJ,CAAQvC,IAAR,CAAcC,WAAd,CAA8B,CAC1C,MAAKM,QAAL,CAAc,CAAEP,IAAI,CAAEA,IAAR,CAAd,EACA,MAAKO,QAAL,CAAc,CAAEN,WAAW,CAAEA,WAAf,CAAd,EACA,MAAKM,QAAL,CAAc,CAAET,MAAM,CAAEyC,EAAV,CAAd,EACA,MAAKhC,QAAL,CAAc,CAAER,QAAQ,CAAE,IAAZ,CAAd,EACD,CArHH,OAuHE2C,WAvHF,CAuHgB,UAAM,CAClB,MAAKnC,QAAL,CAAc,CAAEJ,SAAS,CAAE,KAAb,CAAd,EACD,CAzHH,OA2HEwC,UA3HF,CA2He,SAACN,CAAD,CAAIE,EAAJ,CAAW,CACtB,MAAKhC,QAAL,CAAc,CAAEJ,SAAS,CAAE,IAAb,CAAd,EACA,MAAKI,QAAL,CAAc,CAAEL,MAAM,CAAEqC,EAAV,CAAd,EACD,CA9HH,gGA2DuB,iBACnB,GAAI,CAAClB,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAL,CAAyC,CACvC,CACE,KAAKsB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,CACF,CACD,GAAM5B,CAAAA,OAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAKA,GAAMR,CAAAA,GAAG,CACP,UAAGxB,UAAU,CAACyB,UAAd,kCACAM,YAAY,CAACC,OAAb,CAAqB,QAArB,CAFF,CAGAxC,KAAK,CACFiE,GADH,CACOjC,GADP,CACY,CAAEI,OAAO,CAAPA,OAAF,CADZ,EAEGS,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd,MAAI,CAACrB,QAAL,CAAc,CAAEd,KAAK,CAAEmC,MAAM,CAACC,IAAhB,CAAd,EACA,MAAI,CAACtB,QAAL,CAAc,CAAEP,IAAI,CAAE4B,MAAM,CAACC,IAAP,CAAY7B,IAApB,CAAd,EACA,MAAI,CAACO,QAAL,CAAc,CAAEN,WAAW,CAAE2B,MAAM,CAACC,IAAP,CAAY5B,WAA3B,CAAd,EAEAe,OAAO,CAACC,GAAR,CAAYW,MAAM,CAACC,IAAnB,EACD,CARH,EASGC,KATH,CASS,SAAAC,KAAK,CAAI,CACdf,OAAO,CAACC,GAAR,CAAYc,KAAZ,EACD,CAXH,EAYD,CArFH,uCAgIY,iBACR,mBACE,4CACE,2BAAK,SAAS,CAAC,WAAf,eACE,4CACE,yBAAG,IAAI,CAAC,QAAR,CAAiB,IAAI,CAAE,KAAKvC,KAAL,CAAWG,SAAlC,eACE,8BACE,KAAK,CAAE,CAAEqD,WAAW,CAAE,KAAf,CADT,CAEE,SAAS,CAAC,YAFZ,eADF,CADF,cASE,yBAAG,IAAI,CAAC,QAAR,CAAiB,IAAI,CAAE,KAAKxD,KAAL,CAAWI,OAAlC,eACE,8BACE,KAAK,CAAE,CACLoD,WAAW,CAAE,KADR,CAELC,KAAK,CAAE,OAFF,CADT,CAME,SAAS,CAAC,sBANZ,aADF,CATF,cAqBE,yBAAG,IAAI,CAAC,QAAR,CAAiB,IAAI,CAAE,KAAKzD,KAAL,CAAWK,UAAlC,eACE,8BACE,KAAK,CAAE,CAAEmD,WAAW,CAAE,KAAf,CADT,CAEE,SAAS,CAAC,aAFZ,gBADF,CAMY,GANZ,CArBF,cA6BE,yBAAG,IAAI,CAAC,QAAR,CAAiB,IAAI,CAAE,KAAKxD,KAAL,CAAWE,YAAlC,eACE,8BACE,KAAK,CAAE,CAAEsD,WAAW,CAAE,KAAf,CADT,CAEE,SAAS,CAAC,WAFZ,oBADF,CAMY,GANZ,CA7BF,CADF,cAuCE,8BAvCF,CAyCG,KAAKxD,KAAL,CAAWC,KAAX,CAAiByD,MAAjB,EAA2B,CAA3B,cACC,4CACE,6CADF,CADD,CAKC,KAAK1D,KAAL,CAAWC,KAAX,CAAiB0D,GAAjB,CAAqB,SAAAC,GAAG,CAAI,CAC1B,mBACE,2BAAK,SAAS,CAAC,aAAf,EACG,MAAI,CAAC5D,KAAL,CAAWO,QAAX,EAAuB,MAAI,CAACP,KAAL,CAAWM,MAAX,EAAqBsD,GAAG,CAACb,EAAhD,cACC,4CACE,4BAAM,QAAQ,CAAE,kBAAAF,CAAC,QAAI,CAAA,MAAI,CAAC1B,YAAL,CAAkB0B,CAAlB,CAAqBe,GAAG,CAACb,EAAzB,CAAJ,EAAjB,eACE,2BAAK,SAAS,CAAC,6BAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,6BACE,SAAS,CAAE,eADb,CAEE,EAAE,CAAC,MAFL,CAGE,WAAW,CAAC,MAHd,CAIE,IAAI,CAAC,MAJP,CAKE,IAAI,CAAC,MALP,CAME,QAAQ,CAAE,MAAI,CAAC7B,sBANjB,CAOE,SAAS,KAPX,CAQE,QAAQ,KARV,CASE,KAAK,CAAE,MAAI,CAAClB,KAAL,CAAWQ,IATpB,EADF,cAYE,6BAAO,OAAO,CAAC,MAAf,SAZF,CADF,cAgBE,2BAAK,SAAS,CAAC,kBAAf,eACE,6BACE,SAAS,CAAE,eADb,CAEE,EAAE,CAAC,aAFL,CAGE,WAAW,CAAC,aAHd,CAIE,IAAI,CAAC,MAJP,CAKE,IAAI,CAAC,aALP,CAME,QAAQ,CAAE,MAAI,CAACK,6BANjB,CAOE,SAAS,KAPX,CAQE,QAAQ,KARV,CASE,KAAK,CAAE,MAAI,CAACb,KAAL,CAAWS,WATpB,EADF,cAYE,6BAAO,OAAO,CAAC,aAAf,gBAZF,CAhBF,CADF,cAiCE,2BAAK,SAAS,CAAC,sBAAf,eAEE,8BACE,SAAS,CAAC,iBADZ,CAEE,OAAO,CAAE,MAAI,CAACmC,cAFhB,WAFF,cAQE,8BAAQ,SAAS,CAAE,MAAI,CAAC5C,KAAL,CAAWY,QAAX,CAAoB,mBAApB,CAAwC,kBAA3D,CAA+E,IAAI,CAAC,QAApF,sBARF,CAjCF,CADF,cA+CE,8BA/CF,cAgDE,8BAhDF,cAiDE,8BAjDF,cAkDE,8BAlDF,cAmDE,8BAnDF,CADD,cAuDC,2BAAK,SAAS,CAAC,OAAf,eACC,oBAAC,MAAD,EACC,KAAK,CAAE,CAAEiD,KAAK,CAAE,MAAT,CAAiBL,WAAW,CAAE,MAA9B,CADR,CAEC,KAAK,KAFN,CAGC,IAAI,CAAEI,GAAG,CAACE,UAAJ,CAAeC,SAHtB,CAIC,IAAI,CAAC,MAJN,EADD,cAOA,4BAAM,KAAK,CAAE,CAAEC,QAAQ,CAAC,MAAX,CAAmBP,KAAK,CAAE,OAA1B,CAAb,EACGG,GAAG,CAACE,UAAJ,CAAeC,SADlB,OACgCH,GAAG,CAACE,UAAJ,CAAeG,KAD/C,CAPA,CAUCL,GAAG,CAACM,WAAJ,cACC,0BACE,KAAK,CAAE,CACLC,SAAS,CAAE,MADN,CAELV,KAAK,CAAE,yBAFF,CADT,EAMG,GANH,iBAOgB,GAPhB,CAQGhE,MAAM,CAACmE,GAAG,CAACQ,WAAL,CAAN,CAAwBC,MAAxB,CACC,+BADD,CARH,CAUK,GAVL,CADD,cAcC,0BACE,KAAK,CAAE,CACLF,SAAS,CAAE,MADN,CAELV,KAAK,CAAE,yBAFF,CADT,EAMG,GANH,CAOGhE,MAAM,CAACmE,GAAG,CAACU,UAAL,CAAN,CAAuBD,MAAvB,CACC,+BADD,CAPH,CASK,GATL,CAxBF,cAoCE,8BAAKT,GAAG,CAACnD,WAAT,CApCF,cAsCE,yBAAG,MAAM,CAAC,QAAV,CAAmB,IAAI,CAAEmD,GAAG,CAACpD,IAA7B,eACA,oBAAC,WAAD,EAAa,GAAG,CAAEoD,GAAG,CAACpD,IAAtB,CAA4B,KAAK,CAAC,MAAlC,CAAyC,MAAM,CAAC,OAAhD,EADA,CAtCF,cAyCA,8BAzCA,cA0CE,iDAAqBoD,GAAG,CAACW,YAAzB,CA1CF,cA2CK,8BA3CL,cA4CE,8BACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAE,iBAAA1B,CAAC,QAAI,CAAA,MAAI,CAACM,UAAL,CAAgBN,CAAhB,CAAmBe,GAAG,CAACb,EAAvB,CAAJ,EAFZ,eAIC,yBAAG,KAAK,CAAC,cAAT,EAJD,CA5CF,CAkDG,MAAI,CAAC/C,KAAL,CAAWU,MAAX,EAAqBkD,GAAG,CAACb,EAAzB,cACD,oBAAC,KAAD,EACE,IAAI,CAAE,MAAI,CAAC/C,KAAL,CAAWW,SADnB,CAEE,MAAM,CAAE,MAAI,CAACuC,WAFf,eAIE,oBAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,eACE,oBAAC,KAAD,CAAO,KAAP,mDADF,CAJF,cAQE,oBAAC,KAAD,CAAO,MAAP,mBACE,oBAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,OAAO,CAAE,MAAI,CAACA,WAFhB,UADF,cAOE,oBAAC,MAAD,EACE,OAAO,CAAC,QADV,CAEE,OAAO,CAAE,iBAAAL,CAAC,QAAI,CAAA,MAAI,CAACC,aAAL,CAAmBD,CAAnB,CAAsBe,GAAG,CAACb,EAA1B,CAAJ,EAFZ,QAPF,CARF,CADC,cAyBC,gCA3EJ,cAqFE,8BACE,SAAS,CAAC,iBADZ,CAEE,OAAO,CAAE,iBAAAF,CAAC,QACR,CAAA,MAAI,CAACI,WAAL,CAAiBJ,CAAjB,CAAoBe,GAAG,CAACb,EAAxB,CAA4Ba,GAAG,CAACpD,IAAhC,CAAsCoD,GAAG,CAACnD,WAA1C,CADQ,EAFZ,EAMG,GANH,cAOE,yBAAG,KAAK,CAAC,kBAAT,EAPF,CArFF,CAxDJ,cAwJE,8BAxJF,CADF,CA4JD,CA7JD,CA9CJ,CADF,CADF,CAkND,CAnVH,qBAA6BpB,SAA7B,EAsVA,cAAeU,CAAAA,OAAf","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport Avatar from 'react-avatar';\nimport { LinkPreview } from '@dhaiwat10/react-link-preview';\nimport configData from \"./config.json\";\n\nexport class Myposts extends Component {\n  state = {\n    posts: [],\n    subscription: '/mysubscription',\n    myprofile: '/userProfile',\n    myposts: '/myposts',\n    likedposts: '/likedposts',\n    editid: 0,\n    editable: false,\n    link: '',\n    description: '', \n    showId:0,\n    modalShow:false,\n    disabled:false\n  }\n\n  handleCreateDescriptionChange = event => {\n    this.setState({ description: event.target.value })\n  }\n\n  handleCreateLinkChange = event => {\n    this.setState({ link: event.target.value })\n  }\n\n  handleSubmit = (event, postid) => {\n\n    event.preventDefault();\n    this.setState({disabled:true});\n    const url = `${configData.SERVER_URL}api/posts/` + postid\n    console.log(url)\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n\n    const link = this.state.link\n    const description = this.state.description\n\n    let bodyFormData = new FormData()\n    bodyFormData.set('link', link)\n    bodyFormData.set('description', description)\n\n    axios\n      .put(url, bodyFormData, { headers })\n      .then(result => {\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 500)\n  }\n\n  componentDidMount () {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url =\n      `${configData.SERVER_URL}api/posts?course=&created_by=` +\n      localStorage.getItem('userid')\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ posts: result.data })\n        this.setState({ link: result.data.link })\n        this.setState({ description: result.data.description })\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  editingHandler = e => {\n    this.setState({ editable: false })\n  }\n  deleteHandler = (e, id) => {\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url = `${configData.SERVER_URL}api/posts/` + id\n    axios\n      .delete(url, { headers })\n      .then(result => {\n        // this.setState({ posts: result.data });\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 200)\n  }\n\n  editHandler = (e, id, link, description) => {\n    this.setState({ link: link })\n    this.setState({ description: description })\n    this.setState({ editid: id })\n    this.setState({ editable: true })\n  }\n\n  handleClose = () => {\n    this.setState({ modalShow: false })\n  }\n\n  handleShow = (e, id) => {\n    this.setState({ modalShow: true })\n    this.setState({ showId: id })\n  }\n\n  render () {\n    return (\n      <div>\n        <div className='container'>\n          <div>\n            <a type='button' href={this.state.myprofile}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn hover '\n              >\n                My Profile\n              </button>\n            </a>\n            <a type='button' href={this.state.myposts}>\n              <button\n                style={{\n                  marginRight: '4px',\n                  color: 'black',\n              \n                }}\n                className='btn hover activeness'\n              >\n                My Posts\n              </button>\n            </a>\n            <a type='button' href={this.state.likedposts}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn hover  '\n              >\n                Liked Posts\n              </button>{' '}\n            </a>\n            <a type='button' href={this.state.subscription}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn hover'\n              >\n                My Subscription\n              </button>{' '}\n            </a>\n          </div>\n          <br></br>\n\n          {this.state.posts.length == 0 ? (\n            <div>\n              <h2>No Posts Yet</h2>\n            </div>\n          ) : (\n            this.state.posts.map(val => {\n              return (\n                <div className=' container '>\n                  {this.state.editable && this.state.editid == val.id ? (\n                    <div>\n                      <form onSubmit={e => this.handleSubmit(e, val.id)}>\n                        <div className='form-group editpostsdetails'>\n                          <div className='form-label-group'>\n                            <input\n                              className={'form-control '}\n                              id='link'\n                              placeholder='Link'\n                              type='text'\n                              name='link'\n                              onChange={this.handleCreateLinkChange}\n                              autoFocus\n                              required\n                              value={this.state.link}\n                            />\n                            <label htmlFor='link'>Link</label>\n                          </div>\n                          \n                          <div className='form-label-group'>\n                            <input\n                              className={'form-control '}\n                              id='description'\n                              placeholder='Description'\n                              type='text'\n                              name='description'\n                              onChange={this.handleCreateDescriptionChange}\n                              autoFocus\n                              required\n                              value={this.state.description}\n                            />\n                            <label htmlFor='description'>Description</label>\n                          </div>\n                        </div>\n\n                        <div className='form-group editposts'>\n                        \n                          <button\n                            className='btn btn-danger '\n                            onClick={this.editingHandler}\n                          >\n                            Cancel\n                          </button>\n                          <button className={this.state.disabled?'btn btn-disabled ':'btn btn-primary '} type='submit'>\n                            Post &nbsp;&nbsp;&nbsp;\n                          </button>\n                        </div>\n                      </form>\n                      <br></br>\n                      <br></br>\n                      <br></br>\n                      <br></br>\n                      <br></br>\n                    </div>\n                  ) : (\n                    <div className='posts'>\n                     <Avatar\n                      style={{ float: 'left', marginRight: '10px' }}\n                      round\n                      name={val.created_by.full_name}\n                      size='40px'\n                    />\n                    <span style={{ fontSize:'25px', color: 'black' }}>\n                      {val.created_by.full_name} - {val.created_by.email}\n                    </span>\n                    {val.modified_by ? (\n                      <h6\n                        style={{\n                          textAlign: 'left',\n                          color: 'rgba(72, 70, 75, 0.979)'\n                        }}\n                      >\n                        {' '}\n                        Modified at :{' '}\n                        {moment(val.modified_at).format(\n                          'dddd, MMMM Do YYYY, h:mm:ss a'\n                        )}{' '}\n                      </h6>\n                    ) : (\n                      <h6\n                        style={{\n                          textAlign: 'left',\n                          color: 'rgba(72, 70, 75, 0.979)'\n                        }}\n                      >\n                        {' '}\n                        {moment(val.created_at).format(\n                          'dddd, MMMM Do YYYY, h:mm:ss a'\n                        )}{' '}\n                      </h6>\n                    )}\n                      <h6>{val.description}</h6>\n\n                      <a target='_blank' href={val.link}>\n                      <LinkPreview url={val.link} width='100%' height='300px' />\n                      </a>\n                    <br></br>\n                      <span>Upvote Count- {val.upvote_count}</span>\n                         <br></br>\n                      <button\n                        className='btn btn-danger'\n                        onClick={e => this.handleShow(e, val.id)}\n                      >\n                       <i class=\"fas fa-trash\"></i>\n                      </button>\n                      {this.state.showId == val.id ? (\n                      <Modal\n                        show={this.state.modalShow}\n                        onHide={this.handleClose}\n                      >\n                        <Modal.Header closeButton>\n                          <Modal.Title>Are you sure you want to delete this post?</Modal.Title>\n                        </Modal.Header>\n\n                        <Modal.Footer>\n                          <Button\n                            variant='secondary'\n                            onClick={this.handleClose}\n                          >\n                            Close\n                          </Button>\n                          <Button\n                            variant='danger'\n                            onClick={e => this.deleteHandler(e, val.id)}\n                          >\n                            Yes\n                          </Button>\n                        </Modal.Footer>\n                      </Modal>\n                      ): (\n                        <span></span>\n                      )}\n\n                      {/* <button\n                        className='btn btn-danger'\n                        onClick={e => this.deleteHandler(e, val.id)}\n                      >\n                        Delete\n                      </button> */}\n\n                      <button\n                        className='btn btn-primary'\n                        onClick={e =>\n                          this.editHandler(e, val.id, val.link, val.description)\n                        }\n                      >\n                        {' '}\n                        <i class=\"fas fa-user-edit\"></i>\n                      </button>\n                    </div>\n                  )}\n                  <br></br>\n                </div>\n              )\n            })\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Myposts\n"]},"metadata":{},"sourceType":"module"}