{"ast":null,"code":"var _jsxFileName = \"/home/parth/Documents/Github/resourcified-frontend/src/pages/courses.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport moment from 'moment';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport configData from './config.json';\nexport class Courses extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      courses: [],\n      modalShow: false,\n      showId: 0,\n      createRequested: false,\n      newCourse: ''\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        modalShow: false\n      });\n    };\n\n    this.handleShow = (e, id) => {\n      this.setState({\n        modalShow: true\n      });\n      this.setState({\n        showId: id\n      });\n    };\n\n    this.courseHandler = (e, id, name) => {\n      // console.log(id)\n      // console.log(name)\n      localStorage.setItem('course', id);\n      localStorage.setItem('course_name', name);\n      const url = '/posts/' + localStorage.getItem('course');\n      this.props.history.push(url);\n    };\n\n    this.handleCreatecourse = event => {\n      // console.log('Bye')\n      this.setState({\n        createRequested: true\n      });\n    };\n\n    this.handleCourseName = e => {\n      this.setState({\n        newCourse: e.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        disabled: true\n      });\n      const url = `${configData.SERVER_URL}api/courses`; // console.log(url)\n\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      };\n      const course = this.state.newCourse;\n      const branch = this.props.match.params.id;\n      const institute = localStorage.getItem('institute');\n      let bodyFormData = new FormData();\n      bodyFormData.set('name', course);\n      bodyFormData.set('branch', branch);\n      bodyFormData.set('institute', institute);\n      axios.post(url, bodyFormData, {\n        headers\n      }).then(result => {// console.log(result.data)\n      }).catch(error => {\n        console.log(error);\n      });\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 1000); // window.location.reload()\n    };\n\n    this.subscribeHandler = (e, id, subs) => {\n      if (!subs) {\n        // alert(\"Are you sure you want to Subscribe?\");\n        const url = `${configData.SERVER_URL}api/email-notification-subscription`;\n        const headers = {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        };\n        const user = localStorage.getItem('userid');\n        const course = id;\n        let bodyFormData = new FormData();\n        bodyFormData.set('course', course);\n        bodyFormData.set('user', user);\n        axios.post(url, bodyFormData, {\n          headers\n        }).then(result => {// this.setState({ profile: result.data });\n          // console.log(result.data)\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        // alert(\"Are you sure you want to Unsubscribe?\");\n        const url = `${configData.SERVER_URL}api/email-notification-subscription/` + subs;\n        const headers = {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        };\n        axios.delete(url, {\n          headers\n        }).then(result => {// this.setState({ profile: result.data });\n          // console.log(result.data)\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      this.handleClose();\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 400);\n    };\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/');\n      }\n    }\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    };\n    const url = `${configData.SERVER_URL}api/courses?branch=` + this.props.match.params.id + '&institute=' + localStorage.getItem('institute');\n    axios.get(url, {\n      headers\n    }).then(result => {\n      this.setState({\n        courses: result.data\n      }); // console.log(result.data)\n    }).catch(error => {// console.log(error)\n    });\n  }\n\n  render() {\n    //console.log(this.props);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        float: \"left\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontSize: \"20px\",\n        color: \"gray\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }, \" > \", localStorage.getItem('branch'))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }\n    }), localStorage.getItem('role') == 'admin' ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary \",\n      onClick: this.handleCreatecourse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }, \"Create Course\") : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }, this.state.createRequested ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-label-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: 'form-control ',\n      id: \"course_name\",\n      placeholder: \"course_name\",\n      type: \"text\",\n      name: \"course_name\",\n      onChange: this.handleCourseName,\n      autoFocus: true,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"course_name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }, \"Course Name\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: this.state.disabled ? 'btn btn-secondary  btn-block disabled' : 'btn btn-primary btn-block active',\n      type: \"submit\",\n      style: {\n        width: '10%',\n        marginTop: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, \"Create \\xA0\\xA0\\xA0\")))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }\n    }), this.state.courses.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 15\n      }\n    }, \"No Courses added\")) : this.state.courses.map(val => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \" container courses btn-group col-lg-4 col-md-6 col-sm-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          width: '100%',\n          textAlign: 'center',\n          color: 'black'\n        },\n        className: \"btn btn-outline-success btn-block crs\",\n        onClick: e => this.courseHandler(e, val.id, val.name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }\n      }, val.name)), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          width: '30px',\n          height: '30px'\n        },\n        className: val.email_notification_subscription ? 'btn btn-success  ' : 'btn btn-secondary',\n        variant: \"primary\",\n        onClick: e => this.handleShow(e, val.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          alignItems: 'center',\n          padding: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fas fa-bell-slash\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fas fa-bell\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 25\n        }\n      }))), this.state.showId == val.id ? /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.modalShow,\n        onHide: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 25\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 29\n        }\n      }, \"Unsubscribe\") : /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 29\n        }\n      }, \"Subscribe\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 23\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 27\n        }\n      }, \"Are you sure you want to unsubscribe? You wont be receiving email notification when a new post get added in \", val.name, \"?\") : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 27\n        }\n      }, \"Are you sure you want to Subscribe? You will be receiving email notification when a new post get added in \", val.name, \"?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 25\n        }\n      }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"primary\",\n        onClick: e => this.subscribeHandler(e, val.id, val.email_notification_subscription),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 25\n        }\n      }, \"Yes\"))) : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }\n      }));\n    })));\n  }\n\n}\nexport default Courses;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/courses.js"],"names":["React","Component","axios","Link","Redirect","moment","Modal","Button","configData","Courses","state","courses","modalShow","showId","createRequested","newCourse","handleClose","setState","handleShow","e","id","courseHandler","name","localStorage","setItem","url","getItem","props","history","push","handleCreatecourse","event","handleCourseName","target","value","handleSubmit","preventDefault","disabled","SERVER_URL","headers","Accept","Authorization","course","branch","match","params","institute","bodyFormData","FormData","set","post","then","result","catch","error","console","log","window","setTimeout","location","reload","subscribeHandler","subs","user","delete","componentDidMount","get","data","render","float","fontSize","color","width","marginTop","length","map","val","textAlign","height","email_notification_subscription","alignItems","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport configData from './config.json'\n\nexport class Courses extends Component {\n  state = {\n    courses: [],\n    modalShow: false,\n    showId: 0,\n    createRequested: false,\n    newCourse: ''\n  }\n\n  handleClose = () => {\n    this.setState({ modalShow: false })\n  }\n\n  handleShow = (e, id) => {\n    this.setState({ modalShow: true })\n    this.setState({ showId: id })\n  }\n\n  courseHandler = (e, id, name) => {\n    // console.log(id)\n    // console.log(name)\n    localStorage.setItem('course', id);\n    localStorage.setItem('course_name',name);\n    const url = '/posts/' + localStorage.getItem('course')\n    this.props.history.push(url)\n  }\n  handleCreatecourse = event => {\n    // console.log('Bye')\n    this.setState({ createRequested: true })\n  }\n\n  handleCourseName = e => {\n    this.setState({ newCourse: e.target.value })\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n    this.setState({ disabled: true })\n    const url = `${configData.SERVER_URL}api/courses`\n    // console.log(url)\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const course = this.state.newCourse\n    const branch = this.props.match.params.id\n    const institute = localStorage.getItem('institute')\n    let bodyFormData = new FormData()\n    bodyFormData.set('name', course)\n    bodyFormData.set('branch', branch)\n    bodyFormData.set('institute', institute)\n\n    axios\n      .post(url, bodyFormData, { headers })\n      .then(result => {\n        // console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 1000)\n\n    // window.location.reload()\n  }\n\n  subscribeHandler = (e, id, subs) => {\n    if (!subs) {\n      // alert(\"Are you sure you want to Subscribe?\");\n      const url = `${configData.SERVER_URL}api/email-notification-subscription`\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n      const user = localStorage.getItem('userid')\n\n      const course = id\n\n      let bodyFormData = new FormData()\n      bodyFormData.set('course', course)\n      bodyFormData.set('user', user)\n\n      axios\n        .post(url, bodyFormData, { headers })\n        .then(result => {\n          // this.setState({ profile: result.data });\n          // console.log(result.data)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    } else {\n      // alert(\"Are you sure you want to Unsubscribe?\");\n      const url =\n        `${configData.SERVER_URL}api/email-notification-subscription/` + subs\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n\n      axios\n        .delete(url, { headers })\n        .then(result => {\n          // this.setState({ profile: result.data });\n          // console.log(result.data)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    }\n    this.handleClose()\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 400)\n  }\n  componentDidMount () {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url =\n      `${configData.SERVER_URL}api/courses?branch=` +\n      this.props.match.params.id +\n      '&institute=' +\n      localStorage.getItem('institute')\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ courses: result.data })\n\n        // console.log(result.data)\n      })\n      .catch(error => {\n        // console.log(error)\n      })\n  }\n\n  render () {\n    //console.log(this.props);\n    return (\n      <div className='container'>\n        <br></br>\n        <div style={{float:\"left\"}}>\n          <span style={{fontSize:\"20px\",color:\"gray\"}}> > {localStorage.getItem('branch')}</span>\n        </div>\n        <br></br>\n        <br></br>\n        {localStorage.getItem('role') == 'admin' ? (\n          <button\n            className='btn btn-primary '\n            onClick={this.handleCreatecourse}\n          >\n            Create Course\n          </button>\n        ) : (\n          <span></span>\n        )}\n\n        <div className='row'>\n          {this.state.createRequested ? (\n            <div>\n              <br></br>\n              <form onSubmit={this.handleSubmit}>\n                <div className='form-group'>\n                  <div className='form-label-group'>\n                    <input\n                      className={'form-control '}\n                      id='course_name'\n                      placeholder='course_name'\n                      type='text'\n                      name='course_name'\n                      onChange={this.handleCourseName}\n                      autoFocus\n                      required\n                    />\n                    <label htmlFor='course_name'>Course Name</label>\n                  </div>\n                </div>\n\n                <div className='form-group'>\n                  <button\n                    className={\n                      this.state.disabled\n                        ? 'btn btn-secondary  btn-block disabled'\n                        : 'btn btn-primary btn-block active'\n                    }\n                    type='submit'\n                    style={{ width: '10%', marginTop: '20px' }}\n                  >\n                    Create &nbsp;&nbsp;&nbsp;\n                  </button>\n                </div>\n              </form>\n            </div>\n          ) : (\n            <div></div>\n          )}\n\n          <br></br>\n          {this.state.courses.length == 0 ? (\n            <div>\n              <h1>No Courses added</h1>\n            </div>\n          ) : (\n            this.state.courses.map(val => {\n              return (\n                <div className=' container courses btn-group col-lg-4 col-md-6 col-sm-12'>\n                  <button\n                    style={{\n                      width: '100%',\n                      textAlign: 'center',\n                      color: 'black'\n                    }}\n                    className='btn btn-outline-success btn-block crs'\n                    onClick={e => this.courseHandler(e, val.id, val.name)}\n                  >\n                    <h3>{val.name}</h3>\n                  </button>\n\n                  <button\n                    style={{ width: '30px', height: '30px' }}\n                    className={\n                      val.email_notification_subscription\n                        ? 'btn btn-success  '\n                        : 'btn btn-secondary'\n                    }\n                    variant='primary'\n                    onClick={e => this.handleShow(e, val.id)}\n                  >\n                    <h6 style={{ alignItems: 'center', padding: 'auto' }}>\n                      {val.email_notification_subscription ? (\n                        <i class='fas fa-bell-slash'></i>\n                      ) : (\n                        <i class='fas fa-bell'></i>\n                      )}\n                    </h6>\n                  </button>\n\n                  {this.state.showId == val.id ? (\n                    <Modal\n                      show={this.state.modalShow}\n                      onHide={this.handleClose}\n                    >\n                      <Modal.Header closeButton>\n                        <Modal.Title>\n                          {val.email_notification_subscription ? (\n                            <h4>Unsubscribe</h4>\n                          ) : (\n                            <h4>Subscribe</h4>\n                          )}\n                        </Modal.Title>\n                      </Modal.Header>\n                      <Modal.Body>\n                        {val.email_notification_subscription ? (\n                          <p>\n                            Are you sure you want to unsubscribe? You wont be\n                            receiving email notification when a new post get\n                            added in {val.name}?\n                          </p>\n                        ) : (\n                          <p>\n                            Are you sure you want to Subscribe? You will be\n                            receiving email notification when a new post get\n                            added in {val.name}?\n                          </p>\n                        )}\n                      </Modal.Body>\n                      <Modal.Footer>\n                        <Button variant='secondary' onClick={this.handleClose}>\n                          Close\n                        </Button>\n                        <Button\n                          variant='primary'\n                          onClick={e =>\n                            this.subscribeHandler(\n                              e,\n                              val.id,\n                              val.email_notification_subscription\n                            )\n                          }\n                        >\n                          Yes\n                        </Button>\n                      </Modal.Footer>\n                    </Modal>\n                  ) : (\n                    <span></span>\n                  )}\n                </div>\n              )\n            })\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Courses\n"]},"metadata":{},"sourceType":"module"}