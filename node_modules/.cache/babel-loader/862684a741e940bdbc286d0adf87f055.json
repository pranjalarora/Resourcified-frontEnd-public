{"ast":null,"code":"import _classCallCheck from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,Redirect}from'react-router-dom';import moment from'moment';import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import configData from\"./config.json\";export var Courses=/*#__PURE__*/function(_Component){_inherits(Courses,_Component);var _super=_createSuper(Courses);function Courses(){var _this;_classCallCheck(this,Courses);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={courses:[],modalShow:false,showId:0,createRequested:false,newCourse:''};_this.handleClose=function(){_this.setState({modalShow:false});};_this.handleShow=function(e,id){_this.setState({modalShow:true});_this.setState({showId:id});};_this.courseHandler=function(e,id,name){console.log(id);console.log(name);localStorage.setItem('course',id);var url='/posts/'+localStorage.getItem('course');_this.props.history.push(url);};_this.handleCreatecourse=function(event){console.log('Bye');_this.setState({createRequested:true});};_this.handleCourseName=function(e){_this.setState({newCourse:e.target.value});};_this.handleSubmit=function(event){event.preventDefault();_this.setState({disabled:true});var url=\"\".concat(configData.SERVER_URL,\"api/courses\");console.log(url);var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var course=_this.state.newCourse;var branch=_this.props.match.params.id;var institute=localStorage.getItem('institute');var bodyFormData=new FormData();bodyFormData.set('name',course);bodyFormData.set('branch',branch);bodyFormData.set('institute',institute);axios.post(url,bodyFormData,{headers:headers}).then(function(result){console.log(result.data);}).catch(function(error){console.log(error);});window.setTimeout(function(){window.location.reload();},1000);// window.location.reload()\n};_this.subscribeHandler=function(e,id,subs){if(!subs){// alert(\"Are you sure you want to Subscribe?\");\nvar url=\"\".concat(configData.SERVER_URL,\"api/email-notification-subscription\");var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var user=localStorage.getItem('userid');var course=id;var bodyFormData=new FormData();bodyFormData.set('course',course);bodyFormData.set('user',user);axios.post(url,bodyFormData,{headers:headers}).then(function(result){// this.setState({ profile: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});}else{// alert(\"Are you sure you want to Unsubscribe?\");\nvar _url=\"\".concat(configData.SERVER_URL,\"api/email-notification-subscription/\")+subs;var _headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};axios.delete(_url,{headers:_headers}).then(function(result){// this.setState({ profile: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});}_this.handleClose();window.setTimeout(function(){window.location.reload();},200);};return _this;}_createClass(Courses,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!localStorage.getItem('isLoggedIn')){{this.props.history.push('/');}}var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var url=\"\".concat(configData.SERVER_URL,\"api/courses?branch=\")+this.props.match.params.id+'&institute='+localStorage.getItem('institute');axios.get(url,{headers:headers}).then(function(result){_this2.setState({courses:result.data});console.log(result.data);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this3=this;//console.log(this.props);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},localStorage.getItem('role')=='admin'?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary \",onClick:this.handleCreatecourse},\"Create Course\"):/*#__PURE__*/React.createElement(\"span\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.createRequested?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{className:'form-control ',id:\"course_name\",placeholder:\"course_name\",type:\"text\",name:\"course_name\",onChange:this.handleCourseName,autoFocus:true,required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"course_name\"},\"Course Name\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{className:this.state.disabled?'btn btn-secondary  btn-block disabled':'btn btn-primary btn-block active',type:\"submit\",style:{width:'10%',marginTop:'20px'}},\"Create \\xA0\\xA0\\xA0\")))):/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"br\",null),this.state.courses.length==0?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"No Courses added\")):this.state.courses.map(function(val){return/*#__PURE__*/React.createElement(\"div\",{className:\" container courses btn-group col-lg-4 col-md-6 col-sm-12\"},/*#__PURE__*/React.createElement(\"button\",{style:{width:'100%',textAlign:'center',color:'black'},className:\"btn btn-outline-success btn-block crs\",onClick:function onClick(e){return _this3.courseHandler(e,val.id,val.name);}},/*#__PURE__*/React.createElement(\"h3\",null,val.name)),/*#__PURE__*/React.createElement(\"button\",{style:{width:'30px',height:'30px'},className:val.email_notification_subscription?'btn btn-success  ':'btn btn-secondary',variant:\"primary\",onClick:function onClick(e){return _this3.handleShow(e,val.id);}},/*#__PURE__*/React.createElement(\"h6\",{style:{alignItems:'center',padding:'auto'}},val.email_notification_subscription?/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-bell-slash\"}):/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-bell\"}))),_this3.state.showId==val.id?/*#__PURE__*/React.createElement(Modal,{show:_this3.state.modalShow,onHide:_this3.handleClose},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,val.email_notification_subscription?/*#__PURE__*/React.createElement(\"h4\",null,\"Unsubscribe\"):/*#__PURE__*/React.createElement(\"h4\",null,\"Subscribe\"))),/*#__PURE__*/React.createElement(Modal.Body,null,val.email_notification_subscription?/*#__PURE__*/React.createElement(\"p\",null,\"Are you sure you want to unsubscribe? You wont be receiving email notification when a new post get added in \",val.name,\"?\"):/*#__PURE__*/React.createElement(\"p\",null,\"Are you sure you want to Subscribe? You will be receiving email notification when a new post get added in \",val.name,\"?\")),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:_this3.handleClose},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(e){return _this3.subscribeHandler(e,val.id,val.email_notification_subscription);}},\"Yes\"))):/*#__PURE__*/React.createElement(\"span\",null));})));}}]);return Courses;}(Component);export default Courses;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/courses.js"],"names":["React","Component","axios","Link","Redirect","moment","Modal","Button","configData","Courses","state","courses","modalShow","showId","createRequested","newCourse","handleClose","setState","handleShow","e","id","courseHandler","name","console","log","localStorage","setItem","url","getItem","props","history","push","handleCreatecourse","event","handleCourseName","target","value","handleSubmit","preventDefault","disabled","SERVER_URL","headers","Accept","Authorization","course","branch","match","params","institute","bodyFormData","FormData","set","post","then","result","data","catch","error","window","setTimeout","location","reload","subscribeHandler","subs","user","delete","get","width","marginTop","length","map","val","textAlign","color","height","email_notification_subscription","alignItems","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport configData from \"./config.json\";\n\nexport class Courses extends Component {\n  state = {\n    courses: [],\n    modalShow: false,\n    showId: 0,\n    createRequested: false,\n    newCourse: ''\n  }\n\n  handleClose = () => {\n    this.setState({ modalShow: false })\n  }\n\n  handleShow = (e, id) => {\n    this.setState({ modalShow: true })\n    this.setState({ showId: id })\n  }\n\n  courseHandler = (e, id, name) => {\n    console.log(id)\n    console.log(name)\n    localStorage.setItem('course', id)\n    const url = '/posts/' + localStorage.getItem('course')\n    this.props.history.push(url)\n  }\n  handleCreatecourse = event => {\n    console.log('Bye')\n    this.setState({ createRequested: true })\n  }\n\n  handleCourseName = e => {\n    this.setState({ newCourse: e.target.value })\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n    this.setState({ disabled: true })\n    const url = `${configData.SERVER_URL}api/courses`\n    console.log(url)\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const course = this.state.newCourse\n    const branch = this.props.match.params.id\n    const institute = localStorage.getItem('institute')\n    let bodyFormData = new FormData()\n    bodyFormData.set('name', course)\n    bodyFormData.set('branch', branch)\n    bodyFormData.set('institute', institute)\n\n    axios\n      .post(url, bodyFormData, { headers })\n      .then(result => {\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 1000)\n\n    // window.location.reload()\n  }\n\n  subscribeHandler = (e, id, subs) => {\n    if (!subs) {\n      // alert(\"Are you sure you want to Subscribe?\");\n      const url = `${configData.SERVER_URL}api/email-notification-subscription`\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n      const user = localStorage.getItem('userid')\n\n      const course = id\n\n      let bodyFormData = new FormData()\n      bodyFormData.set('course', course)\n      bodyFormData.set('user', user)\n\n      axios\n        .post(url, bodyFormData, { headers })\n        .then(result => {\n          // this.setState({ profile: result.data });\n\n          console.log(result.data)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    } else {\n      // alert(\"Are you sure you want to Unsubscribe?\");\n      const url =\n        `${configData.SERVER_URL}api/email-notification-subscription/` + subs\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n\n      axios\n        .delete(url, { headers })\n        .then(result => {\n          // this.setState({ profile: result.data });\n\n          console.log(result.data)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    }\n    this.handleClose()\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 200)\n  }\n  componentDidMount () {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url =\n      `${configData.SERVER_URL}api/courses?branch=` +\n      this.props.match.params.id +\n      '&institute=' +\n      localStorage.getItem('institute')\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ courses: result.data })\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  render () {\n    //console.log(this.props);\n    return (\n      <div className='container'>\n        {localStorage.getItem('role') == 'admin' ? (\n          <button\n            className='btn btn-primary '\n            onClick={this.handleCreatecourse}\n          >\n            Create Course\n          </button>\n        ) : (\n          <span></span>\n        )}\n\n        <div className='row'>\n          {this.state.createRequested ? (\n            <div>\n              <br></br>\n              <form onSubmit={this.handleSubmit}>\n                <div className='form-group'>\n                  <div className='form-label-group'>\n                    <input\n                      className={'form-control '}\n                      id='course_name'\n                      placeholder='course_name'\n                      type='text'\n                      name='course_name'\n                      onChange={this.handleCourseName}\n                      autoFocus\n                      required\n                    />\n                    <label htmlFor='course_name'>Course Name</label>\n                  </div>\n                </div>\n\n                <div className='form-group'>\n                  <button\n                    className={\n                      this.state.disabled\n                        ? 'btn btn-secondary  btn-block disabled'\n                        : 'btn btn-primary btn-block active'\n                    }\n                    type='submit'\n                    style={{ width: '10%', marginTop: '20px' }}\n                  >\n                    Create &nbsp;&nbsp;&nbsp;\n                  </button>\n                </div>\n              </form>\n            </div>\n          ) : (\n            <div></div>\n          )}\n\n          <br></br>\n          {this.state.courses.length == 0 ? (\n            <div>\n              <h1>No Courses added</h1>\n            </div>\n          ) : (\n            this.state.courses.map(val => {\n              return (\n                <div className=' container courses btn-group col-lg-4 col-md-6 col-sm-12'>\n                  <button\n                    style={{ width: '100%', textAlign: 'center',color: 'black'}}\n                    className='btn btn-outline-success btn-block crs'\n                    onClick={e => this.courseHandler(e, val.id, val.name)}\n                  >\n                    <h3>{val.name}</h3>\n                  </button>\n\n                  <button\n                    style={{ width: '30px', height: '30px' }}\n                    className={\n                      val.email_notification_subscription\n                        ? 'btn btn-success  '\n                        : 'btn btn-secondary'\n                    }\n                    variant='primary'\n                    onClick={e => this.handleShow(e, val.id)}\n                  >\n                    <h6 style={{ alignItems: 'center', padding: 'auto' }}>\n                      {val.email_notification_subscription ? (\n                        <i class='fas fa-bell-slash'></i>\n                      ) : (\n                        <i class='fas fa-bell'></i>\n                      )}\n                    </h6>\n                  </button>\n\n                  {this.state.showId == val.id ? (\n                    <Modal\n                      show={this.state.modalShow}\n                      onHide={this.handleClose}\n                    >\n                      <Modal.Header closeButton>\n                        <Modal.Title>\n                          {val.email_notification_subscription ? (\n                            <h4>Unsubscribe</h4>\n                          ) : (\n                            <h4>Subscribe</h4>\n                          )}\n                        </Modal.Title>\n                      </Modal.Header>\n                      <Modal.Body>\n                        {val.email_notification_subscription ? (\n                          <p>\n                            Are you sure you want to unsubscribe? You wont be\n                            receiving email notification when a new post get\n                            added in {val.name}?\n                          </p>\n                        ) : (\n                          <p>\n                            Are you sure you want to Subscribe? You will be\n                            receiving email notification when a new post get\n                            added in {val.name}?\n                          </p>\n                        )}\n                      </Modal.Body>\n                      <Modal.Footer>\n                        <Button variant='secondary' onClick={this.handleClose}>\n                          Close\n                        </Button>\n                        <Button\n                          variant='primary'\n                          onClick={e =>\n                            this.subscribeHandler(\n                              e,\n                              val.id,\n                              val.email_notification_subscription\n                            )\n                          }\n                        >\n                          Yes\n                        </Button>\n                      </Modal.Footer>\n                    </Modal>\n                  ) : (\n                    <span></span>\n                  )}\n                </div>\n              )\n            })\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Courses\n"]},"metadata":{},"sourceType":"module"}