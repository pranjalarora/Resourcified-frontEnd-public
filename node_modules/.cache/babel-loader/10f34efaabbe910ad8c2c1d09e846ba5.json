{"ast":null,"code":"import _classCallCheck from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{Link,Redirect}from\"react-router-dom\";import moment from'moment';export var userProfile=/*#__PURE__*/function(_Component){_inherits(userProfile,_Component);var _super=_createSuper(userProfile);function userProfile(){var _this;_classCallCheck(this,userProfile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={profile:[],isEditing:false,full_name:\"\",phone:\"\",gender:\"\",degree:\"\",branch:\"\",institute:\"\",subscription:\"/mysubscription\",myprofile:\"/userProfile\",myposts:\"/myposts\",likedposts:\"/likedposts\",disabled:false};_this.handleDegree=function(event){_this.setState({degree:event.target.value});};_this.handleFullname=function(event){_this.setState({full_name:event.target.value});};_this.handlePhone=function(event){_this.setState({phone:event.target.value});};_this.handleGender=function(event){_this.setState({gender:event.target.value});};_this.editHandler=function(event){_this.setState({isEditing:true});};_this.handleSubmit=function(event){event.preventDefault();_this.setState({disabled:true});console.log(_this.state.phone);console.log(_this.state.full_name);console.log(_this.state.gender);console.log(_this.state.degree);var degree=_this.state.degree;var gender=_this.state.gender;var full_name=_this.state.full_name;var phone=_this.state.phone;var bodyFormData=new FormData();bodyFormData.set(\"gender\",gender);bodyFormData.set(\"degree\",degree);bodyFormData.set(\"full_name\",full_name);bodyFormData.set(\"phone\",phone);var headers={\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"token\"))};var url=\"http://localhost:8000/api/current-user-profile\";axios.put(url,bodyFormData,{headers:headers}).then(function(result){// this.setState({ profile: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});// this.setState({isEditing:false});\nwindow.setTimeout(function(){window.location.reload();},700);};return _this;}_createClass(userProfile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!localStorage.getItem(\"isLoggedIn\")){{this.props.history.push(\"/\");}}var headers={\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"token\"))};var url=\"http://localhost:8000/api/current-user-profile\";axios.get(url,{headers:headers}).then(function(result){_this2.setState({profile:result.data});_this2.setState({full_name:result.data.full_name});_this2.setState({phone:result.data.phone});_this2.setState({degree:result.data.degree});_this2.setState({gender:result.data.gender});_this2.setState({branch:result.data.branch.name});_this2.setState({institute:result.data.institute.name});console.log(result.data);console.log(result.data.branch.name);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.myprofile},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px',color:'white',backgroundColor:\"green\"},className:\"btn btn-outline-success \"},\"My Profile\")),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.myposts},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn btn-outline-success \"},\"My Posts\")),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.likedposts},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn btn-outline-success \"},\"Liked Posts\"),\" \"),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.subscription},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn btn-outline-success \"},\"My Subscription\"),\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"br\",null),!this.state.isEditing?/*#__PURE__*/React.createElement(\"div\",{className:\" container \"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-success \",onClick:this.editHandler},\"Edit Details\"),/*#__PURE__*/React.createElement(\"div\",{className:\"profile\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"h4\",null,\" Full Name:- \",this.state.profile.full_name,\" \"),/*#__PURE__*/React.createElement(\"h4\",null,\"Email:- \",this.state.profile.email,\" \"),/*#__PURE__*/React.createElement(\"h4\",null,\"Gender:- \",this.state.profile.gender,\" \"),/*#__PURE__*/React.createElement(\"h4\",null,\"Institute:- \",this.state.institute),/*#__PURE__*/React.createElement(\"h4\",null,\"Branch:- \",this.state.branch),/*#__PURE__*/React.createElement(\"h4\",null,\"Degree:- \",this.state.profile.degree,\" \"),/*#__PURE__*/React.createElement(\"h4\",null,\"Contact Number:- \",this.state.profile.phone,\" \"))),/*#__PURE__*/React.createElement(\"br\",null)):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"full_name\",style:{color:'blue'}},\"Full Name\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control \",id:\"full_name\",placeholder:\"Full Name\",type:\"text\",name:\"full_name\",onChange:this.handleFullname,autoFocus:true,required:true,value:this.state.full_name})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"phone\",style:{color:'blue'}},\"Contact Number\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control \",id:\"phone\",placeholder:\"Phone\",type:\"text\",name:\"phone\",onChange:this.handlePhone,autoFocus:true,required:true,value:this.state.phone})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"gender\",style:{color:'blue'}},\"Gender\"),/*#__PURE__*/React.createElement(\"select\",{reequired:true,class:\"custom-select\",id:\"gender\",name:\"gender\",onChange:this.handleGender,value:this.state.gender},/*#__PURE__*/React.createElement(\"option\",{selected:true},\"Choose...\"),/*#__PURE__*/React.createElement(\"option\",{value:\"male\"},\"Male\"),/*#__PURE__*/React.createElement(\"option\",{value:\"female\"},\"Female\"),/*#__PURE__*/React.createElement(\"option\",{value:\"other\"},\"Other\"))),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"degree\",style:{color:'blue'}},\"Degree\"),/*#__PURE__*/React.createElement(\"select\",{reequired:true,class:\"custom-select\",id:\"degree\",name:\"degree\",onChange:this.handleDegree,value:this.state.degree},/*#__PURE__*/React.createElement(\"option\",{selected:true,value:0},\"Choose...\"),/*#__PURE__*/React.createElement(\"option\",{value:\"btech\"},\"BTech\"),/*#__PURE__*/React.createElement(\"option\",{value:\"mtech\"},\"MTech\"),/*#__PURE__*/React.createElement(\"option\",{value:\"phd\"},\"Phd\"),/*#__PURE__*/React.createElement(\"option\",{value:\"msc\"},\"Msc\"),/*#__PURE__*/React.createElement(\"option\",{value:\"mba\"},\"MBA\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\",style:{color:'blue'}},/*#__PURE__*/React.createElement(\"button\",{className:this.state.disabled?'btn btn-secondary  btn-block disabled':'btn btn-primary btn-block active',type:\"submit\"},\"Change Details \\xA0\\xA0\\xA0\"))))));}}]);return userProfile;}(Component);export default userProfile;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/userProfile.js"],"names":["React","Component","axios","Link","Redirect","moment","userProfile","state","profile","isEditing","full_name","phone","gender","degree","branch","institute","subscription","myprofile","myposts","likedposts","disabled","handleDegree","event","setState","target","value","handleFullname","handlePhone","handleGender","editHandler","handleSubmit","preventDefault","console","log","bodyFormData","FormData","set","headers","Accept","Authorization","localStorage","getItem","url","put","then","result","data","catch","error","window","setTimeout","location","reload","props","history","push","get","name","marginRight","color","backgroundColor","email"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport moment from 'moment';\n\nexport class userProfile extends Component {\n\n\n    state = {\n        profile: [],\n        isEditing: false,\n        full_name: \"\",\n        phone: \"\",\n        gender: \"\",\n        degree: \"\",\n        branch:\"\",\n        institute:\"\",\n        subscription:\"/mysubscription\",\n        myprofile: \"/userProfile\",\n        myposts:\"/myposts\",\n        likedposts: \"/likedposts\",\n        disabled:false\n    }\n\n    handleDegree = (event) => {\n        this.setState({ degree: event.target.value });\n    }\n    handleFullname = (event) => {\n        this.setState({ full_name: event.target.value });\n    }\n    handlePhone = (event) => {\n        this.setState({ phone: event.target.value });\n    }\n    handleGender = (event) => {\n        this.setState({ gender: event.target.value });\n    }\n    editHandler = (event) => {\n        this.setState({ isEditing: true });\n    }\n    componentDidMount() {\n        if(!localStorage.getItem(\"isLoggedIn\")){\n            {\n              this.props.history.push(\"/\");  \n            }\n        }\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            Authorization: `JWT ${localStorage.getItem(\"token\")}`\n\n        };\n\n\n        const url = \"http://localhost:8000/api/current-user-profile\";\n        axios\n            .get(url, { headers })\n            .then((result) => {\n\n\n                this.setState({ profile: result.data });\n                this.setState({ full_name: result.data.full_name });\n                this.setState({ phone: result.data.phone });\n                this.setState({ degree: result.data.degree });\n                this.setState({ gender: result.data.gender });\n                this.setState({branch:result.data.branch.name });\n                this.setState({institute: result.data.institute.name})\n                console.log(result.data);\n                console.log(result.data.branch.name);\n            })\n            .catch((error) => {\n                console.log(error);\n\n            });\n\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        this.setState({ disabled:true });\n        console.log(this.state.phone);\n        console.log(this.state.full_name);\n        console.log(this.state.gender);\n        console.log(this.state.degree);\n\n\n        const degree = this.state.degree;\n        const gender = this.state.gender;\n        const full_name = this.state.full_name;\n        const phone = this.state.phone;\n\n        let bodyFormData = new FormData();\n        bodyFormData.set(\"gender\", gender);\n        bodyFormData.set(\"degree\", degree);\n        bodyFormData.set(\"full_name\", full_name);\n        bodyFormData.set(\"phone\", phone);\n\n\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            Authorization: `JWT ${localStorage.getItem(\"token\")}`\n\n        };\n        const url = \"http://localhost:8000/api/current-user-profile\";\n        axios\n            .put(url, bodyFormData, { headers })\n            .then((result) => {\n\n\n                // this.setState({ profile: result.data });\n\n\n                console.log(result.data);\n            })\n            .catch((error) => {\n                console.log(error);\n\n            });\n        // this.setState({isEditing:false});\n        window.setTimeout(function(){window.location.reload()},700)\n    }\n    render() {\n        return (\n            <div>\n                <div>\n\n                    <a type=\"button\" href={this.state.myprofile}><button style={{ marginRight: '4px', color: 'white', backgroundColor: \"green\" }} className=\"btn btn-outline-success \">My Profile</button></a>\n                    <a type=\"button\" href={this.state.myposts}><button style={{ marginRight: '4px' }} className=\"btn btn-outline-success \">My Posts</button></a>\n                    <a type=\"button\" href={this.state.likedposts}><button style={{ marginRight: '4px' }} className=\"btn btn-outline-success \">Liked Posts</button> </a>\n                    <a type=\"button\" href={this.state.subscription}><button style={{ marginRight: '4px' }} className=\"btn btn-outline-success \">My Subscription</button> </a>\n                </div>\n                <div className=\"container\">\n<br></br>\n                    {!this.state.isEditing ?\n\n                        <div className=\" container \" >\n                            <button className=\"btn btn-outline-success \" onClick={this.editHandler}>Edit Details</button>\n                            <div className=\"profile\">\n\n                                <ul>\n                                    <h4 > Full Name:- {this.state.profile.full_name} </h4>\n                                    <h4>Email:- {this.state.profile.email} </h4>\n                                    <h4>Gender:- {this.state.profile.gender} </h4>\n                                    <h4>Institute:- {this.state.institute}</h4>\n                                    <h4>Branch:- {this.state.branch}</h4>\n                                    <h4>Degree:- {this.state.profile.degree} </h4>\n                                    <h4>Contact Number:- {this.state.profile.phone} </h4>\n                                </ul>\n                            </div>\n                            <br></br>\n                        </div>\n\n\n                        : <div>\n                            <form onSubmit={this.handleSubmit}>\n                                <div className=\"form-group\">\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"full_name\" style={{color:'blue'}}>Full Name</label>\n                                        <input\n                                            className={\n                                                \"form-control \"\n                                            }\n                                            id=\"full_name\"\n                                            placeholder=\"Full Name\"\n                                            type=\"text\"\n                                            name=\"full_name\"\n                                            onChange={this.handleFullname}\n                                            autoFocus\n                                            required\n                                            value={this.state.full_name}\n                                        />\n\n\n                                    </div>\n\n                                    <div className=\"form-group\">\n                                        <label for=\"phone\" style={{color:'blue'}}>Contact Number</label>\n                                        <input\n                                            className={\n                                                \"form-control \"\n                                            }\n                                            id=\"phone\"\n                                            placeholder=\"Phone\"\n                                            type=\"text\"\n                                            name=\"phone\"\n                                            onChange={this.handlePhone}\n                                            autoFocus\n                                            required\n                                            value={this.state.phone}\n                                        />\n\n\n                                    </div>\n                                    <div class=\"form-group\">\n                                        <label for=\"gender\" style={{color:'blue'}}>Gender</label>\n                                        <select reequired class=\"custom-select\" id=\"gender\" name=\"gender\" onChange={this.handleGender} value={this.state.gender} >\n                                            <option selected  >Choose...</option>\n                                            <option value={\"male\"} >Male</option>\n                                            <option value={\"female\"} >Female</option>\n                                            <option value={\"other\"} >Other</option>\n\n                                        </select>\n                                    </div>\n\n                                    <div class=\"form-group\">\n                                        <label for=\"degree\" style={{color:'blue'}}>Degree</label>\n                                        <select reequired class=\"custom-select\" id=\"degree\" name=\"degree\" onChange={this.handleDegree} value={this.state.degree}>\n                                            <option selected value={0} >Choose...</option>\n                                            <option value={\"btech\"} >BTech</option>\n                                            <option value={\"mtech\"} >MTech</option>\n                                            <option value={\"phd\"} >Phd</option>\n                                            <option value={\"msc\"} >Msc</option>\n                                            <option value={\"mba\"} >MBA</option>\n                                        </select>\n                                    </div>\n                                </div>\n\n                                <div className=\"form-group\" style={{color:'blue'}}>\n                                <button className={this.state.disabled ? 'btn btn-secondary  btn-block disabled'  :'btn btn-primary btn-block active'}  type='submit'>\n                                    \n                                        Change Details &nbsp;&nbsp;&nbsp;\n\n                                    </button>\n                                </div>\n                            </form></div>}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default userProfile\n"]},"metadata":{},"sourceType":"module"}