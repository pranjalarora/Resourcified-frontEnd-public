{"ast":null,"code":"import _classCallCheck from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,Redirect}from'react-router-dom';import configData from'./config.json';var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(){var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:'',name:'',email:'',password:'',redirect:false,authError:false,isLoading:false,instituteName:'',instituteId:0,institutes:[],branches:[],branchId:0};_this.handleEmailChange=function(event){// console.log(this.state.role);\n_this.setState({email:event.target.value});_this.setState({username:event.target.value});};_this.handlePwdChange=function(event){_this.setState({password:event.target.value});};_this.handleNameChange=function(event){_this.setState({name:event.target.value});};_this.handleInstitueChange=function(event){// console.log();\n// console.log(event.target.value);\n// this.setState({ instituteName: event.target.value });\n_this.setState({instituteId:event.target.value});_this.handleBranchChange(event);};_this.handleBranchChange=function(event){var headers={'Content-Type':'application/json',Accept:'application/json'};var url=\"\".concat(configData.SERVER_URL,\"api/branches?institute=\")+event.target.value;axios.get(url,{headers:headers}).then(function(result){_this.setState({branches:result.data});// console.log(result.data);\n}).catch(function(error){console.log(error);_this.setState({authError:true,isLoading:false});});// this.setState({ branch: event.target.value });\n// console.log(this.state.branch);\n};_this.handleBranchChanged=function(event){_this.setState({branchId:event.target.value});};_this.handleSubmit=function(event){event.preventDefault();_this.setState({isLoading:true});var url=\"\".concat(configData.SERVER_URL,\"api/signup\");var email=_this.state.email;var role='student';var password=_this.state.password;var full_name=_this.state.name;var username=_this.state.username;var branch=_this.state.branchId;var institute=_this.state.instituteId;var bodyFormData=new FormData();bodyFormData.set('role',role);bodyFormData.set('email',email);bodyFormData.set('full_name',full_name);bodyFormData.set('username',username);bodyFormData.set('password',password);bodyFormData.set('branch',branch);bodyFormData.set('institute',institute);// console.log(institute)\n// console.log(branch)\naxios.post(url,bodyFormData).then(function(result){_this.setState({isLoading:false});if(result.data.status!=='fail'){_this.setState({redirect:true,authError:false});}else{_this.setState({redirect:false,authError:true});}// console.log(result)\n}).catch(function(error){console.log(error);_this.setState({authError:true,isLoading:false});});};_this.renderRedirect=function(){if(_this.state.redirect){return/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"});}};return _this;}_createClass(Register,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var headers={'Content-Type':'application/json',Accept:'application/json'};var url=\"\".concat(configData.SERVER_URL,\"api/institutes\");axios.get(url,{headers:headers}).then(function(result){// if (result.data.status !== \"fail\") {\n//   this.setState({ redirect: true, authError: false });\n// } else {\n//   this.setState({ redirect: false, authError: true });\n// }\n_this2.setState({institutes:result.data});// console.log(result.data);\n}).catch(function(error){console.log(error);_this2.setState({authError:true,isLoading:false});});}//if(localStorage.getItem(\"isLoggedIn\")!=NULL & localStorage.getItem(\"isLoggedIn\")==true)\n},{key:\"render\",value:function render(){var isLoading=this.state.isLoading;return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-login mx-auto mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header colour-green\"},\"Register\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"inputName\",className:\"form-control\",placeholder:\"name\",name:\"name\",onChange:this.handleNameChange,required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"inputName\"},\"Full Name\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{id:\"inputEmail\",className:'form-control '+(this.state.authError?'is-invalid':''),placeholder:\"Email address\",type:\"text\",name:\"email\",onChange:this.handleEmailChange,autoFocus:true,required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"inputEmail\"},\"Email address\"),/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback\"},\"Please provide a valid Email. or Email Exist\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control\",id:\"inputPassword\",placeholder:\"******\",name:\"password\",onChange:this.handlePwdChange,required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"inputPassword\"},\"Password\"))),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"institute\"},\"Institute\"),/*#__PURE__*/React.createElement(\"select\",{reequired:true,class:\"custom-select\",id:\"institute\",name:\"institute\",onChange:this.handleInstitueChange,value:this.state.instituteId},/*#__PURE__*/React.createElement(\"option\",{selected:true,value:0},\"Choose...\"),this.state.institutes.map(function(val){return/*#__PURE__*/React.createElement(\"option\",{value:val.id},val.name);}))),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"institute\"},\"Branches\"),/*#__PURE__*/React.createElement(\"select\",{reequired:true,class:\"custom-select\",id:\"branch\",name:\"branch\",onChange:this.handleBranchChanged,value:this.state.branchId},/*#__PURE__*/React.createElement(\"option\",{selected:true,value:0},\"Choose...\"),this.state.branches.map(function(val){return/*#__PURE__*/React.createElement(\"option\",{value:val.id},val.name);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-block\",type:\"submit\",disabled:this.state.isLoading?true:false},\"Register \\xA0\\xA0\\xA0\",isLoading?/*#__PURE__*/React.createElement(\"span\",{className:\"spinner-border spinner-border-sm\",role:\"status\",\"aria-hidden\":\"true\"}):/*#__PURE__*/React.createElement(\"span\",null)))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(Link,{className:\"d-block small mt-3\",to:'/login'},\"Login Your Account\")))),this.renderRedirect());}}]);return Register;}(Component);export{Register as default};","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/register.js"],"names":["React","Component","axios","Link","Redirect","configData","Register","state","username","name","email","password","redirect","authError","isLoading","instituteName","instituteId","institutes","branches","branchId","handleEmailChange","event","setState","target","value","handlePwdChange","handleNameChange","handleInstitueChange","handleBranchChange","headers","Accept","url","SERVER_URL","get","then","result","data","catch","error","console","log","handleBranchChanged","handleSubmit","preventDefault","role","full_name","branch","institute","bodyFormData","FormData","set","post","status","renderRedirect","map","val","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport configData from './config.json'\n\nexport default class Register extends Component {\n  state = {\n    username: '',\n    name: '',\n    email: '',\n    password: '',\n    redirect: false,\n    authError: false,\n    isLoading: false,\n    instituteName: '',\n    instituteId: 0,\n    institutes: [],\n    branches: [],\n    branchId: 0\n  }\n\n  componentDidMount () {\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json'\n    }\n    const url = `${configData.SERVER_URL}api/institutes`\n    axios\n      .get(url, { headers })\n      .then(result => {\n        // if (result.data.status !== \"fail\") {\n        //   this.setState({ redirect: true, authError: false });\n        // } else {\n        //   this.setState({ redirect: false, authError: true });\n        // }\n        this.setState({ institutes: result.data })\n\n        // console.log(result.data);\n      })\n      .catch(error => {\n        console.log(error)\n        this.setState({ authError: true, isLoading: false })\n      })\n  }\n  //if(localStorage.getItem(\"isLoggedIn\")!=NULL & localStorage.getItem(\"isLoggedIn\")==true)\n\n  handleEmailChange = event => {\n    // console.log(this.state.role);\n    this.setState({ email: event.target.value })\n    this.setState({ username: event.target.value })\n  }\n  handlePwdChange = event => {\n    this.setState({ password: event.target.value })\n  }\n  handleNameChange = event => {\n    this.setState({ name: event.target.value })\n  }\n\n  handleInstitueChange = event => {\n    // console.log();\n    // console.log(event.target.value);\n    // this.setState({ instituteName: event.target.value });\n    this.setState({ instituteId: event.target.value })\n    this.handleBranchChange(event)\n  }\n\n  handleBranchChange = event => {\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json'\n    }\n    const url =\n      `${configData.SERVER_URL}api/branches?institute=` + event.target.value\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ branches: result.data })\n\n        // console.log(result.data);\n      })\n      .catch(error => {\n        console.log(error)\n        this.setState({ authError: true, isLoading: false })\n      })\n    // this.setState({ branch: event.target.value });\n    // console.log(this.state.branch);\n  }\n\n  handleBranchChanged = event => {\n    this.setState({ branchId: event.target.value })\n  }\n  handleSubmit = event => {\n    event.preventDefault()\n    this.setState({ isLoading: true })\n    const url = `${configData.SERVER_URL}api/signup`\n    const email = this.state.email\n    const role = 'student'\n    const password = this.state.password\n    const full_name = this.state.name\n    const username = this.state.username\n    const branch = this.state.branchId\n    const institute = this.state.instituteId\n    let bodyFormData = new FormData()\n    bodyFormData.set('role', role)\n    bodyFormData.set('email', email)\n\n    bodyFormData.set('full_name', full_name)\n    bodyFormData.set('username', username)\n    bodyFormData.set('password', password)\n    bodyFormData.set('branch', branch)\n    bodyFormData.set('institute', institute)\n\n    // console.log(institute)\n    // console.log(branch)\n    axios\n      .post(url, bodyFormData)\n      .then(result => {\n        this.setState({ isLoading: false })\n        if (result.data.status !== 'fail') {\n          this.setState({ redirect: true, authError: false })\n        } else {\n          this.setState({ redirect: false, authError: true })\n        }\n\n        // console.log(result)\n      })\n      .catch(error => {\n        console.log(error)\n        this.setState({ authError: true, isLoading: false })\n      })\n  }\n\n  renderRedirect = () => {\n    if (this.state.redirect) {\n      return <Redirect to='/login' />\n    }\n  }\n\n  render () {\n    const isLoading = this.state.isLoading\n    return (\n      <div className='container'>\n        <div className='card card-login mx-auto mt-5'>\n          <div className='card-header colour-green'>Register</div>\n          <div className='card-body'>\n            <form onSubmit={this.handleSubmit}>\n              <div className='form-group'>\n                <div className='form-label-group'>\n                  <input\n                    type='text'\n                    id='inputName'\n                    className='form-control'\n                    placeholder='name'\n                    name='name'\n                    onChange={this.handleNameChange}\n                    required\n                  />\n                  <label htmlFor='inputName'>Full Name</label>\n                </div>\n              </div>\n\n              <div className='form-group'>\n                <div className='form-label-group'>\n                  <input\n                    id='inputEmail'\n                    className={\n                      'form-control ' +\n                      (this.state.authError ? 'is-invalid' : '')\n                    }\n                    placeholder='Email address'\n                    type='text'\n                    name='email'\n                    onChange={this.handleEmailChange}\n                    autoFocus\n                    required\n                  />\n                  <label htmlFor='inputEmail'>Email address</label>\n                  <div className='invalid-feedback'>\n                    Please provide a valid Email. or Email Exist\n                  </div>\n                </div>\n              </div>\n              <div className='form-group'>\n                <div className='form-label-group'>\n                  <input\n                    type='password'\n                    className='form-control'\n                    id='inputPassword'\n                    placeholder='******'\n                    name='password'\n                    onChange={this.handlePwdChange}\n                    required\n                  />\n                  <label htmlFor='inputPassword'>Password</label>\n                </div>\n              </div>\n\n              <div class='form-group'>\n                <label for='institute'>Institute</label>\n                <select\n                  reequired\n                  class='custom-select'\n                  id='institute'\n                  name='institute'\n                  onChange={this.handleInstitueChange}\n                  value={this.state.instituteId}\n                >\n                  <option selected value={0}>\n                    Choose...\n                  </option>\n                  {this.state.institutes.map(val => (\n                    <option value={val.id}>{val.name}</option>\n                  ))}\n\n                  {/* {console.log(this.state.instituteId)} */}\n                </select>\n              </div>\n\n              <div class='form-group'>\n                <label for='institute'>Branches</label>\n                <select\n                  reequired\n                  class='custom-select'\n                  id='branch'\n                  name='branch'\n                  onChange={this.handleBranchChanged}\n                  value={this.state.branchId}\n                >\n                  <option selected value={0}>\n                    Choose...\n                  </option>\n                  {this.state.branches.map(val => (\n                    <option value={val.id}>{val.name}</option>\n                  ))}\n                  {/* {console.log(this.state.branch)} */}\n                </select>\n              </div>\n\n              <div className='form-group'>\n                <button\n                  className='btn btn-primary btn-block'\n                  type='submit'\n                  disabled={this.state.isLoading ? true : false}\n                >\n                  Register &nbsp;&nbsp;&nbsp;\n                  {isLoading ? (\n                    <span\n                      className='spinner-border spinner-border-sm'\n                      role='status'\n                      aria-hidden='true'\n                    ></span>\n                  ) : (\n                    <span></span>\n                  )}\n                </button>\n              </div>\n            </form>\n            <div className='text-center'>\n              <Link className='d-block small mt-3' to={'/login'}>\n                Login Your Account\n              </Link>\n            </div>\n          </div>\n        </div>\n        {this.renderRedirect()}\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}