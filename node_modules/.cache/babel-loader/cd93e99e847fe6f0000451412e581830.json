{"ast":null,"code":"import _classCallCheck from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,Redirect}from'react-router-dom';import moment from'moment';import Avatar from'react-avatar';import configData from\"./config.json\";import{LinkPreview}from'@dhaiwat10/react-link-preview';export var Posts=/*#__PURE__*/function(_Component){_inherits(Posts,_Component);var _super=_createSuper(Posts);function Posts(){var _this;_classCallCheck(this,Posts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={upvote:0,upvoted:false,posts:[],createRequested:false,createLink:'',createDescription:'',disabled:false};_this.handleSubmit=function(event){event.preventDefault();_this.setState({disabled:true});var url=\"\".concat(configData.SERVER_URL,\"api/posts\");console.log(url);var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var link=_this.state.createLink;var description=_this.state.createDescription;var course=_this.props.match.params.id;var bodyFormData=new FormData();bodyFormData.set('link',link);bodyFormData.set('description',description);bodyFormData.set('course',course);axios.post(url,bodyFormData,{headers:headers}).then(function(result){console.log(result.data);}).catch(function(error){console.log(error);});window.setTimeout(function(){window.location.reload();},1000);// window.location.reload()\n};_this.upvoteHandler=function(e,id,val,upvoted){var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var url=\"\".concat(configData.SERVER_URL,\"api/upvote\");var user=localStorage.getItem('userid');var post=id;var bodyFormData=new FormData();bodyFormData.set('user',user);bodyFormData.set('post',post);console.log(user);console.log(post);axios.post(url,bodyFormData,{headers:headers}).then(function(result){// this.setState({ posts: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});window.setTimeout(function(){window.location.reload();},400);};_this.handleCreatepost=function(event){console.log('Bye');_this.setState({createRequested:true});};_this.handleCreateLinkChange=function(event){_this.setState({createLink:event.target.value});};_this.handleCreateDescriptionChange=function(event){_this.setState({createDescription:event.target.value});};return _this;}_createClass(Posts,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(configData.SERVER_URL);if(!localStorage.getItem('isLoggedIn')){{this.props.history.push('/');}}var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var url=\"\".concat(configData.SERVER_URL,\"api/posts?course=\")+this.props.match.params.id;axios.get(url,{headers:headers}).then(function(result){_this2.setState({posts:result.data});console.log(result.data);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this3=this;//console.log(this.props);\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary \",onClick:this.handleCreatepost},\"Create Post\"),this.state.createRequested?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{className:'form-control ',id:\"link\",placeholder:\"Link\",type:\"text\",name:\"link\",onChange:this.handleCreateLinkChange,autoFocus:true,required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"link\"},\"Link\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-label-group\"},/*#__PURE__*/React.createElement(\"input\",{className:'form-control ',id:\"description\",placeholder:\"Description\",type:\"text\",name:\"description\",onChange:this.handleCreateDescriptionChange,autoFocus:true,required:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description\"},\"Description\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{className:this.state.disabled?'btn btn-secondary  btn-block disabled':'btn btn-primary btn-block active',type:\"submit\",style:{width:'10%',marginTop:'20px'}},\"Post \\xA0\\xA0\\xA0\")))):/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),this.state.posts.length==0?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"No Posts Yet\")):this.state.posts.map(function(val){return/*#__PURE__*/React.createElement(\"div\",{className:\" container \"},/*#__PURE__*/React.createElement(\"div\",{className:\"posts\"},/*#__PURE__*/React.createElement(Avatar,{style:{float:'left',marginRight:'10px'},round:true,name:val.created_by.full_name,size:\"40px\"}),/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:'25px',color:'black'}},val.created_by.full_name,\" - \",val.created_by.email),val.modified_by?/*#__PURE__*/React.createElement(\"h6\",{style:{textAlign:'left',color:'rgba(72, 70, 75, 0.979)'}},' ',\"Modified at :\",' ',moment(val.modified_at).format('dddd, MMMM Do YYYY, h:mm:ss a'),' '):/*#__PURE__*/React.createElement(\"h6\",{style:{textAlign:'left',color:'rgba(72, 70, 75, 0.979)'}},' ',moment(val.created_at).format('dddd, MMMM Do YYYY, h:mm:ss a'),' '),/*#__PURE__*/React.createElement(\"h6\",null,val.description),/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",href:val.link},/*#__PURE__*/React.createElement(LinkPreview,{url:val.link,width:\"100%\",height:\"300px\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"button\",{className:val.is_already_upvoted?'btn btn-success':' btn btn-secondary',onClick:function onClick(e){return _this3.upvoteHandler(e,val.id,val.upvote_count,val.is_already_upvoted);}},/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-arrow-up\"})),/*#__PURE__*/React.createElement(\"span\",null),\" \",/*#__PURE__*/React.createElement(\"span\",{style:{size:\"15px\"}},\"Upvote Count- \",val.upvote_count))),/*#__PURE__*/React.createElement(\"br\",null));})));}}]);return Posts;}(Component);export default Posts;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/posts.js"],"names":["React","Component","axios","Link","Redirect","moment","Avatar","configData","LinkPreview","Posts","state","upvote","upvoted","posts","createRequested","createLink","createDescription","disabled","handleSubmit","event","preventDefault","setState","url","SERVER_URL","console","log","headers","Accept","Authorization","localStorage","getItem","link","description","course","props","match","params","id","bodyFormData","FormData","set","post","then","result","data","catch","error","window","setTimeout","location","reload","upvoteHandler","e","val","user","handleCreatepost","handleCreateLinkChange","target","value","handleCreateDescriptionChange","history","push","get","width","marginTop","length","map","float","marginRight","created_by","full_name","fontSize","color","email","modified_by","textAlign","modified_at","format","created_at","is_already_upvoted","upvote_count","size"],"mappings":"opBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CAEA,OAASC,WAAT,KAA4B,+BAA5B,CAGA,UAAaC,CAAAA,KAAb,uTACEC,KADF,CACU,CACNC,MAAM,CAAE,CADF,CAENC,OAAO,CAAE,KAFH,CAGNC,KAAK,CAAE,EAHD,CAINC,eAAe,CAAE,KAJX,CAKNC,UAAU,CAAE,EALN,CAMNC,iBAAiB,CAAE,EANb,CAONC,QAAQ,CAAE,KAPJ,CADV,OAWEC,YAXF,CAWiB,SAAAC,KAAK,CAAI,CACtBA,KAAK,CAACC,cAAN,GACA,MAAKC,QAAL,CAAc,CAAEJ,QAAQ,CAAE,IAAZ,CAAd,EACA,GAAMK,CAAAA,GAAG,WAAMf,UAAU,CAACgB,UAAjB,aAAT,CACAC,OAAO,CAACC,GAAR,CAAYH,GAAZ,EAEA,GAAMI,CAAAA,OAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAKA,GAAMC,CAAAA,IAAI,CAAG,MAAKrB,KAAL,CAAWK,UAAxB,CACA,GAAMiB,CAAAA,WAAW,CAAG,MAAKtB,KAAL,CAAWM,iBAA/B,CACA,GAAMiB,CAAAA,MAAM,CAAG,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAvC,CACA,GAAIC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,QAAJ,EAAnB,CACAD,YAAY,CAACE,GAAb,CAAiB,MAAjB,CAAyBT,IAAzB,EACAO,YAAY,CAACE,GAAb,CAAiB,aAAjB,CAAgCR,WAAhC,EACAM,YAAY,CAACE,GAAb,CAAiB,QAAjB,CAA2BP,MAA3B,EAEA/B,KAAK,CACFuC,IADH,CACQnB,GADR,CACagB,YADb,CAC2B,CAAEZ,OAAO,CAAPA,OAAF,CAD3B,EAEGgB,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACdnB,OAAO,CAACC,GAAR,CAAYkB,MAAM,CAACC,IAAnB,EACD,CAJH,EAKGC,KALH,CAKS,SAAAC,KAAK,CAAI,CACdtB,OAAO,CAACC,GAAR,CAAYqB,KAAZ,EACD,CAPH,EASAC,MAAM,CAACC,UAAP,CAAkB,UAAY,CAC5BD,MAAM,CAACE,QAAP,CAAgBC,MAAhB,GACD,CAFD,CAEG,IAFH,EAIA;AACD,CA5CH,OA8CEC,aA9CF,CA8CkB,SAACC,CAAD,CAAIf,EAAJ,CAAQgB,GAAR,CAAazC,OAAb,CAAyB,CACvC,GAAMc,CAAAA,OAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAKA,GAAMR,CAAAA,GAAG,WAAMf,UAAU,CAACgB,UAAjB,cAAT,CACA,GAAM+B,CAAAA,IAAI,CAAGzB,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAb,CACA,GAAMW,CAAAA,IAAI,CAAGJ,EAAb,CACA,GAAIC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,QAAJ,EAAnB,CACAD,YAAY,CAACE,GAAb,CAAiB,MAAjB,CAAyBc,IAAzB,EACAhB,YAAY,CAACE,GAAb,CAAiB,MAAjB,CAAyBC,IAAzB,EAEAjB,OAAO,CAACC,GAAR,CAAY6B,IAAZ,EACA9B,OAAO,CAACC,GAAR,CAAYgB,IAAZ,EACAvC,KAAK,CACFuC,IADH,CACQnB,GADR,CACagB,YADb,CAC2B,CAAEZ,OAAO,CAAPA,OAAF,CAD3B,EAEGgB,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd;AAEAnB,OAAO,CAACC,GAAR,CAAYkB,MAAM,CAACC,IAAnB,EACD,CANH,EAOGC,KAPH,CAOS,SAAAC,KAAK,CAAI,CACdtB,OAAO,CAACC,GAAR,CAAYqB,KAAZ,EACD,CATH,EAWAC,MAAM,CAACC,UAAP,CAAkB,UAAY,CAC5BD,MAAM,CAACE,QAAP,CAAgBC,MAAhB,GACD,CAFD,CAEG,GAFH,EAGD,CA3EH,OA6EEK,gBA7EF,CA6EqB,SAAApC,KAAK,CAAI,CAC1BK,OAAO,CAACC,GAAR,CAAY,KAAZ,EACA,MAAKJ,QAAL,CAAc,CAAEP,eAAe,CAAE,IAAnB,CAAd,EACD,CAhFH,OAkFE0C,sBAlFF,CAkF2B,SAAArC,KAAK,CAAI,CAChC,MAAKE,QAAL,CAAc,CAAEN,UAAU,CAAEI,KAAK,CAACsC,MAAN,CAAaC,KAA3B,CAAd,EACD,CApFH,OAqFEC,6BArFF,CAqFkC,SAAAxC,KAAK,CAAI,CACvC,MAAKE,QAAL,CAAc,CAAEL,iBAAiB,CAAEG,KAAK,CAACsC,MAAN,CAAaC,KAAlC,CAAd,EACD,CAvFH,8FAyFuB,iBACnBlC,OAAO,CAACC,GAAR,CAAYlB,UAAU,CAACgB,UAAvB,EAEA,GAAI,CAACM,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAL,CAAyC,CACvC,CACE,KAAKI,KAAL,CAAW0B,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,CACF,CACD,GAAMnC,CAAAA,OAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAKA,GAAMR,CAAAA,GAAG,CACP,UAAGf,UAAU,CAACgB,UAAd,sBAA8C,KAAKW,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EADxE,CAEAnC,KAAK,CACF4D,GADH,CACOxC,GADP,CACY,CAAEI,OAAO,CAAPA,OAAF,CADZ,EAEGgB,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd,MAAI,CAACtB,QAAL,CAAc,CAAER,KAAK,CAAE8B,MAAM,CAACC,IAAhB,CAAd,EAEApB,OAAO,CAACC,GAAR,CAAYkB,MAAM,CAACC,IAAnB,EACD,CANH,EAOGC,KAPH,CAOS,SAAAC,KAAK,CAAI,CACdtB,OAAO,CAACC,GAAR,CAAYqB,KAAZ,EACD,CATH,EAUD,CAlHH,uCAoHY,iBACR;AACA,mBACE,4CACE,2BAAK,SAAS,CAAC,WAAf,eACE,8BAAQ,SAAS,CAAC,kBAAlB,CAAqC,OAAO,CAAE,KAAKS,gBAAnD,gBADF,CAKG,KAAK7C,KAAL,CAAWI,eAAX,cACC,4CACE,8BADF,cAEE,4BAAM,QAAQ,CAAE,KAAKI,YAArB,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,6BACE,SAAS,CAAE,eADb,CAEE,EAAE,CAAC,MAFL,CAGE,WAAW,CAAC,MAHd,CAIE,IAAI,CAAC,MAJP,CAKE,IAAI,CAAC,MALP,CAME,QAAQ,CAAE,KAAKsC,sBANjB,CAOE,SAAS,KAPX,CAQE,QAAQ,KARV,EADF,cAWE,6BAAO,OAAO,CAAC,MAAf,SAXF,CADF,cAcE,2BAAK,SAAS,CAAC,kBAAf,eACE,6BACE,SAAS,CAAE,eADb,CAEE,EAAE,CAAC,aAFL,CAGE,WAAW,CAAC,aAHd,CAIE,IAAI,CAAC,MAJP,CAKE,IAAI,CAAC,aALP,CAME,QAAQ,CAAE,KAAKG,6BANjB,CAOE,SAAS,KAPX,CAQE,QAAQ,KARV,EADF,cAWE,6BAAO,OAAO,CAAC,aAAf,gBAXF,CAdF,CADF,cA8BE,2BAAK,SAAS,CAAC,YAAf,eACE,8BACE,SAAS,CACP,KAAKjD,KAAL,CAAWO,QAAX,CACI,uCADJ,CAEI,kCAJR,CAME,IAAI,CAAC,QANP,CAOE,KAAK,CAAE,CAAE8C,KAAK,CAAE,KAAT,CAAgBC,SAAS,CAAE,MAA3B,CAPT,sBADF,CA9BF,CAFF,CADD,cAiDC,+BAtDJ,cAyDE,8BAzDF,cA0DE,8BA1DF,CA2DG,KAAKtD,KAAL,CAAWG,KAAX,CAAiBoD,MAAjB,EAA2B,CAA3B,cACC,4CACE,6CADF,CADD,CAKC,KAAKvD,KAAL,CAAWG,KAAX,CAAiBqD,GAAjB,CAAqB,SAAAb,GAAG,CAAI,CAC1B,mBACE,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACA,oBAAC,MAAD,EACI,KAAK,CAAE,CAAEc,KAAK,CAAE,MAAT,CAAiBC,WAAW,CAAE,MAA9B,CADX,CAEI,KAAK,KAFT,CAGI,IAAI,CAAEf,GAAG,CAACgB,UAAJ,CAAeC,SAHzB,CAII,IAAI,CAAC,MAJT,EADA,cAOE,4BAAM,KAAK,CAAE,CAAEC,QAAQ,CAAC,MAAX,CAAmBC,KAAK,CAAE,OAA1B,CAAb,EACGnB,GAAG,CAACgB,UAAJ,CAAeC,SADlB,OACgCjB,GAAG,CAACgB,UAAJ,CAAeI,KAD/C,CAPF,CAUGpB,GAAG,CAACqB,WAAJ,cACC,0BACE,KAAK,CAAE,CACLC,SAAS,CAAE,MADN,CAELH,KAAK,CAAE,yBAFF,CADT,EAMG,GANH,iBAOgB,GAPhB,CAQGnE,MAAM,CAACgD,GAAG,CAACuB,WAAL,CAAN,CAAwBC,MAAxB,CACC,+BADD,CARH,CAUK,GAVL,CADD,cAcC,0BACE,KAAK,CAAE,CACLF,SAAS,CAAE,MADN,CAELH,KAAK,CAAE,yBAFF,CADT,EAMG,GANH,CAOGnE,MAAM,CAACgD,GAAG,CAACyB,UAAL,CAAN,CAAuBD,MAAvB,CACC,+BADD,CAPH,CASK,GATL,CAxBJ,cAqCE,8BAAKxB,GAAG,CAACrB,WAAT,CArCF,cAuCE,yBAAG,MAAM,CAAC,QAAV,CAAmB,IAAI,CAAEqB,GAAG,CAACtB,IAA7B,eAEE,oBAAC,WAAD,EAAa,GAAG,CAAEsB,GAAG,CAACtB,IAAtB,CAA4B,KAAK,CAAC,MAAlC,CAAyC,MAAM,CAAC,OAAhD,EAFF,CAvCF,cA+CE,8BA/CF,cAgDE,6CACE,8BACE,SAAS,CACPsB,GAAG,CAAC0B,kBAAJ,CACI,iBADJ,CAEI,oBAJR,CAME,OAAO,CAAE,iBAAA3B,CAAC,QACR,CAAA,MAAI,CAACD,aAAL,CACEC,CADF,CAEEC,GAAG,CAAChB,EAFN,CAGEgB,GAAG,CAAC2B,YAHN,CAIE3B,GAAG,CAAC0B,kBAJN,CADQ,EANZ,eAeA,yBAAG,KAAK,CAAC,iBAAT,EAfA,CADF,cAkBE,gCAlBF,kBAkBgB,4BAAM,KAAK,CAAE,CAACE,IAAI,CAAC,MAAN,CAAb,mBAA2C5B,GAAG,CAAC2B,YAA/C,CAlBhB,CAhDF,CADF,cAuEE,8BAvEF,CADF,CA2ED,CA5ED,CAhEJ,CADF,CADF,CAmJD,CAzQH,mBAA2B/E,SAA3B,EA4QA,cAAeQ,CAAAA,KAAf","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\nimport Avatar from 'react-avatar';\nimport configData from \"./config.json\";\n\nimport { LinkPreview } from '@dhaiwat10/react-link-preview';\n\n\nexport class Posts extends Component {\n  state = {\n    upvote: 0,\n    upvoted: false,\n    posts: [],\n    createRequested: false,\n    createLink: '',\n    createDescription: '',\n    disabled: false\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n    this.setState({ disabled: true })\n    const url = `${configData.SERVER_URL}api/posts`\n    console.log(url)\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const link = this.state.createLink\n    const description = this.state.createDescription\n    const course = this.props.match.params.id\n    let bodyFormData = new FormData()\n    bodyFormData.set('link', link)\n    bodyFormData.set('description', description)\n    bodyFormData.set('course', course)\n\n    axios\n      .post(url, bodyFormData, { headers })\n      .then(result => {\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 1000)\n\n    // window.location.reload()\n  }\n\n  upvoteHandler = (e, id, val, upvoted) => {\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url = `${configData.SERVER_URL}api/upvote`\n    const user = localStorage.getItem('userid')\n    const post = id\n    let bodyFormData = new FormData()\n    bodyFormData.set('user', user)\n    bodyFormData.set('post', post)\n\n    console.log(user)\n    console.log(post)\n    axios\n      .post(url, bodyFormData, { headers })\n      .then(result => {\n        // this.setState({ posts: result.data });\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 400)\n  }\n\n  handleCreatepost = event => {\n    console.log('Bye')\n    this.setState({ createRequested: true })\n  }\n\n  handleCreateLinkChange = event => {\n    this.setState({ createLink: event.target.value })\n  }\n  handleCreateDescriptionChange = event => {\n    this.setState({ createDescription: event.target.value })\n  }\n\n  componentDidMount () {\n    console.log(configData.SERVER_URL)\n   \n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url =\n      `${configData.SERVER_URL}api/posts?course=` + this.props.match.params.id\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ posts: result.data })\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  render () {\n    //console.log(this.props);\n    return (\n      <div>\n        <div className='container'>\n          <button className='btn btn-primary ' onClick={this.handleCreatepost}>\n            Create Post\n          </button>\n\n          {this.state.createRequested ? (\n            <div>\n              <br></br>\n              <form onSubmit={this.handleSubmit}>\n                <div className='form-group'>\n                  <div className='form-label-group'>\n                    <input\n                      className={'form-control '}\n                      id='link'\n                      placeholder='Link'\n                      type='text'\n                      name='link'\n                      onChange={this.handleCreateLinkChange}\n                      autoFocus\n                      required\n                    />\n                    <label htmlFor='link'>Link</label>\n                  </div>\n                  <div className='form-label-group'>\n                    <input\n                      className={'form-control '}\n                      id='description'\n                      placeholder='Description'\n                      type='text'\n                      name='description'\n                      onChange={this.handleCreateDescriptionChange}\n                      autoFocus\n                      required\n                    />\n                    <label htmlFor='description'>Description</label>\n                  </div>\n                </div>\n\n                <div className='form-group'>\n                  <button\n                    className={\n                      this.state.disabled\n                        ? 'btn btn-secondary  btn-block disabled'\n                        : 'btn btn-primary btn-block active'\n                    }\n                    type='submit'\n                    style={{ width: '10%', marginTop: '20px' }}\n                  >\n                    Post &nbsp;&nbsp;&nbsp;\n                  </button>\n                </div>\n              </form>\n            </div>\n          ) : (\n            <div></div>\n          )}\n\n          <br></br>\n          <br></br>\n          {this.state.posts.length == 0 ? (\n            <div>\n              <h2>No Posts Yet</h2>\n            </div>\n          ) : (\n            this.state.posts.map(val => {\n              return (\n                <div className=' container '>\n                  <div className='posts'>\n                  <Avatar\n                      style={{ float: 'left', marginRight: '10px' }}\n                      round\n                      name={val.created_by.full_name}\n                      size='40px'\n                    />\n                    <span style={{ fontSize:'25px', color: 'black' }}>\n                      {val.created_by.full_name} - {val.created_by.email}\n                    </span>\n                    {val.modified_by ? (\n                      <h6\n                        style={{\n                          textAlign: 'left',\n                          color: 'rgba(72, 70, 75, 0.979)'\n                        }}\n                      >\n                        {' '}\n                        Modified at :{' '}\n                        {moment(val.modified_at).format(\n                          'dddd, MMMM Do YYYY, h:mm:ss a'\n                        )}{' '}\n                      </h6>\n                    ) : (\n                      <h6\n                        style={{\n                          textAlign: 'left',\n                          color: 'rgba(72, 70, 75, 0.979)'\n                        }}\n                      >\n                        {' '}\n                        {moment(val.created_at).format(\n                          'dddd, MMMM Do YYYY, h:mm:ss a'\n                        )}{' '}\n                      </h6>\n                    )}\n\n                    <h6>{val.description}</h6>\n\n                    <a target='_blank' href={val.link}>\n                      \n                      <LinkPreview url={val.link} width='100%' height='300px' />\n\n\n                    </a>\n\n                    \n                    <br></br>\n                    <span>\n                      <button\n                        className={\n                          val.is_already_upvoted\n                            ? 'btn btn-success'\n                            : ' btn btn-secondary'\n                        }\n                        onClick={e =>\n                          this.upvoteHandler(\n                            e,\n                            val.id,\n                            val.upvote_count,\n                            val.is_already_upvoted\n                          )\n                        }\n                      >\n                      <i class=\"fas fa-arrow-up\"></i>\n                      </button>\n                      <span></span> <span style={{size:\"15px\"}}>Upvote Count- {val.upvote_count}</span>\n                    </span>\n                    \n                  </div>\n                  <br></br>\n                </div>\n              )\n            })\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Posts\n"]},"metadata":{},"sourceType":"module"}