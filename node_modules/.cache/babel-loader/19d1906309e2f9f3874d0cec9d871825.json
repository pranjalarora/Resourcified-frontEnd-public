{"ast":null,"code":"var _jsxFileName = \"/home/parth/Documents/Github/resourcified-frontend/src/pages/myposts.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport moment from 'moment';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nexport class Myposts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: [],\n      subscription: '/mysubscription',\n      myprofile: '/userProfile',\n      myposts: '/myposts',\n      likedposts: '/likedposts',\n      editid: 0,\n      editable: false,\n      link: '',\n      description: '',\n      showId: 0,\n      modalShow: false\n    };\n\n    this.handleCreateDescriptionChange = event => {\n      this.setState({\n        description: event.target.value\n      });\n    };\n\n    this.handleCreateLinkChange = event => {\n      this.setState({\n        link: event.target.value\n      });\n    };\n\n    this.handleSubmit = (event, postid) => {\n      event.preventDefault();\n      const url = 'http://localhost:8000/api/posts/' + postid;\n      console.log(url);\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      };\n      const link = this.state.link;\n      const description = this.state.description;\n      let bodyFormData = new FormData();\n      bodyFormData.set('link', link);\n      bodyFormData.set('description', description);\n      axios.put(url, bodyFormData, {\n        headers\n      }).then(result => {\n        console.log(result.data);\n      }).catch(error => {\n        console.log(error);\n      });\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 500);\n    };\n\n    this.editingHandler = e => {\n      this.setState({\n        editable: false\n      });\n    };\n\n    this.deleteHandler = (e, id) => {\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      };\n      const url = 'http://localhost:8000/api/posts/' + id;\n      axios.delete(url, {\n        headers\n      }).then(result => {\n        // this.setState({ posts: result.data });\n        console.log(result.data);\n      }).catch(error => {\n        console.log(error);\n      });\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 200);\n    };\n\n    this.editHandler = (e, id, link, description) => {\n      this.setState({\n        link: link\n      });\n      this.setState({\n        description: description\n      });\n      this.setState({\n        editid: id\n      });\n      this.setState({\n        editable: true\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        modalShow: false\n      });\n    };\n\n    this.handleShow = (e, id) => {\n      this.setState({\n        modalShow: true\n      });\n      this.setState({\n        showId: id\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/');\n      }\n    }\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    };\n    const url = 'http://localhost:8000/api/posts?course=&created_by=' + localStorage.getItem('userid');\n    axios.get(url, {\n      headers\n    }).then(result => {\n      this.setState({\n        posts: result.data\n      });\n      this.setState({\n        link: result.data.link\n      });\n      this.setState({\n        description: result.data.description\n      });\n      console.log(result.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myprofile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"My Profile\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px',\n        color: 'white',\n        backgroundColor: 'green'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, \"My Posts\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.likedposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }, \"Liked Posts\"), ' '), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.subscription,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, \"My Subscription\"), ' ')), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }), this.state.posts.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, \"No Posts Yet\")) : this.state.posts.map(val => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \" container \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, this.state.editable && this.state.editid == val.id ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: e => this.handleSubmit(e, val.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-label-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: 'form-control ',\n        id: \"link\",\n        placeholder: \"Link\",\n        type: \"text\",\n        name: \"link\",\n        onChange: this.handleCreateLinkChange,\n        autoFocus: true,\n        required: true,\n        value: this.state.link,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }\n      }, \"Link\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-label-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: 'form-control ',\n        id: \"description\",\n        placeholder: \"Description\",\n        type: \"text\",\n        name: \"description\",\n        onChange: this.handleCreateDescriptionChange,\n        autoFocus: true,\n        required: true,\n        value: this.state.description,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 29\n        }\n      }, \"Description\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group editposts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-danger \",\n        onClick: this.editingHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 27\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary \",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 27\n        }\n      }, \"Post \\xA0\\xA0\\xA0\"))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"posts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 23\n        }\n      }, val.description), /*#__PURE__*/React.createElement(\"a\", {\n        target: \"_blank\",\n        href: val.link,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 23\n        }\n      }, val.link), /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          color: 'rgba(72, 70, 75, 0.979)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 23\n        }\n      }, \"Posted By:- \", val.created_by.full_name, \" -\", ' ', val.created_by.email), val.modified_by ? /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          textAlign: 'left',\n          color: 'rgba(72, 70, 75, 0.979)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, ' ', \"Modified at :\", ' ', moment(val.modified_at).format('dddd, MMMM Do YYYY, h:mm:ss a'), ' ') : /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          textAlign: 'left',\n          color: 'rgba(72, 70, 75, 0.979)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 19\n        }\n      }, ' ', \"Posted at :\", ' ', moment(val.created_at).format('dddd, MMMM Do YYYY, h:mm:ss a'), ' '), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 23\n        }\n      }, \"Upvote Count- \", val.upvote_count), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: e => this.handleShow(e, val.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 23\n        }\n      }, \"Delete\"), this.state.showId == val.id ? /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.modalShow,\n        onHide: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 27\n        }\n      }, \"Are you sure you want to delete this post?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 27\n        }\n      }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"danger\",\n        onClick: e => this.deleteHandler(e, val.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 27\n        }\n      }, \"Yes\"))) : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: e => this.editHandler(e, val.id, val.link, val.description),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 23\n        }\n      }, ' ', \"Edit Post\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 19\n        }\n      }));\n    })));\n  }\n\n}\nexport default Myposts;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/myposts.js"],"names":["React","Component","axios","Link","Redirect","moment","Modal","Button","Myposts","state","posts","subscription","myprofile","myposts","likedposts","editid","editable","link","description","showId","modalShow","handleCreateDescriptionChange","event","setState","target","value","handleCreateLinkChange","handleSubmit","postid","preventDefault","url","console","log","headers","Accept","Authorization","localStorage","getItem","bodyFormData","FormData","set","put","then","result","data","catch","error","window","setTimeout","location","reload","editingHandler","e","deleteHandler","id","delete","editHandler","handleClose","handleShow","componentDidMount","props","history","push","get","render","marginRight","color","backgroundColor","length","map","val","created_by","full_name","email","modified_by","textAlign","modified_at","format","created_at","upvote_count"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AAEA,OAAO,MAAMC,OAAN,SAAsBP,SAAtB,CAAgC;AAAA;AAAA;AAAA,SACrCQ,KADqC,GAC7B;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,YAAY,EAAE,iBAFR;AAGNC,MAAAA,SAAS,EAAE,cAHL;AAINC,MAAAA,OAAO,EAAE,UAJH;AAKNC,MAAAA,UAAU,EAAE,aALN;AAMNC,MAAAA,MAAM,EAAE,CANF;AAONC,MAAAA,QAAQ,EAAE,KAPJ;AAQNC,MAAAA,IAAI,EAAE,EARA;AASNC,MAAAA,WAAW,EAAE,EATP;AAUNC,MAAAA,MAAM,EAAC,CAVD;AAWNC,MAAAA,SAAS,EAAC;AAXJ,KAD6B;;AAAA,SAerCC,6BAfqC,GAeLC,KAAK,IAAI;AACvC,WAAKC,QAAL,CAAc;AAAEL,QAAAA,WAAW,EAAEI,KAAK,CAACE,MAAN,CAAaC;AAA5B,OAAd;AACD,KAjBoC;;AAAA,SAmBrCC,sBAnBqC,GAmBZJ,KAAK,IAAI;AAChC,WAAKC,QAAL,CAAc;AAAEN,QAAAA,IAAI,EAAEK,KAAK,CAACE,MAAN,CAAaC;AAArB,OAAd;AACD,KArBoC;;AAAA,SAuBrCE,YAvBqC,GAuBtB,CAACL,KAAD,EAAQM,MAAR,KAAmB;AAChCN,MAAAA,KAAK,CAACO,cAAN;AACA,YAAMC,GAAG,GAAG,qCAAqCF,MAAjD;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AAEA,YAAMG,OAAO,GAAG;AACd,wBAAgB,kBADF;AAEdC,QAAAA,MAAM,EAAE,kBAFM;AAGdC,QAAAA,aAAa,EAAG,OAAMC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAHtC,OAAhB;AAMA,YAAMpB,IAAI,GAAG,KAAKR,KAAL,CAAWQ,IAAxB;AACA,YAAMC,WAAW,GAAG,KAAKT,KAAL,CAAWS,WAA/B;AAEA,UAAIoB,YAAY,GAAG,IAAIC,QAAJ,EAAnB;AACAD,MAAAA,YAAY,CAACE,GAAb,CAAiB,MAAjB,EAAyBvB,IAAzB;AACAqB,MAAAA,YAAY,CAACE,GAAb,CAAiB,aAAjB,EAAgCtB,WAAhC;AAEAhB,MAAAA,KAAK,CACFuC,GADH,CACOX,GADP,EACYQ,YADZ,EAC0B;AAAEL,QAAAA;AAAF,OAD1B,EAEGS,IAFH,CAEQC,MAAM,IAAI;AACdZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,MAAM,CAACC,IAAnB;AACD,OAJH,EAKGC,KALH,CAKSC,KAAK,IAAI;AACdf,QAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACD,OAPH;AASAC,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAY;AAC5BD,QAAAA,MAAM,CAACE,QAAP,CAAgBC,MAAhB;AACD,OAFD,EAEG,GAFH;AAGD,KArDoC;;AAAA,SAmFrCC,cAnFqC,GAmFpBC,CAAC,IAAI;AACpB,WAAK7B,QAAL,CAAc;AAAEP,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD,KArFoC;;AAAA,SAsFrCqC,aAtFqC,GAsFrB,CAACD,CAAD,EAAIE,EAAJ,KAAW;AACzB,YAAMrB,OAAO,GAAG;AACd,wBAAgB,kBADF;AAEdC,QAAAA,MAAM,EAAE,kBAFM;AAGdC,QAAAA,aAAa,EAAG,OAAMC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAHtC,OAAhB;AAKA,YAAMP,GAAG,GAAG,qCAAqCwB,EAAjD;AACApD,MAAAA,KAAK,CACFqD,MADH,CACUzB,GADV,EACe;AAAEG,QAAAA;AAAF,OADf,EAEGS,IAFH,CAEQC,MAAM,IAAI;AACd;AAEAZ,QAAAA,OAAO,CAACC,GAAR,CAAYW,MAAM,CAACC,IAAnB;AACD,OANH,EAOGC,KAPH,CAOSC,KAAK,IAAI;AACdf,QAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACD,OATH;AAUAC,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAY;AAC5BD,QAAAA,MAAM,CAACE,QAAP,CAAgBC,MAAhB;AACD,OAFD,EAEG,GAFH;AAGD,KA1GoC;;AAAA,SA4GrCM,WA5GqC,GA4GvB,CAACJ,CAAD,EAAIE,EAAJ,EAAQrC,IAAR,EAAcC,WAAd,KAA8B;AAC1C,WAAKK,QAAL,CAAc;AAAEN,QAAAA,IAAI,EAAEA;AAAR,OAAd;AACA,WAAKM,QAAL,CAAc;AAAEL,QAAAA,WAAW,EAAEA;AAAf,OAAd;AACA,WAAKK,QAAL,CAAc;AAAER,QAAAA,MAAM,EAAEuC;AAAV,OAAd;AACA,WAAK/B,QAAL,CAAc;AAAEP,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD,KAjHoC;;AAAA,SAmHrCyC,WAnHqC,GAmHvB,MAAM;AAClB,WAAKlC,QAAL,CAAc;AAAEH,QAAAA,SAAS,EAAE;AAAb,OAAd;AACD,KArHoC;;AAAA,SAuHrCsC,UAvHqC,GAuHxB,CAACN,CAAD,EAAIE,EAAJ,KAAW;AACtB,WAAK/B,QAAL,CAAc;AAAEH,QAAAA,SAAS,EAAE;AAAb,OAAd;AACA,WAAKG,QAAL,CAAc;AAAEJ,QAAAA,MAAM,EAAEmC;AAAV,OAAd;AACD,KA1HoC;AAAA;;AAuDrCK,EAAAA,iBAAiB,GAAI;AACnB,QAAI,CAACvB,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAL,EAAyC;AACvC;AACE,aAAKuB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;AACF;;AACD,UAAM7B,OAAO,GAAG;AACd,sBAAgB,kBADF;AAEdC,MAAAA,MAAM,EAAE,kBAFM;AAGdC,MAAAA,aAAa,EAAG,OAAMC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAHtC,KAAhB;AAKA,UAAMP,GAAG,GACP,wDACAM,YAAY,CAACC,OAAb,CAAqB,QAArB,CAFF;AAGAnC,IAAAA,KAAK,CACF6D,GADH,CACOjC,GADP,EACY;AAAEG,MAAAA;AAAF,KADZ,EAEGS,IAFH,CAEQC,MAAM,IAAI;AACd,WAAKpB,QAAL,CAAc;AAAEb,QAAAA,KAAK,EAAEiC,MAAM,CAACC;AAAhB,OAAd;AACA,WAAKrB,QAAL,CAAc;AAAEN,QAAAA,IAAI,EAAE0B,MAAM,CAACC,IAAP,CAAY3B;AAApB,OAAd;AACA,WAAKM,QAAL,CAAc;AAAEL,QAAAA,WAAW,EAAEyB,MAAM,CAACC,IAAP,CAAY1B;AAA3B,OAAd;AAEAa,MAAAA,OAAO,CAACC,GAAR,CAAYW,MAAM,CAACC,IAAnB;AACD,KARH,EASGC,KATH,CASSC,KAAK,IAAI;AACdf,MAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACD,KAXH;AAYD;;AA2CDkB,EAAAA,MAAM,GAAI;AACR,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAKvD,KAAL,CAAWG,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAE;AAAEqD,QAAAA,WAAW,EAAE;AAAf,OADT;AAEE,MAAA,SAAS,EAAC,0BAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,eASE;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAKxD,KAAL,CAAWI,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAE;AACLoD,QAAAA,WAAW,EAAE,KADR;AAELC,QAAAA,KAAK,EAAE,OAFF;AAGLC,QAAAA,eAAe,EAAE;AAHZ,OADT;AAME,MAAA,SAAS,EAAC,0BANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CATF,eAqBE;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAK1D,KAAL,CAAWK,UAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAE;AAAEmD,QAAAA,WAAW,EAAE;AAAf,OADT;AAEE,MAAA,SAAS,EAAC,0BAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAMY,GANZ,CArBF,eA6BE;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAKxD,KAAL,CAAWE,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAE;AAAEsD,QAAAA,WAAW,EAAE;AAAf,OADT;AAEE,MAAA,SAAS,EAAC,0BAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAMY,GANZ,CA7BF,CADF,eAuCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvCF,EAyCG,KAAKxD,KAAL,CAAWC,KAAX,CAAiB0D,MAAjB,IAA2B,CAA3B,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADD,GAKC,KAAK3D,KAAL,CAAWC,KAAX,CAAiB2D,GAAjB,CAAqBC,GAAG,IAAI;AAC1B,0BACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK7D,KAAL,CAAWO,QAAX,IAAuB,KAAKP,KAAL,CAAWM,MAAX,IAAqBuD,GAAG,CAAChB,EAAhD,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAM,QAAA,QAAQ,EAAEF,CAAC,IAAI,KAAKzB,YAAL,CAAkByB,CAAlB,EAAqBkB,GAAG,CAAChB,EAAzB,CAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,SAAS,EAAE,eADb;AAEE,QAAA,EAAE,EAAC,MAFL;AAGE,QAAA,WAAW,EAAC,MAHd;AAIE,QAAA,IAAI,EAAC,MAJP;AAKE,QAAA,IAAI,EAAC,MALP;AAME,QAAA,QAAQ,EAAE,KAAK5B,sBANjB;AAOE,QAAA,SAAS,MAPX;AAQE,QAAA,QAAQ,MARV;AASE,QAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWQ,IATpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAYE;AAAO,QAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZF,CADF,eAgBE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,SAAS,EAAE,eADb;AAEE,QAAA,EAAE,EAAC,aAFL;AAGE,QAAA,WAAW,EAAC,aAHd;AAIE,QAAA,IAAI,EAAC,MAJP;AAKE,QAAA,IAAI,EAAC,aALP;AAME,QAAA,QAAQ,EAAE,KAAKI,6BANjB;AAOE,QAAA,SAAS,MAPX;AAQE,QAAA,QAAQ,MARV;AASE,QAAA,KAAK,EAAE,KAAKZ,KAAL,CAAWS,WATpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAYE;AAAO,QAAA,OAAO,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAZF,CAhBF,CADF,eAiCE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,SAAS,EAAC,iBADZ;AAEE,QAAA,OAAO,EAAE,KAAKiC,cAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAOE;AAAQ,QAAA,SAAS,EAAC,kBAAlB;AAAqC,QAAA,IAAI,EAAC,QAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAPF,CAjCF,CADF,eA8CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA9CF,CADD,gBAkDC;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKmB,GAAG,CAACpD,WAAT,CAFF,eAIE;AAAG,QAAA,MAAM,EAAC,QAAV;AAAmB,QAAA,IAAI,EAAEoD,GAAG,CAACrD,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGqD,GAAG,CAACrD,IADP,CAJF,eAOE;AAAI,QAAA,KAAK,EAAE;AAACiD,UAAAA,KAAK,EAAE;AAAR,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACaI,GAAG,CAACC,UAAJ,CAAeC,SAD5B,QACyC,GADzC,EAECF,GAAG,CAACC,UAAJ,CAAeE,KAFhB,CAPF,EAWCH,GAAG,CAACI,WAAJ,gBACD;AAAI,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE,MAAb;AAAqBT,UAAAA,KAAK,EAAE;AAA5B,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,GADD,mBAEc,GAFd,EAGC7D,MAAM,CAACiE,GAAG,CAACM,WAAL,CAAN,CAAwBC,MAAxB,CACC,+BADD,CAHD,EAKG,GALH,CADC,gBAQH;AAAI,QAAA,KAAK,EAAE;AAAEF,UAAAA,SAAS,EAAE,MAAb;AAAqBT,UAAAA,KAAK,EAAE;AAA5B,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,GADL,iBAEgB,GAFhB,EAGK7D,MAAM,CAACiE,GAAG,CAACQ,UAAL,CAAN,CAAuBD,MAAvB,CACC,+BADD,CAHL,EAKO,GALP,CAnBE,eA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAmBP,GAAG,CAACS,YAAvB,CA3BF,eA6BE;AACE,QAAA,SAAS,EAAC,gBADZ;AAEE,QAAA,OAAO,EAAE3B,CAAC,IAAI,KAAKM,UAAL,CAAgBN,CAAhB,EAAmBkB,GAAG,CAAChB,EAAvB,CAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA7BF,EAmCG,KAAK7C,KAAL,CAAWU,MAAX,IAAqBmD,GAAG,CAAChB,EAAzB,gBACD,oBAAC,KAAD;AACE,QAAA,IAAI,EAAE,KAAK7C,KAAL,CAAWW,SADnB;AAEE,QAAA,MAAM,EAAE,KAAKqC,WAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAIE,oBAAC,KAAD,CAAO,MAAP;AAAc,QAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDADF,CAJF,eAQE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AACE,QAAA,OAAO,EAAC,WADV;AAEE,QAAA,OAAO,EAAE,KAAKA,WAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAOE,oBAAC,MAAD;AACE,QAAA,OAAO,EAAC,QADV;AAEE,QAAA,OAAO,EAAEL,CAAC,IAAI,KAAKC,aAAL,CAAmBD,CAAnB,EAAsBkB,GAAG,CAAChB,EAA1B,CAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAPF,CARF,CADC,gBAyBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA5DJ,eAsEE;AACE,QAAA,SAAS,EAAC,iBADZ;AAEE,QAAA,OAAO,EAAEF,CAAC,IACR,KAAKI,WAAL,CAAiBJ,CAAjB,EAAoBkB,GAAG,CAAChB,EAAxB,EAA4BgB,GAAG,CAACrD,IAAhC,EAAsCqD,GAAG,CAACpD,WAA1C,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMG,GANH,cAtEF,CAnDJ,eAoIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApIF,CADF;AAwID,KAzID,CA9CJ,CADF,CADF;AA8LD;;AA3ToC;AA8TvC,eAAeV,OAAf","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\n\nexport class Myposts extends Component {\n  state = {\n    posts: [],\n    subscription: '/mysubscription',\n    myprofile: '/userProfile',\n    myposts: '/myposts',\n    likedposts: '/likedposts',\n    editid: 0,\n    editable: false,\n    link: '',\n    description: '', \n    showId:0,\n    modalShow:false\n  }\n\n  handleCreateDescriptionChange = event => {\n    this.setState({ description: event.target.value })\n  }\n\n  handleCreateLinkChange = event => {\n    this.setState({ link: event.target.value })\n  }\n\n  handleSubmit = (event, postid) => {\n    event.preventDefault()\n    const url = 'http://localhost:8000/api/posts/' + postid\n    console.log(url)\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n\n    const link = this.state.link\n    const description = this.state.description\n\n    let bodyFormData = new FormData()\n    bodyFormData.set('link', link)\n    bodyFormData.set('description', description)\n\n    axios\n      .put(url, bodyFormData, { headers })\n      .then(result => {\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 500)\n  }\n\n  componentDidMount () {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url =\n      'http://localhost:8000/api/posts?course=&created_by=' +\n      localStorage.getItem('userid')\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ posts: result.data })\n        this.setState({ link: result.data.link })\n        this.setState({ description: result.data.description })\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  editingHandler = e => {\n    this.setState({ editable: false })\n  }\n  deleteHandler = (e, id) => {\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url = 'http://localhost:8000/api/posts/' + id\n    axios\n      .delete(url, { headers })\n      .then(result => {\n        // this.setState({ posts: result.data });\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 200)\n  }\n\n  editHandler = (e, id, link, description) => {\n    this.setState({ link: link })\n    this.setState({ description: description })\n    this.setState({ editid: id })\n    this.setState({ editable: true })\n  }\n\n  handleClose = () => {\n    this.setState({ modalShow: false })\n  }\n\n  handleShow = (e, id) => {\n    this.setState({ modalShow: true })\n    this.setState({ showId: id })\n  }\n\n  render () {\n    return (\n      <div>\n        <div className='container'>\n          <div>\n            <a type='button' href={this.state.myprofile}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn btn-outline-success '\n              >\n                My Profile\n              </button>\n            </a>\n            <a type='button' href={this.state.myposts}>\n              <button\n                style={{\n                  marginRight: '4px',\n                  color: 'white',\n                  backgroundColor: 'green'\n                }}\n                className='btn btn-outline-success '\n              >\n                My Posts\n              </button>\n            </a>\n            <a type='button' href={this.state.likedposts}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn btn-outline-success '\n              >\n                Liked Posts\n              </button>{' '}\n            </a>\n            <a type='button' href={this.state.subscription}>\n              <button\n                style={{ marginRight: '4px' }}\n                className='btn btn-outline-success '\n              >\n                My Subscription\n              </button>{' '}\n            </a>\n          </div>\n          <br></br>\n\n          {this.state.posts.length == 0 ? (\n            <div>\n              <h2>No Posts Yet</h2>\n            </div>\n          ) : (\n            this.state.posts.map(val => {\n              return (\n                <div className=' container '>\n                  {this.state.editable && this.state.editid == val.id ? (\n                    <div>\n                      <form onSubmit={e => this.handleSubmit(e, val.id)}>\n                        <div className='form-group'>\n                          <div className='form-label-group'>\n                            <input\n                              className={'form-control '}\n                              id='link'\n                              placeholder='Link'\n                              type='text'\n                              name='link'\n                              onChange={this.handleCreateLinkChange}\n                              autoFocus\n                              required\n                              value={this.state.link}\n                            />\n                            <label htmlFor='link'>Link</label>\n                          </div>\n                          \n                          <div className='form-label-group'>\n                            <input\n                              className={'form-control '}\n                              id='description'\n                              placeholder='Description'\n                              type='text'\n                              name='description'\n                              onChange={this.handleCreateDescriptionChange}\n                              autoFocus\n                              required\n                              value={this.state.description}\n                            />\n                            <label htmlFor='description'>Description</label>\n                          </div>\n                        </div>\n\n                        <div className='form-group editposts'>\n                          <button\n                            className='btn btn-danger '\n                            onClick={this.editingHandler}\n                          >\n                            Cancel\n                          </button>\n                          <button className='btn btn-primary ' type='submit'>\n                            Post &nbsp;&nbsp;&nbsp;\n                          </button>\n                        </div>\n                      </form>\n                      <br></br>\n                    </div>\n                  ) : (\n                    <div className='posts'>\n                      \n                      <h3>{val.description}</h3>\n\n                      <a target='_blank' href={val.link}>\n                        {val.link}\n                      </a>\n                      <h6 style={{color: 'rgba(72, 70, 75, 0.979)'}}>\n                      Posted By:- {val.created_by.full_name} -{' '}\n                      {val.created_by.email}\n                    </h6>\n                    {val.modified_by?\n                    <h6 style={{ textAlign: 'left' ,color: 'rgba(72, 70, 75, 0.979)'}}>\n                    {' '}\n                    Modified at :{' '}\n                    {moment(val.modified_at).format(\n                      'dddd, MMMM Do YYYY, h:mm:ss a'\n                    )}{' '}\n                  </h6>:\n                  <h6 style={{ textAlign: 'left' ,color: 'rgba(72, 70, 75, 0.979)'}}>\n                      {' '}\n                      Posted at :{' '}\n                      {moment(val.created_at).format(\n                        'dddd, MMMM Do YYYY, h:mm:ss a'\n                      )}{' '}\n                    </h6>\n                    }\n                      <h3>Upvote Count- {val.upvote_count}</h3>\n\n                      <button\n                        className='btn btn-danger'\n                        onClick={e => this.handleShow(e, val.id)}\n                      >\n                        Delete\n                      </button>\n                      {this.state.showId == val.id ? (\n                      <Modal\n                        show={this.state.modalShow}\n                        onHide={this.handleClose}\n                      >\n                        <Modal.Header closeButton>\n                          <Modal.Title>Are you sure you want to delete this post?</Modal.Title>\n                        </Modal.Header>\n\n                        <Modal.Footer>\n                          <Button\n                            variant='secondary'\n                            onClick={this.handleClose}\n                          >\n                            Close\n                          </Button>\n                          <Button\n                            variant='danger'\n                            onClick={e => this.deleteHandler(e, val.id)}\n                          >\n                            Yes\n                          </Button>\n                        </Modal.Footer>\n                      </Modal>\n                      ): (\n                        <span></span>\n                      )}\n\n                      {/* <button\n                        className='btn btn-danger'\n                        onClick={e => this.deleteHandler(e, val.id)}\n                      >\n                        Delete\n                      </button> */}\n\n                      <button\n                        className='btn btn-primary'\n                        onClick={e =>\n                          this.editHandler(e, val.id, val.link, val.description)\n                        }\n                      >\n                        {' '}\n                        Edit Post\n                      </button>\n                    </div>\n                  )}\n                  <br></br>\n                </div>\n              )\n            })\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Myposts\n"]},"metadata":{},"sourceType":"module"}