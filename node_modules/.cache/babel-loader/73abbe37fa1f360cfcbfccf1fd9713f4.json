{"ast":null,"code":"var _jsxFileName = \"/home/parth/Documents/Github/resourcified-frontend/src/pages/subscription.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport moment from 'moment';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nexport class Subscription extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      courses: [],\n      subscription: '/mysubscription',\n      myprofile: '/userProfile',\n      myposts: '/myposts',\n      likedposts: '/likedposts',\n      modalShow: false,\n      showId: 0\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        modalShow: false\n      });\n    };\n\n    this.handleShow = (e, id) => {\n      this.setState({\n        modalShow: true\n      });\n      this.setState({\n        showId: id\n      });\n    };\n\n    this.courseHandler = (e, id, name) => {\n      console.log(id);\n      console.log(name);\n      localStorage.setItem('course', id);\n      const url = '/posts/' + localStorage.getItem('course');\n      this.props.history.push(url);\n    };\n\n    this.subscribeHandler = (e, id, subs) => {\n      if (!subs) {\n        const url = 'http://localhost:8000/api/email-notification-subscription';\n        const headers = {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        };\n        const user = localStorage.getItem('userid');\n        const course = id;\n        let bodyFormData = new FormData();\n        bodyFormData.set('course', course);\n        bodyFormData.set('user', user);\n        axios.post(url, bodyFormData, {\n          headers\n        }).then(result => {\n          // this.setState({ profile: result.data });\n          console.log(result.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        const url = 'http://localhost:8000/api/email-notification-subscription/' + subs;\n        const headers = {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        };\n        axios.delete(url, {\n          headers\n        }).then(result => {\n          // this.setState({ profile: result.data });\n          console.log(result.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      this.handleClose();\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 200);\n    };\n  }\n\n  componentDidMount() {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/');\n      }\n    }\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    };\n    const url = 'http://localhost:8000/api/courses?branch=&institute=';\n    axios.get(url, {\n      headers\n    }).then(result => {\n      this.setState({\n        courses: result.data\n      });\n      console.log(result.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myprofile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, \"My Profile\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, \"My Posts\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.likedposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, \"Liked Posts\"), ' '), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.subscription,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px',\n        color: 'black'\n      },\n      className: \"btn  hover activeness\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, \"My Subscription\"), ' ')), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }), this.state.courses.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, \"No Courses added\")) : this.state.courses.map(val => {\n      return val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \" container courses btn-group col-lg-4 col-md-6 col-sm-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn-group \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          width: '100%',\n          textAlign: 'center',\n          color: 'black'\n        },\n        className: \"btn btn-outline-success btn-block crs\",\n        onClick: e => this.courseHandler(e, val.id, val.name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }\n      }, val.name, \" By \"), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }\n      }, val.branch.name)), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          width: '30px',\n          height: '30px',\n          textAlign: 'center'\n        },\n        className: val.email_notification_subscription ? 'btn btn-success btn-block ' : 'btn btn-secondary btn-block',\n        variant: \"primary\",\n        onClick: e => this.handleShow(e, val.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        style: {\n          alignItems: 'center',\n          size: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fas fa-bell-slash\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 29\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fas fa-bell\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 29\n        }\n      }))), this.state.showId == val.id ? /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.modalShow,\n        onHide: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 29\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 33\n        }\n      }, \"Unsubscribe\") : /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 33\n        }\n      }, \"Subscribe\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 27\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 31\n        }\n      }, \"Are you sure you want to unsubscribe? You wont be receiving email notification when a new post get added in \", val.name, \"?\") : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 31\n        }\n      }, \"Are you sure you want to Subscribe? You will be receiving email notification when a new post get added in \", val.name, \"?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 29\n        }\n      }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n        variant: \"primary\",\n        onClick: e => this.subscribeHandler(e, val.id, val.email_notification_subscription),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 29\n        }\n      }, \"Yes\"))) : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 25\n        }\n      }))) : /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 19\n        }\n      });\n    }))));\n  }\n\n}\nexport default Subscription;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/subscription.js"],"names":["React","Component","axios","Link","Redirect","moment","Modal","Button","Subscription","state","courses","subscription","myprofile","myposts","likedposts","modalShow","showId","handleClose","setState","handleShow","e","id","courseHandler","name","console","log","localStorage","setItem","url","getItem","props","history","push","subscribeHandler","subs","headers","Accept","Authorization","user","course","bodyFormData","FormData","set","post","then","result","data","catch","error","delete","window","setTimeout","location","reload","componentDidMount","get","render","marginRight","color","length","map","val","email_notification_subscription","width","textAlign","branch","height","alignItems","size"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\n\nexport class Subscription extends Component {\n  state = {\n    courses: [],\n    subscription: '/mysubscription',\n    myprofile: '/userProfile',\n    myposts: '/myposts',\n    likedposts: '/likedposts',\n    modalShow: false,\n    showId: 0\n  }\n  handleClose = () => {\n    this.setState({ modalShow: false })\n  }\n\n  handleShow = (e, id) => {\n    this.setState({ modalShow: true })\n    this.setState({ showId: id })\n  }\n\n  componentDidMount () {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url = 'http://localhost:8000/api/courses?branch=&institute='\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ courses: result.data })\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  courseHandler = (e, id, name) => {\n    console.log(id)\n    console.log(name)\n    localStorage.setItem('course', id)\n    const url = '/posts/' + localStorage.getItem('course')\n    this.props.history.push(url)\n  }\n\n  subscribeHandler = (e, id, subs) => {\n    if (!subs) {\n      const url = 'http://localhost:8000/api/email-notification-subscription'\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n      const user = localStorage.getItem('userid')\n\n      const course = id\n\n      let bodyFormData = new FormData()\n      bodyFormData.set('course', course)\n      bodyFormData.set('user', user)\n\n      axios\n        .post(url, bodyFormData, { headers })\n        .then(result => {\n          // this.setState({ profile: result.data });\n\n          console.log(result.data)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    } else {\n      const url =\n        'http://localhost:8000/api/email-notification-subscription/' + subs\n      const headers = {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `JWT ${localStorage.getItem('token')}`\n      }\n\n      axios\n        .delete(url, { headers })\n        .then(result => {\n          // this.setState({ profile: result.data });\n\n          console.log(result.data)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    }\n    this.handleClose()\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 200)\n  }\n  render () {\n    return (\n      <div className='container'>\n        <div className='row'>\n          <div>\n            <a type='button' href={this.state.myprofile}>\n              <button style={{ marginRight: '4px' }} className='btn hover'>\n                My Profile\n              </button>\n            </a>\n            <a type='button' href={this.state.myposts}>\n              <button style={{ marginRight: '4px' }} className='btn hover'>\n                My Posts\n              </button>\n            </a>\n            <a type='button' href={this.state.likedposts}>\n              <button style={{ marginRight: '4px' }} className='btn hover'>\n                Liked Posts\n              </button>{' '}\n            </a>\n            <a type='button' href={this.state.subscription}>\n              <button\n                style={{ marginRight: '4px', color: 'black' }}\n                className='btn  hover activeness'\n              >\n                My Subscription\n              </button>{' '}\n            </a>\n          </div>\n\n          <div>\n            <br></br>\n            <br></br>\n            {this.state.courses.length == 0 ? (\n              <div>\n                <h1>No Courses added</h1>\n              </div>\n            ) : (\n              this.state.courses.map(val => {\n                return val.email_notification_subscription ? (\n                  <div className=' container courses btn-group col-lg-4 col-md-6 col-sm-12'>\n                    <div className='btn-group '>\n                      <button\n                        style={{\n                          width: '100%',\n                          textAlign: 'center',\n                          color: 'black'\n                        }}\n                        className='btn btn-outline-success btn-block crs'\n                        onClick={e => this.courseHandler(e, val.id, val.name)}\n                      >\n                        <h3>{val.name} By </h3>\n                        <h3>{val.branch.name}</h3>\n                      </button>\n                      <button\n                        style={{\n                          width: '30px',\n                          height: '30px',\n                          textAlign: 'center'\n                        }}\n                        className={\n                          val.email_notification_subscription\n                            ? 'btn btn-success btn-block '\n                            : 'btn btn-secondary btn-block'\n                        }\n                        variant='primary'\n                        onClick={e => this.handleShow(e, val.id)}\n                      >\n                        <h6 style={{ alignItems: 'center', size: '100%' }}>\n                          {val.email_notification_subscription ? (\n                            <i class='fas fa-bell-slash'></i>\n                          ) : (\n                            <i class='fas fa-bell'></i>\n                          )}\n                        </h6>\n                      </button>\n                      {this.state.showId == val.id ? (\n                        <Modal\n                          show={this.state.modalShow}\n                          onHide={this.handleClose}\n                        >\n                          <Modal.Header closeButton>\n                            <Modal.Title>\n                              {val.email_notification_subscription ? (\n                                <h4>Unsubscribe</h4>\n                              ) : (\n                                <h4>Subscribe</h4>\n                              )}\n                            </Modal.Title>\n                          </Modal.Header>\n                          <Modal.Body>\n                            {val.email_notification_subscription ? (\n                              <p>\n                                Are you sure you want to unsubscribe? You wont\n                                be receiving email notification when a new post\n                                get added in {val.name}?\n                              </p>\n                            ) : (\n                              <p>\n                                Are you sure you want to Subscribe? You will be\n                                receiving email notification when a new post get\n                                added in {val.name}?\n                              </p>\n                            )}\n                          </Modal.Body>\n                          <Modal.Footer>\n                            <Button\n                              variant='secondary'\n                              onClick={this.handleClose}\n                            >\n                              Close\n                            </Button>\n                            <Button\n                              variant='primary'\n                              onClick={e =>\n                                this.subscribeHandler(\n                                  e,\n                                  val.id,\n                                  val.email_notification_subscription\n                                )\n                              }\n                            >\n                              Yes\n                            </Button>\n                          </Modal.Footer>\n                        </Modal>\n                      ) : (\n                        <span></span>\n                      )}\n                    </div>\n                  </div>\n                ) : (\n                  <span></span>\n                )\n              })\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Subscription\n"]},"metadata":{},"sourceType":"module"}