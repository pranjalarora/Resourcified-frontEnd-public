{"ast":null,"code":"var _jsxFileName = \"/home/parth/Documents/Github/teacher-pal/src/pages/quizshow.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Calendar from 'react-calendar';\nimport { Link, Redirect } from \"react-router-dom\";\nimport moment from 'moment';\nimport 'react-calendar/dist/Calendar.css';\nexport class Quizshow extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      date: new Date(),\n      data: [],\n      nodata: false\n    };\n\n    this.onChange = date => this.setState({\n      date\n    });\n\n    this.handlePost = event => {\n      console.log(localStorage.getItem(\"role\"));\n      console.log(localStorage.getItem(\"userid\"));\n      event.preventDefault();\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `JWT ${localStorage.getItem(\"token\")}`\n      }; // Typical usage (don't forget to compare props):\n      //console.log(this.props);\n      //console.log(localStorage.getItem(\"token\"));\n\n      const url = \"http://localhost:8000/api/attendance-detail/\" + this.props.match.params.id;\n      console.log(url);\n      const date = this.state.date; //console.log(typeof(date));\n\n      const localDateString = date.toLocaleDateString('En-en'); //console.log(localDateString);\n\n      var formatted = moment(date).format('YYYY-MM-DD');\n      console.log(typeof formatted);\n      console.log(formatted); // const dt=new Date(formatted);\n      // console.log(dt);\n      // console.log(typeof(dt));\n      //const created_by = this.state.created_by;\n\n      let bodyFormData = new FormData();\n      bodyFormData.set(\"date\", formatted);\n      const body = JSON.stringify({\n        date: formatted\n      }); //console.log(body);\n      //bodyFormData.set(\"created_by\", created_by);\n      //console.log(\"cretaed\", created_by);\n      //console.log(typeof meet);\n\n      axios.post(url, bodyFormData, {\n        headers\n      }).then(result => {\n        console.log(result);\n        this.setState({\n          nodata: false\n        });\n        this.setState({\n          data: result.data\n        });\n        console.log(result.data[\"total_attendance_requests\"]);\n      }).catch(error => {\n        if (error.response) {\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          console.log(error.response.data);\n          this.setState({\n            nodata: true\n          }); // console.log(error.response.status);\n          // console.log(error.response.headers);\n        } else if (error.request) {\n          // The request was made but no response was received\n          // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n          // http.ClientRequest in node.js\n          console.log(error.request);\n        } else {\n          // Something happened in setting up the request that triggered an Error\n          console.log('Error', error.message);\n        }\n\n        console.log(error.config);\n      }); //window.location.reload();\n    };\n  }\n\n  render() {\n    //console.log(this.props);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-login mx-auto mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Calendar, {\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-block\",\n      onClick: this.handlePost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    }, \"Show Attendance\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, this.state.nodata ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 50\n      }\n    }, \"Total Attendence Request: 0\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 86\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 95\n      }\n    }, \"No attendence was taken on this date\")) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 149\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 154\n      }\n    }, \"Total Attendence Request: \", this.state.data[\"total_attendance_requests\"]))), this.state.nodata ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 44\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 56\n      }\n    }, Object.keys(this.state.data).map((val, i, arr) => {\n      if (arr.length - 1 != i) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \" container attendancecardly\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 33\n          }\n        }, val, \": \", this.state.data[val], \" %\"));\n      }\n    }))));\n  }\n\n}\nexport default Quizshow;","map":{"version":3,"sources":["/home/parth/Documents/Github/teacher-pal/src/pages/quizshow.js"],"names":["React","Component","axios","Calendar","Link","Redirect","moment","Quizshow","state","date","Date","data","nodata","onChange","setState","handlePost","event","console","log","localStorage","getItem","preventDefault","headers","Accept","Authorization","url","props","match","params","id","localDateString","toLocaleDateString","formatted","format","bodyFormData","FormData","set","body","JSON","stringify","post","then","result","catch","error","response","request","message","config","render","Object","keys","map","val","i","arr","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Calendar from 'react-calendar';\nimport { Link, Redirect } from \"react-router-dom\";\nimport moment from 'moment';\nimport 'react-calendar/dist/Calendar.css';\n\nexport class Quizshow extends Component {\n    state = {\n        date: new Date(),\n        data: [],\n        nodata: false\n    }\n    onChange = date => this.setState({ date })\n\n\n\n    handlePost = (event) => {\n        console.log(localStorage.getItem(\"role\"));\n        console.log(localStorage.getItem(\"userid\"));\n        event.preventDefault();\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            Authorization: `JWT ${localStorage.getItem(\"token\")}`,\n        };\n        // Typical usage (don't forget to compare props):\n        //console.log(this.props);\n        //console.log(localStorage.getItem(\"token\"));\n        const url = \"http://localhost:8000/api/attendance-detail/\" + this.props.match.params.id;\n        console.log(url);\n        const date = this.state.date;\n        //console.log(typeof(date));\n\n\n        const localDateString = date.toLocaleDateString('En-en');\n        //console.log(localDateString);\n        var formatted = moment(date).format('YYYY-MM-DD');\n        console.log(typeof (formatted))\n        console.log(formatted);\n\n        // const dt=new Date(formatted);\n        // console.log(dt);\n        // console.log(typeof(dt));\n\n\n        //const created_by = this.state.created_by;\n        let bodyFormData = new FormData();\n\n        bodyFormData.set(\"date\", formatted);\n\n        const body = JSON.stringify({\n            date: formatted\n        })\n        //console.log(body);\n        //bodyFormData.set(\"created_by\", created_by);\n        //console.log(\"cretaed\", created_by);\n        //console.log(typeof meet);\n\n        \n        axios\n            .post(url, bodyFormData, { headers })\n            .then((result) => {\n                console.log(result);\n                this.setState({nodata:false});\n                this.setState({ data: result.data });\n                console.log(result.data[\"total_attendance_requests\"]);\n            })\n            .catch((error) => {\n                if (error.response) {\n                    // The request was made and the server responded with a status code\n                    // that falls out of the range of 2xx\n                    console.log(error.response.data);\n                    this.setState({nodata:true});\n                    // console.log(error.response.status);\n                    // console.log(error.response.headers);\n                  } else if (error.request) {\n                    // The request was made but no response was received\n                    // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n                    // http.ClientRequest in node.js\n                    console.log(error.request);\n                  } else {\n                    // Something happened in setting up the request that triggered an Error\n                    console.log('Error', error.message);\n                  }\n                  console.log(error.config);\n            });\n        //window.location.reload();\n    };\n\n    render() {\n        //console.log(this.props);\n        return (\n            <div>\n\n                <div className=\"container\">\n                    <div className=\"card card-login mx-auto mt-5\">\n                        <Calendar\n                            onChange={this.onChange}\n\n\n                        />\n\n                        <div className=\"form-group\">\n                            <button\n                                className=\"btn btn-primary btn-block\"\n                                onClick={this.handlePost}\n                            >\n                                Show Attendance\n\n                            </button>\n\n                        </div>\n\n\n                    </div>\n                    <div>\n                        {this.state.nodata ?<div><h2>Total Attendence Request: 0</h2><br></br><h2>No attendence was taken on this date</h2></div> : <div><h2>Total Attendence Request: {this.state.data[\"total_attendance_requests\"]}</h2></div>\n                        }\n                    </div>\n                    \n                        {this.state.nodata?<div></div>:<div>\n                    {Object.keys(this.state.data).map((val,i,arr) => {\n                        if(arr.length-1!=i)\n                        {\n                            return (\n                            \n                            <div className=\" container attendancecardly\">\n                                <h3>{val}: {this.state.data[val]} %</h3>\n\n                            </div>\n                        );\n                            }\n                    })}\n                    </div>\n                    }\n\n\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Quizshow;\n"]},"metadata":{},"sourceType":"module"}