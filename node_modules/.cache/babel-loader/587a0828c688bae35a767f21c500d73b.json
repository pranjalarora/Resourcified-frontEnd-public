{"ast":null,"code":"import _classCallCheck from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{Link,Redirect}from\"react-router-dom\";import moment from'moment';import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';export var Courses=/*#__PURE__*/function(_Component){_inherits(Courses,_Component);var _super=_createSuper(Courses);function Courses(){var _this;_classCallCheck(this,Courses);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={courses:[],modalShow:false,showId:0};_this.handleClose=function(){_this.setState({modalShow:false});};_this.handleShow=function(e,id){_this.setState({modalShow:true});_this.setState({showId:id});};_this.courseHandler=function(e,id,name){console.log(id);console.log(name);localStorage.setItem(\"course\",id);var url=\"/posts/\"+localStorage.getItem('course');_this.props.history.push(url);};_this.subscribeHandler=function(e,id,subs){if(!subs){// alert(\"Are you sure you want to Subscribe?\");\nvar url=\"http://localhost:8000/api/email-notification-subscription\";var headers={\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"token\"))};var user=localStorage.getItem('userid');var course=id;var bodyFormData=new FormData();bodyFormData.set(\"course\",course);bodyFormData.set(\"user\",user);axios.post(url,bodyFormData,{headers:headers}).then(function(result){// this.setState({ profile: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});}else{// alert(\"Are you sure you want to Unsubscribe?\");\nvar _url=\"http://localhost:8000/api/email-notification-subscription/\"+subs;var _headers={\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"token\"))};axios.delete(_url,{headers:_headers}).then(function(result){// this.setState({ profile: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});}_this.handleClose();window.setTimeout(function(){window.location.reload();},200);};return _this;}_createClass(Courses,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!localStorage.getItem(\"isLoggedIn\")){{this.props.history.push(\"/\");}}var headers={\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"JWT \".concat(localStorage.getItem(\"token\"))};var url=\"http://localhost:8000/api/courses?branch=\"+this.props.match.params.id+\"&institute=\"+localStorage.getItem('institute');axios.get(url,{headers:headers}).then(function(result){_this2.setState({courses:result.data});console.log(result.data);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this3=this;//console.log(this.props);\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},this.state.courses.length==0?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"No Courses added\")):this.state.courses.map(function(val){return/*#__PURE__*/React.createElement(\"div\",{className:\" container \"},/*#__PURE__*/React.createElement(\"div\",{className:\"btn-group \"},/*#__PURE__*/React.createElement(\"button\",{style:{width:\"90%\",textAlign:\"center\"},className:\"btn btn-outline-success btn-block crs\",onClick:function onClick(e){return _this3.courseHandler(e,val.id,val.name);}},/*#__PURE__*/React.createElement(\"h3\",null,val.name)),/*#__PURE__*/React.createElement(\"button\",{style:{width:\"40px\",height:\"40px\"},className:val.email_notification_subscription?\"btn btn-success btn-block \":\"btn btn-secondary btn-block\",variant:\"primary\",onClick:function onClick(e){return _this3.handleShow(e,val.id);}},/*#__PURE__*/React.createElement(\"h5\",{style:{alignItems:\"center\"}},val.email_notification_subscription?/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-bell-slash\"}):/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-bell\"}))),_this3.state.showId==val.id?/*#__PURE__*/React.createElement(Modal,{show:_this3.state.modalShow,onHide:_this3.handleClose},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,val.email_notification_subscription?/*#__PURE__*/React.createElement(\"h4\",null,\"Unsubscribe\"):/*#__PURE__*/React.createElement(\"h4\",null,\"Subscribe\"))),/*#__PURE__*/React.createElement(Modal.Body,null,val.email_notification_subscription?/*#__PURE__*/React.createElement(\"p\",null,\"Are you sure you want to unsubscribe \",val.name,\"?\"):/*#__PURE__*/React.createElement(\"p\",null,\"Are you sure you want to Subscribe \",val.name,\"?\")),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:_this3.handleClose},\"Close\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(e){return _this3.subscribeHandler(e,val.id,val.email_notification_subscription);}},\"Yes\"))):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"br\",null));})));}}]);return Courses;}(Component);export default Courses;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/courses.js"],"names":["React","Component","axios","Link","Redirect","moment","Modal","Button","Courses","state","courses","modalShow","showId","handleClose","setState","handleShow","e","id","courseHandler","name","console","log","localStorage","setItem","url","getItem","props","history","push","subscribeHandler","subs","headers","Accept","Authorization","user","course","bodyFormData","FormData","set","post","then","result","data","catch","error","delete","window","setTimeout","location","reload","match","params","get","length","map","val","width","textAlign","height","email_notification_subscription","alignItems"],"mappings":"opBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAQC,CAAAA,KAAR,KAAmB,uBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CAEA,UAAaC,CAAAA,OAAb,+TACEC,KADF,CACU,CAGNC,OAAO,CAAE,EAHH,CAINC,SAAS,CAAC,KAJJ,CAKNC,MAAM,CAAC,CALD,CADV,OASIC,WATJ,CASgB,UAAI,CACZ,MAAKC,QAAL,CAAc,CAACH,SAAS,CAAC,KAAX,CAAd,EACH,CAXL,OAaII,UAbJ,CAae,SAACC,CAAD,CAAGC,EAAH,CAAQ,CACf,MAAKH,QAAL,CAAc,CAACH,SAAS,CAAC,IAAX,CAAd,EACA,MAAKG,QAAL,CAAc,CAACF,MAAM,CAACK,EAAR,CAAd,EACH,CAhBL,OAmBEC,aAnBF,CAmBkB,SAACF,CAAD,CAAIC,EAAJ,CAAOE,IAAP,CAAgB,CAElCC,OAAO,CAACC,GAAR,CAAYJ,EAAZ,EACAG,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAG,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA8BN,EAA9B,EACI,GAAMO,CAAAA,GAAG,CAAG,UAAYF,YAAY,CAACG,OAAb,CAAqB,QAArB,CAAxB,CACA,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwBJ,GAAxB,EAGD,CA5BH,OA8BEK,gBA9BF,CA8BmB,SAACb,CAAD,CAAGC,EAAH,CAAMa,IAAN,CAAa,CAG5B,GAAG,CAACA,IAAJ,CAAS,CACP;AACA,GAAMN,CAAAA,GAAG,CAAC,2DAAV,CACA,GAAMO,CAAAA,OAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASX,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAMA,GAAMS,CAAAA,IAAI,CAAGZ,YAAY,CAACG,OAAb,CAAqB,QAArB,CAAb,CAGF,GAAMU,CAAAA,MAAM,CAAClB,EAAb,CAEA,GAAImB,CAAAA,YAAY,CAAG,GAAIC,CAAAA,QAAJ,EAAnB,CACAD,YAAY,CAACE,GAAb,CAAiB,QAAjB,CAA0BH,MAA1B,EACAC,YAAY,CAACE,GAAb,CAAiB,MAAjB,CAAyBJ,IAAzB,EAEAhC,KAAK,CACJqC,IADD,CACMf,GADN,CACWY,YADX,CACyB,CAAEL,OAAO,CAAPA,OAAF,CADzB,EAECS,IAFD,CAEM,SAACC,MAAD,CAAY,CAGd;AAGArB,OAAO,CAACC,GAAR,CAAYoB,MAAM,CAACC,IAAnB,EACH,CATD,EAUCC,KAVD,CAUO,SAACC,KAAD,CAAW,CACdxB,OAAO,CAACC,GAAR,CAAYuB,KAAZ,EAEH,CAbD,EAeC,CAjCD,IAmCI,CACF;AACA,GAAMpB,CAAAA,IAAG,CAAC,6DAA6DM,IAAvE,CACA,GAAMC,CAAAA,QAAO,CAAG,CACd,eAAgB,kBADF,CAEdC,MAAM,CAAE,kBAFM,CAGdC,aAAa,eAASX,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAT,CAHC,CAAhB,CAOFvB,KAAK,CACJ2C,MADD,CACQrB,IADR,CACc,CAAEO,OAAO,CAAPA,QAAF,CADd,EAECS,IAFD,CAEM,SAACC,MAAD,CAAY,CAGd;AAGArB,OAAO,CAACC,GAAR,CAAYoB,MAAM,CAACC,IAAnB,EACH,CATD,EAUCC,KAVD,CAUO,SAACC,KAAD,CAAW,CACdxB,OAAO,CAACC,GAAR,CAAYuB,KAAZ,EAEH,CAbD,EAeC,CACD,MAAK/B,WAAL,GAEAiC,MAAM,CAACC,UAAP,CAAkB,UAAU,CAACD,MAAM,CAACE,QAAP,CAAgBC,MAAhB,GAAyB,CAAtD,CAAuD,GAAvD,EACD,CAjGH,gGAkGsB,iBAClB,GAAG,CAAC3B,YAAY,CAACG,OAAb,CAAqB,YAArB,CAAJ,CAAuC,CACrC,CACE,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,CACJ,CACC,GAAMG,CAAAA,OAAO,CAAG,CACZ,eAAgB,kBADJ,CAEZC,MAAM,CAAE,kBAFI,CAGZC,aAAa,eAASX,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAT,CAHD,CAAhB,CAME,GAAMD,CAAAA,GAAG,CAAG,4CAA4C,KAAKE,KAAL,CAAWwB,KAAX,CAAiBC,MAAjB,CAAwBlC,EAApE,CAAuE,aAAvE,CAAsFK,YAAY,CAACG,OAAb,CAAqB,WAArB,CAAlG,CACAvB,KAAK,CACFkD,GADH,CACO5B,GADP,CACY,CAAEO,OAAO,CAAPA,OAAF,CADZ,EAEGS,IAFH,CAEQ,SAACC,MAAD,CAAY,CAGhB,MAAI,CAAC3B,QAAL,CAAc,CAAEJ,OAAO,CAAE+B,MAAM,CAACC,IAAlB,CAAd,EAGAtB,OAAO,CAACC,GAAR,CAAYoB,MAAM,CAACC,IAAnB,EACD,CATH,EAUGC,KAVH,CAUS,SAACC,KAAD,CAAW,CAChBxB,OAAO,CAACC,GAAR,CAAYuB,KAAZ,EAED,CAbH,EAcH,CA7HH,uCAkIW,iBACP;AACA,mBACE,4CAEE,2BAAK,SAAS,CAAC,WAAf,EACG,KAAKnC,KAAL,CAAWC,OAAX,CAAmB2C,MAAnB,EAA6B,CAA7B,cAAiC,4CAAK,iDAAL,CAAjC,CACD,KAAK5C,KAAL,CAAWC,OAAX,CAAmB4C,GAAnB,CAAuB,SAACC,GAAD,CAAS,CAC9B,mBACE,2BAAK,SAAS,CAAC,aAAf,eACE,2BAAK,SAAS,CAAC,YAAf,eAEE,8BAAQ,KAAK,CAAE,CAACC,KAAK,CAAE,KAAR,CAAeC,SAAS,CAAC,QAAzB,CAAf,CAAoD,SAAS,CAAC,uCAA9D,CAAsG,OAAO,CAAE,iBAACzC,CAAD,QAAO,CAAA,MAAI,CAACE,aAAL,CAAmBF,CAAnB,CAAsBuC,GAAG,CAACtC,EAA1B,CAA6BsC,GAAG,CAACpC,IAAjC,CAAP,EAA/G,eACE,8BAAKoC,GAAG,CAACpC,IAAT,CADF,CAFF,cAchB,8BAAQ,KAAK,CAAE,CAACqC,KAAK,CAAE,MAAR,CAAgBE,MAAM,CAAE,MAAxB,CAAf,CAAgD,SAAS,CAAEH,GAAG,CAACI,+BAAJ,CAAoC,4BAApC,CAAiE,6BAA5H,CAA2J,OAAO,CAAC,SAAnK,CAA6K,OAAO,CAAE,iBAAC3C,CAAD,QAAK,CAAA,MAAI,CAACD,UAAL,CAAgBC,CAAhB,CAAkBuC,GAAG,CAACtC,EAAtB,CAAL,EAAtL,eACkB,0BAAI,KAAK,CAAE,CAAC2C,UAAU,CAAC,QAAZ,CAAX,EAAmCL,GAAG,CAACI,+BAAJ,cAAoC,yBAAI,KAAK,CAAC,mBAAV,EAApC,cAAuE,yBAAI,KAAK,CAAC,aAAV,EAA1G,CADlB,CAdgB,CAkBf,MAAI,CAAClD,KAAL,CAAWG,MAAX,EAAmB2C,GAAG,CAACtC,EAAvB,cACK,oBAAC,KAAD,EAAO,IAAI,CAAE,MAAI,CAACR,KAAL,CAAWE,SAAxB,CAAmC,MAAM,CAAE,MAAI,CAACE,WAAhD,eACE,oBAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,eACE,oBAAC,KAAD,CAAO,KAAP,MAAc0C,GAAG,CAACI,+BAAJ,cAAoC,4CAApC,cAA0D,0CAAxE,CADF,CADF,cAIE,oBAAC,KAAD,CAAO,IAAP,MACEJ,GAAG,CAACI,+BAAJ,cACA,qEACwCJ,GAAG,CAACpC,IAD5C,KADA,cAGK,mEAAuCoC,GAAG,CAACpC,IAA3C,KAJP,CAJF,cAWE,oBAAC,KAAD,CAAO,MAAP,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,OAAO,CAAE,MAAI,CAACN,WAA1C,UADF,cAIE,oBAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,OAAO,CAAE,iBAACG,CAAD,QAAO,CAAA,MAAI,CAACa,gBAAL,CAAsBb,CAAtB,CAAyBuC,GAAG,CAACtC,EAA7B,CAAgCsC,GAAG,CAACI,+BAApC,CAAP,EAAnC,QAJF,CAXF,CADL,cAoBc,+BAtCC,CADF,cA0CE,8BA1CF,CADF,CA+CD,CAhDD,CAFF,CAFF,CADF,CA0DD,CA9LH,qBAA6B1D,SAA7B,EAiMA,cAAeO,CAAAA,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport moment from 'moment';\nimport  Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\n\nexport class Courses extends Component {\n  state = {\n    \n    \n    courses: [],\n    modalShow:false,\n    showId:0\n    };\n\n    handleClose=()=>{\n        this.setState({modalShow:false});\n    }\n\n    handleShow=(e,id)=>{\n        this.setState({modalShow:true});\n        this.setState({showId:id});\n    }\n  \n\n  courseHandler = (e, id,name) => {\n    \nconsole.log(id);\nconsole.log(name);\nlocalStorage.setItem(\"course\",id);\n    const url = \"/posts/\" + localStorage.getItem('course');\n    this.props.history.push(url);\n\n\n  }\n\n  subscribeHandler=(e,id,subs)=>{\n\n    \n    if(!subs){\n      // alert(\"Are you sure you want to Subscribe?\");\n      const url=\"http://localhost:8000/api/email-notification-subscription\";\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `JWT ${localStorage.getItem(\"token\")}`\n  \n      };\n      const user = localStorage.getItem('userid');\n    \n    \n    const course=id;\n    \n    let bodyFormData = new FormData();\n    bodyFormData.set(\"course\",course);\n    bodyFormData.set(\"user\", user);\n\n    axios\n    .post(url, bodyFormData, { headers })\n    .then((result) => {\n\n\n        // this.setState({ profile: result.data });\n\n\n        console.log(result.data);\n    })\n    .catch((error) => {\n        console.log(error);\n\n    });\n\n    }\n\n    else{\n      // alert(\"Are you sure you want to Unsubscribe?\");\n      const url=\"http://localhost:8000/api/email-notification-subscription/\"+subs;\n      const headers = {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `JWT ${localStorage.getItem(\"token\")}`\n  \n      };\n      \n    axios\n    .delete(url,  { headers })\n    .then((result) => {\n\n\n        // this.setState({ profile: result.data });\n\n\n        console.log(result.data);\n    })\n    .catch((error) => {\n        console.log(error);\n\n    });\n\n    }\n    this.handleClose();\n\n    window.setTimeout(function(){window.location.reload()},200)\n  }\n  componentDidMount() {\n    if(!localStorage.getItem(\"isLoggedIn\")){\n      {\n        this.props.history.push(\"/\");  \n      }\n  }\n    const headers = {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `JWT ${localStorage.getItem(\"token\")}`\n  \n      };\n      const url = \"http://localhost:8000/api/courses?branch=\"+this.props.match.params.id+\"&institute=\"+ localStorage.getItem('institute');\n      axios\n        .get(url, { headers })\n        .then((result) => {\n  \n          \n          this.setState({ courses: result.data });\n          \n  \n          console.log(result.data);\n        })\n        .catch((error) => {\n          console.log(error);\n          \n        });\n  }\n  \n\n\n\n  render() {\n    //console.log(this.props);\n    return (\n      <div>\n\n        <div className=\"container\">\n          {this.state.courses.length == 0 ? <div><h1>No Courses added</h1></div> :\n          this.state.courses.map((val) => {\n            return (\n              <div className=\" container \">\n                <div className=\"btn-group \">\n                  \n                  <button style={{width: \"90%\", textAlign:\"center\"}}  className=\"btn btn-outline-success btn-block crs\" onClick={(e) => this.courseHandler(e, val.id,val.name)}>\n                    <h3>{val.name}</h3>\n                    \n                    \n                  </button>\n                  {/* <button  style={{width: \"40px\", height: \"40px\"}} className={val.email_notification_subscription?\"btn btn-success btn-block \":\"btn btn-secondary btn-block\"} onClick={(e) => this.subscribeHandler(e, val.id,val.email_notification_subscription)}>\n                    <h5 style={{alignItems:\"center\"}}>{val.email_notification_subscription?<i  class=\"fas fa-bell-slash\"></i>:<i  class=\"fas fa-bell\"></i>}</h5>\n                    \n                    \n                    \n                  </button> */}\n\n<button style={{width: \"40px\", height: \"40px\"}} className={val.email_notification_subscription?\"btn btn-success btn-block \":\"btn btn-secondary btn-block\"} variant=\"primary\" onClick={(e)=>this.handleShow(e,val.id)}>\n                  <h5 style={{alignItems:\"center\"}}>{val.email_notification_subscription?<i  class=\"fas fa-bell-slash\"></i>:<i  class=\"fas fa-bell\"></i>}</h5>\n      </button>\n\n{this.state.showId==val.id?\n      <Modal show={this.state.modalShow} onHide={this.handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title>{val.email_notification_subscription?<h4>Unsubscribe</h4>: <h4>Subscribe</h4>}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n         {val.email_notification_subscription?\n          <p>\n            Are you sure you want to unsubscribe {val.name}?\n          </p>:<p>Are you sure you want to Subscribe {val.name}?</p>\n          }\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.handleClose}>\n            Close\n          </Button>\n          <Button variant=\"primary\" onClick={(e) => this.subscribeHandler(e, val.id,val.email_notification_subscription)}>\n            Yes\n          </Button>\n        </Modal.Footer>\n      </Modal>:<div></div>}\n                  \n                </div>\n                <br></br>\n              </div>\n\n            );\n          })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Courses;\n"]},"metadata":{},"sourceType":"module"}