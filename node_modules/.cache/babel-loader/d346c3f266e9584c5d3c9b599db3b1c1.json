{"ast":null,"code":"import _classCallCheck from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/parth/Documents/Github/resourcified-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link,Redirect}from'react-router-dom';import moment from'moment';import Avatar from'react-avatar';import configData from\"./config.json\";export var userProfile=/*#__PURE__*/function(_Component){_inherits(userProfile,_Component);var _super=_createSuper(userProfile);function userProfile(){var _this;_classCallCheck(this,userProfile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={profile:[],isEditing:false,full_name:'',phone:'',gender:'',degree:'',branch:'',institute:'',subscription:'/mysubscription',myprofile:'/userProfile',myposts:'/myposts',likedposts:'/likedposts',disabled:false};_this.handleDegree=function(event){_this.setState({degree:event.target.value});};_this.handleFullname=function(event){_this.setState({full_name:event.target.value});};_this.handlePhone=function(event){_this.setState({phone:event.target.value});};_this.handleGender=function(event){_this.setState({gender:event.target.value});};_this.editHandler=function(event){_this.setState({isEditing:true});};_this.handleSubmit=function(event){event.preventDefault();_this.setState({disabled:true});console.log(_this.state.phone);console.log(_this.state.full_name);console.log(_this.state.gender);console.log(_this.state.degree);var degree=_this.state.degree;var gender=_this.state.gender;var full_name=_this.state.full_name;var phone=_this.state.phone;var bodyFormData=new FormData();bodyFormData.set('gender',gender);bodyFormData.set('degree',degree);bodyFormData.set('full_name',full_name);bodyFormData.set('phone',phone);var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var url=\"\".concat(configData.SERVER_URL,\"api/current-user-profile\");axios.put(url,bodyFormData,{headers:headers}).then(function(result){// this.setState({ profile: result.data });\nconsole.log(result.data);}).catch(function(error){console.log(error);});// this.setState({isEditing:false});\nwindow.setTimeout(function(){window.location.reload();},700);};return _this;}_createClass(userProfile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!localStorage.getItem('isLoggedIn')){{this.props.history.push('/');}}var headers={'Content-Type':'application/json',Accept:'application/json',Authorization:\"JWT \".concat(localStorage.getItem('token'))};var url=\"\".concat(configData.SERVER_URL,\"api/current-user-profile\");axios.get(url,{headers:headers}).then(function(result){_this2.setState({profile:result.data});_this2.setState({full_name:result.data.full_name});_this2.setState({phone:result.data.phone});_this2.setState({degree:result.data.degree});_this2.setState({gender:result.data.gender});_this2.setState({branch:result.data.branch.name});_this2.setState({institute:result.data.institute.name});localStorage.setItem('full_name',_this2.state.full_name);console.log(result.data);console.log(result.data.branch.name);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.myprofile},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px',color:'black'},className:\"btn hover activeness\"},\"My Profile\")),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.myposts},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn hover\"},\"My Posts\")),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.likedposts},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn  hover\"},\"Liked Posts\"),' '),/*#__PURE__*/React.createElement(\"a\",{type:\"button\",href:this.state.subscription},/*#__PURE__*/React.createElement(\"button\",{style:{marginRight:'4px'},className:\"btn  hover\"},\"My Subscription\"),' ')),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"br\",null),!this.state.isEditing?/*#__PURE__*/React.createElement(\"div\",{className:\" container \"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn hover \",onClick:this.editHandler},/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-edit fa-3x\"})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_placement\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"avatar\"},/*#__PURE__*/React.createElement(Avatar,{round:true,name:this.state.profile.full_name,width:100,height:100,className:\"avatar1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"h5\",null,\"Name:- \",this.state.profile.full_name),/*#__PURE__*/React.createElement(\"h5\",null,\"Email:- \",this.state.profile.email),/*#__PURE__*/React.createElement(\"h5\",null,\"Gender:- \",this.state.profile.gender,\" \"),/*#__PURE__*/React.createElement(\"h5\",null,\"Institute:- \",this.state.institute),/*#__PURE__*/React.createElement(\"h5\",null,\"Branch:- \",this.state.branch),/*#__PURE__*/React.createElement(\"h5\",null,\"Degree:- \",this.state.profile.degree,\" \"),/*#__PURE__*/React.createElement(\"h5\",null,\"Contact Number:- \",this.state.profile.phone,\" \")))),/*#__PURE__*/React.createElement(\"br\",null)):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"full_name\",style:{color:'blue'}},\"Full Name\"),/*#__PURE__*/React.createElement(\"input\",{className:'form-control ',id:\"full_name\",placeholder:\"Full Name\",type:\"text\",name:\"full_name\",onChange:this.handleFullname,autoFocus:true,required:true,value:this.state.full_name})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"phone\",style:{color:'blue'}},\"Contact Number\"),/*#__PURE__*/React.createElement(\"input\",{className:'form-control ',id:\"phone\",placeholder:\"Phone\",type:\"text\",name:\"phone\",onChange:this.handlePhone,autoFocus:true,required:true,value:this.state.phone})),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"gender\",style:{color:'blue'}},\"Gender\"),/*#__PURE__*/React.createElement(\"select\",{reequired:true,class:\"custom-select\",id:\"gender\",name:\"gender\",onChange:this.handleGender,value:this.state.gender},/*#__PURE__*/React.createElement(\"option\",{selected:true},\"Choose...\"),/*#__PURE__*/React.createElement(\"option\",{value:'male'},\"Male\"),/*#__PURE__*/React.createElement(\"option\",{value:'female'},\"Female\"),/*#__PURE__*/React.createElement(\"option\",{value:'other'},\"Other\"))),/*#__PURE__*/React.createElement(\"div\",{class:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{for:\"degree\",style:{color:'blue'}},\"Degree\"),/*#__PURE__*/React.createElement(\"select\",{reequired:true,class:\"custom-select\",id:\"degree\",name:\"degree\",onChange:this.handleDegree,value:this.state.degree},/*#__PURE__*/React.createElement(\"option\",{selected:true,value:0},\"Choose...\"),/*#__PURE__*/React.createElement(\"option\",{value:'btech'},\"BTech\"),/*#__PURE__*/React.createElement(\"option\",{value:'mtech'},\"MTech\"),/*#__PURE__*/React.createElement(\"option\",{value:'phd'},\"Phd\"),/*#__PURE__*/React.createElement(\"option\",{value:'msc'},\"Msc\"),/*#__PURE__*/React.createElement(\"option\",{value:'mba'},\"MBA\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\",style:{color:'blue'}},/*#__PURE__*/React.createElement(\"button\",{className:this.state.disabled?'btn btn-secondary  btn-block disabled':'btn btn-primary btn-block active',type:\"submit\"},\"Change Details \\xA0\\xA0\\xA0\"))))));}}]);return userProfile;}(Component);export default userProfile;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/userProfile.js"],"names":["React","Component","axios","Link","Redirect","moment","Avatar","configData","userProfile","state","profile","isEditing","full_name","phone","gender","degree","branch","institute","subscription","myprofile","myposts","likedposts","disabled","handleDegree","event","setState","target","value","handleFullname","handlePhone","handleGender","editHandler","handleSubmit","preventDefault","console","log","bodyFormData","FormData","set","headers","Accept","Authorization","localStorage","getItem","url","SERVER_URL","put","then","result","data","catch","error","window","setTimeout","location","reload","props","history","push","get","name","setItem","marginRight","color","email"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link, Redirect } from 'react-router-dom'\nimport moment from 'moment'\nimport Avatar from 'react-avatar'\nimport configData from \"./config.json\";\n\nexport class userProfile extends Component {\n  state = {\n    profile: [],\n    isEditing: false,\n    full_name: '',\n    phone: '',\n    gender: '',\n    degree: '',\n    branch: '',\n    institute: '',\n    subscription: '/mysubscription',\n    myprofile: '/userProfile',\n    myposts: '/myposts',\n    likedposts: '/likedposts',\n    disabled: false\n  }\n\n  handleDegree = event => {\n    this.setState({ degree: event.target.value })\n  }\n  handleFullname = event => {\n    this.setState({ full_name: event.target.value })\n  }\n  handlePhone = event => {\n    this.setState({ phone: event.target.value })\n  }\n  handleGender = event => {\n    this.setState({ gender: event.target.value })\n  }\n  editHandler = event => {\n    this.setState({ isEditing: true })\n  }\n  componentDidMount () {\n    if (!localStorage.getItem('isLoggedIn')) {\n      {\n        this.props.history.push('/')\n      }\n    }\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n\n    const url = `${configData.SERVER_URL}api/current-user-profile`\n    axios\n      .get(url, { headers })\n      .then(result => {\n        this.setState({ profile: result.data })\n        this.setState({ full_name: result.data.full_name })\n        this.setState({ phone: result.data.phone })\n        this.setState({ degree: result.data.degree })\n        this.setState({ gender: result.data.gender })\n        this.setState({ branch: result.data.branch.name })\n        this.setState({ institute: result.data.institute.name })\n        localStorage.setItem('full_name', this.state.full_name)\n        console.log(result.data)\n        console.log(result.data.branch.name)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n    this.setState({ disabled: true })\n    console.log(this.state.phone)\n    console.log(this.state.full_name)\n    console.log(this.state.gender)\n    console.log(this.state.degree)\n\n    const degree = this.state.degree\n    const gender = this.state.gender\n    const full_name = this.state.full_name\n    const phone = this.state.phone\n\n    let bodyFormData = new FormData()\n    bodyFormData.set('gender', gender)\n    bodyFormData.set('degree', degree)\n    bodyFormData.set('full_name', full_name)\n    bodyFormData.set('phone', phone)\n\n    const headers = {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      Authorization: `JWT ${localStorage.getItem('token')}`\n    }\n    const url = `${configData.SERVER_URL}api/current-user-profile`\n    axios\n      .put(url, bodyFormData, { headers })\n      .then(result => {\n        // this.setState({ profile: result.data });\n\n        console.log(result.data)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n    // this.setState({isEditing:false});\n    window.setTimeout(function () {\n      window.location.reload()\n    }, 700)\n  }\n  render () {\n    return (\n      <div>\n        <div>\n          <a type='button' href={this.state.myprofile}>\n            <button\n              style={{\n                marginRight: '4px',\n                color: 'black',\n              \n              }}\n              className='btn hover activeness'\n            >\n              My Profile\n            </button>\n          </a>\n          <a type='button' href={this.state.myposts}>\n            <button\n              style={{ marginRight: '4px' }}\n              className='btn hover'\n            >\n              My Posts\n            </button>\n          </a>\n          <a type='button' href={this.state.likedposts}>\n            <button\n              style={{ marginRight: '4px' }}\n              className='btn  hover'\n            >\n              Liked Posts\n            </button>{' '}\n          </a>\n          <a type='button' href={this.state.subscription}>\n            <button\n              style={{ marginRight: '4px' }}\n              className='btn  hover'\n            >\n              My Subscription\n            </button>{' '}\n          </a>\n        </div>\n        <div className='container'>\n          <br></br>\n\n          {!this.state.isEditing ? (\n            <div className=' container '>\n              <button\n                className='btn hover '\n                onClick={this.editHandler}\n              >\n                <i class=\"fas fa-edit fa-3x\" ></i>\n              </button>\n              <br></br>\n              <br></br>\n              <div className='profile_placement'>\n                <div >\n                  <div className='avatar'>\n                  <Avatar round name={this.state.profile.full_name} width={100} height={100} className='avatar1' />\n                </div>\n                 \n                </div>\n                <div className='profile'>\n                  <ul>\n                    <h5>Name:- {this.state.profile.full_name}</h5>\n                    <h5>Email:- {this.state.profile.email}</h5>\n                    <h5>Gender:- {this.state.profile.gender} </h5>\n                    <h5>Institute:- {this.state.institute}</h5>\n                    <h5>Branch:- {this.state.branch}</h5>\n                    <h5>Degree:- {this.state.profile.degree} </h5>\n                    <h5>Contact Number:- {this.state.profile.phone} </h5>\n                  </ul>\n                </div>\n              </div>\n              <br></br>\n            </div>\n          ) : (\n            <div>\n              <form onSubmit={this.handleSubmit}>\n                <div className='form-group'>\n                  <div className='form-group'>\n                    <label htmlFor='full_name' style={{ color: 'blue' }}>\n                      Full Name\n                    </label>\n                    <input\n                      className={'form-control '}\n                      id='full_name'\n                      placeholder='Full Name'\n                      type='text'\n                      name='full_name'\n                      onChange={this.handleFullname}\n                      autoFocus\n                      required\n                      value={this.state.full_name}\n                    />\n                  </div>\n\n                  <div className='form-group'>\n                    <label for='phone' style={{ color: 'blue' }}>\n                      Contact Number\n                    </label>\n                    <input\n                      className={'form-control '}\n                      id='phone'\n                      placeholder='Phone'\n                      type='text'\n                      name='phone'\n                      onChange={this.handlePhone}\n                      autoFocus\n                      required\n                      value={this.state.phone}\n                    />\n                  </div>\n                  <div class='form-group'>\n                    <label for='gender' style={{ color: 'blue' }}>\n                      Gender\n                    </label>\n                    <select\n                      reequired\n                      class='custom-select'\n                      id='gender'\n                      name='gender'\n                      onChange={this.handleGender}\n                      value={this.state.gender}\n                    >\n                      <option selected>Choose...</option>\n                      <option value={'male'}>Male</option>\n                      <option value={'female'}>Female</option>\n                      <option value={'other'}>Other</option>\n                    </select>\n                  </div>\n\n                  <div class='form-group'>\n                    <label for='degree' style={{ color: 'blue' }}>\n                      Degree\n                    </label>\n                    <select\n                      reequired\n                      class='custom-select'\n                      id='degree'\n                      name='degree'\n                      onChange={this.handleDegree}\n                      value={this.state.degree}\n                    >\n                      <option selected value={0}>\n                        Choose...\n                      </option>\n                      <option value={'btech'}>BTech</option>\n                      <option value={'mtech'}>MTech</option>\n                      <option value={'phd'}>Phd</option>\n                      <option value={'msc'}>Msc</option>\n                      <option value={'mba'}>MBA</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div className='form-group' style={{ color: 'blue' }}>\n                  <button\n                    className={\n                      this.state.disabled\n                        ? 'btn btn-secondary  btn-block disabled'\n                        : 'btn btn-primary btn-block active'\n                    }\n                    type='submit'\n                  >\n                    Change Details &nbsp;&nbsp;&nbsp;\n                  </button>\n                </div>\n              </form>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default userProfile\n"]},"metadata":{},"sourceType":"module"}