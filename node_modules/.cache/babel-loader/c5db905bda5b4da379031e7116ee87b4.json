{"ast":null,"code":"var _jsxFileName = \"/home/parth/Documents/Github/resourcified-frontend/src/pages/subscription.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport moment from 'moment';\nimport { PopupboxManager, PopupboxContainer } from 'react-popupbox';\nexport class Subscription extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      courses: [],\n      subscription: \"/mysubscription\",\n      myprofile: \"/userProfile\",\n      myposts: \"/myposts\",\n      likedposts: \"/likedposts\"\n    };\n\n    this.courseHandler = (e, id, name) => {\n      console.log(id);\n      console.log(name);\n      localStorage.setItem(\"course\", id);\n      const url = \"/posts/\" + localStorage.getItem('course');\n      this.props.history.push(url);\n    };\n\n    this.popupHandler = (e, id, subs) => {\n      const content = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 19\n        }\n      }, \"Open popupbox\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.subscribeHandler(e, id, subs),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 19\n        }\n      }, \"Update!\"));\n      PopupboxManager.open({\n        content,\n        config: {\n          titleBar: {\n            enable: true,\n            text: 'Step 1'\n          },\n          fadeIn: true,\n          fadeInSpeed: 500\n        }\n      });\n    };\n\n    this.subscribeHandler = (e, id, subs) => {\n      if (!subs) {\n        const url = \"http://localhost:8000/api/email-notification-subscription\";\n        const headers = {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: `JWT ${localStorage.getItem(\"token\")}`\n        };\n        const user = localStorage.getItem('userid');\n        const course = id;\n        let bodyFormData = new FormData();\n        bodyFormData.set(\"course\", course);\n        bodyFormData.set(\"user\", user);\n        axios.post(url, bodyFormData, {\n          headers\n        }).then(result => {\n          // this.setState({ profile: result.data });\n          console.log(result.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        const url = \"http://localhost:8000/api/email-notification-subscription/\" + subs;\n        const headers = {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: `JWT ${localStorage.getItem(\"token\")}`\n        };\n        axios.delete(url, {\n          headers\n        }).then(result => {\n          // this.setState({ profile: result.data });\n          console.log(result.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      window.location.reload(2000);\n    };\n  }\n\n  componentDidMount() {\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      Authorization: `JWT ${localStorage.getItem(\"token\")}`\n    };\n    const url = \"http://localhost:8000/api/courses?branch=&institute=\";\n    axios.get(url, {\n      headers\n    }).then(result => {\n      this.setState({\n        courses: result.data\n      });\n      console.log(result.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myprofile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 46\n      }\n    }, \"My Profile\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.myposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 44\n      }\n    }, \"My Posts\")), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.likedposts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px'\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 47\n      }\n    }, \"Liked Posts\"), \" \"), /*#__PURE__*/React.createElement(\"a\", {\n      type: \"button\",\n      href: this.state.subscription,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        marginRight: '4px',\n        color: 'white',\n        backgroundColor: \"green\"\n      },\n      className: \"btn btn-outline-success \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 49\n      }\n    }, \"My Subscription\"), \" \")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, this.state.courses.length == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 52\n      }\n    }, \"No Courses added\")) : this.state.courses.map(val => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \" container \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 15\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn-group \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          width: \"90%\",\n          textAlign: \"center\"\n        },\n        className: \"btn btn-outline-success btn-block\",\n        onClick: e => this.courseHandler(e, val.id, val.name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }\n      }, val.name), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }\n      }, val.branch)), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          width: \"40px\",\n          height: \"40px\"\n        },\n        className: val.email_notification_subscription ? \"btn btn-success btn-block \" : \"btn btn-secondary btn-block\",\n        onClick: e => this.popupHandler(e, val.id, val.email_notification_subscription),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        style: {\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }\n      }, val.email_notification_subscription ? /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fas fa-bell-slash\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 92\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fas fa-bell\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 127\n        }\n      })))) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 18\n        }\n      }));\n    }))));\n  }\n\n}\nexport default Subscription;","map":{"version":3,"sources":["/home/parth/Documents/Github/resourcified-frontend/src/pages/subscription.js"],"names":["React","Component","axios","Link","Redirect","moment","PopupboxManager","PopupboxContainer","Subscription","state","courses","subscription","myprofile","myposts","likedposts","courseHandler","e","id","name","console","log","localStorage","setItem","url","getItem","props","history","push","popupHandler","subs","content","subscribeHandler","open","config","titleBar","enable","text","fadeIn","fadeInSpeed","headers","Accept","Authorization","user","course","bodyFormData","FormData","set","post","then","result","data","catch","error","delete","window","location","reload","componentDidMount","get","setState","render","marginRight","color","backgroundColor","length","map","val","email_notification_subscription","width","textAlign","branch","height","alignItems"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,SACIC,eADJ,EAEIC,iBAFJ,QAGS,gBAHT;AAMA,OAAO,MAAMC,YAAN,SAA2BP,SAA3B,CAAqC;AAAA;AAAA;AAAA,SAExCQ,KAFwC,GAEhC;AACLC,MAAAA,OAAO,EAAC,EADH;AAEJC,MAAAA,YAAY,EAAC,iBAFT;AAGJC,MAAAA,SAAS,EAAE,cAHP;AAIJC,MAAAA,OAAO,EAAC,UAJJ;AAKJC,MAAAA,UAAU,EAAE;AALR,KAFgC;;AAAA,SAkCtCC,aAlCsC,GAkCtB,CAACC,CAAD,EAAIC,EAAJ,EAAOC,IAAP,KAAgB;AAE9BC,MAAAA,OAAO,CAACC,GAAR,CAAYH,EAAZ;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA8BL,EAA9B;AACI,YAAMM,GAAG,GAAG,YAAYF,YAAY,CAACG,OAAb,CAAqB,QAArB,CAAxB;AACA,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwBJ,GAAxB;AAGD,KA3CiC;;AAAA,SA8ClCK,YA9CkC,GA8CrB,CAACZ,CAAD,EAAGC,EAAH,EAAMY,IAAN,KAAa;AACxB,YAAMC,OAAO,gBACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAQ,QAAA,OAAO,EAAE,KAAKC,gBAAL,CAAsBf,CAAtB,EAAwBC,EAAxB,EAA2BY,IAA3B,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,CADJ;AAOEvB,MAAAA,eAAe,CAAC0B,IAAhB,CAAqB;AACnBF,QAAAA,OADmB;AAEnBG,QAAAA,MAAM,EAAE;AACNC,UAAAA,QAAQ,EAAE;AACRC,YAAAA,MAAM,EAAE,IADA;AAERC,YAAAA,IAAI,EAAE;AAFE,WADJ;AAKNC,UAAAA,MAAM,EAAE,IALF;AAMNC,UAAAA,WAAW,EAAE;AANP;AAFW,OAArB;AAWH,KAjEiC;;AAAA,SAkElCP,gBAlEkC,GAkEjB,CAACf,CAAD,EAAGC,EAAH,EAAMY,IAAN,KAAa;AAG5B,UAAG,CAACA,IAAJ,EAAS;AAEP,cAAMN,GAAG,GAAC,2DAAV;AACA,cAAMgB,OAAO,GAAG;AACd,0BAAgB,kBADF;AAEdC,UAAAA,MAAM,EAAE,kBAFM;AAGdC,UAAAA,aAAa,EAAG,OAAMpB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAA8B;AAHtC,SAAhB;AAMA,cAAMkB,IAAI,GAAGrB,YAAY,CAACG,OAAb,CAAqB,QAArB,CAAb;AAGF,cAAMmB,MAAM,GAAC1B,EAAb;AAEA,YAAI2B,YAAY,GAAG,IAAIC,QAAJ,EAAnB;AACAD,QAAAA,YAAY,CAACE,GAAb,CAAiB,QAAjB,EAA0BH,MAA1B;AACAC,QAAAA,YAAY,CAACE,GAAb,CAAiB,MAAjB,EAAyBJ,IAAzB;AAEAxC,QAAAA,KAAK,CACJ6C,IADD,CACMxB,GADN,EACWqB,YADX,EACyB;AAAEL,UAAAA;AAAF,SADzB,EAECS,IAFD,CAEOC,MAAD,IAAY;AAGd;AAGA9B,UAAAA,OAAO,CAACC,GAAR,CAAY6B,MAAM,CAACC,IAAnB;AACH,SATD,EAUCC,KAVD,CAUQC,KAAD,IAAW;AACdjC,UAAAA,OAAO,CAACC,GAAR,CAAYgC,KAAZ;AAEH,SAbD;AAeC,OAjCD,MAmCI;AAEF,cAAM7B,GAAG,GAAC,+DAA6DM,IAAvE;AACA,cAAMU,OAAO,GAAG;AACd,0BAAgB,kBADF;AAEdC,UAAAA,MAAM,EAAE,kBAFM;AAGdC,UAAAA,aAAa,EAAG,OAAMpB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAA8B;AAHtC,SAAhB;AAOFtB,QAAAA,KAAK,CACJmD,MADD,CACQ9B,GADR,EACc;AAAEgB,UAAAA;AAAF,SADd,EAECS,IAFD,CAEOC,MAAD,IAAY;AAGd;AAGA9B,UAAAA,OAAO,CAACC,GAAR,CAAY6B,MAAM,CAACC,IAAnB;AACH,SATD,EAUCC,KAVD,CAUQC,KAAD,IAAW;AACdjC,UAAAA,OAAO,CAACC,GAAR,CAAYgC,KAAZ;AAEH,SAbD;AAeC;;AAEDE,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;AACD,KApIiC;AAAA;;AAUxCC,EAAAA,iBAAiB,GAAG;AAChB,UAAMlB,OAAO,GAAG;AACZ,sBAAgB,kBADJ;AAEZC,MAAAA,MAAM,EAAE,kBAFI;AAGZC,MAAAA,aAAa,EAAG,OAAMpB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAA8B;AAHxC,KAAhB;AAME,UAAMD,GAAG,GAAG,sDAAZ;AACArB,IAAAA,KAAK,CACFwD,GADH,CACOnC,GADP,EACY;AAAEgB,MAAAA;AAAF,KADZ,EAEGS,IAFH,CAESC,MAAD,IAAY;AAGhB,WAAKU,QAAL,CAAc;AAAEjD,QAAAA,OAAO,EAAEuC,MAAM,CAACC;AAAlB,OAAd;AAGA/B,MAAAA,OAAO,CAACC,GAAR,CAAY6B,MAAM,CAACC,IAAnB;AACD,KATH,EAUGC,KAVH,CAUUC,KAAD,IAAW;AAChBjC,MAAAA,OAAO,CAACC,GAAR,CAAYgC,KAAZ;AAED,KAbH;AAcH;;AAqGHQ,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEhB;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAKnD,KAAL,CAAWG,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA6C;AAAQ,MAAA,KAAK,EAAE;AAAEiD,QAAAA,WAAW,EAAE;AAAf,OAAf;AAAsC,MAAA,SAAS,EAAC,0BAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA7C,CAFgB,eAGhB;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAKpD,KAAL,CAAWI,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA2C;AAAQ,MAAA,KAAK,EAAE;AAAEgD,QAAAA,WAAW,EAAE;AAAf,OAAf;AAAuC,MAAA,SAAS,EAAC,0BAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA3C,CAHgB,eAIhB;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAKpD,KAAL,CAAWK,UAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA8C;AAAQ,MAAA,KAAK,EAAE;AAAE+C,QAAAA,WAAW,EAAE;AAAf,OAAf;AAAuC,MAAA,SAAS,EAAC,0BAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA9C,MAJgB,eAKhB;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,IAAI,EAAE,KAAKpD,KAAL,CAAWE,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAgD;AAAQ,MAAA,KAAK,EAAE;AAAEkD,QAAAA,WAAW,EAAE,KAAf;AAAqBC,QAAAA,KAAK,EAAE,OAA5B;AAAqCC,QAAAA,eAAe,EAAE;AAAtD,OAAf;AAAiF,MAAA,SAAS,EAAC,0BAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAhD,MALgB,CADA,eAQJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARI,eAUJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAKtD,KAAL,CAAWC,OAAX,CAAmBsD,MAAnB,IAA6B,CAA7B,gBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAL,CAAjC,GACH,KAAKvD,KAAL,CAAWC,OAAX,CAAmBuD,GAAnB,CAAwBC,GAAD,IAAS;AAC9B,0BACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKA,GAAG,CAACC,+BAAJ,gBACH;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAQ,QAAA,KAAK,EAAE;AAACC,UAAAA,KAAK,EAAE,KAAR;AAAeC,UAAAA,SAAS,EAAC;AAAzB,SAAf;AAAoD,QAAA,SAAS,EAAC,mCAA9D;AAAkG,QAAA,OAAO,EAAGrD,CAAD,IAAO,KAAKD,aAAL,CAAmBC,CAAnB,EAAsBkD,GAAG,CAACjD,EAA1B,EAA6BiD,GAAG,CAAChD,IAAjC,CAAlH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKgD,GAAG,CAAChD,IAAT,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKgD,GAAG,CAACI,MAAT,CAFF,CAFF,eAQE;AAAS,QAAA,KAAK,EAAE;AAACF,UAAAA,KAAK,EAAE,MAAR;AAAgBG,UAAAA,MAAM,EAAE;AAAxB,SAAhB;AAAiD,QAAA,SAAS,EAAEL,GAAG,CAACC,+BAAJ,GAAoC,4BAApC,GAAiE,6BAA7H;AAA4J,QAAA,OAAO,EAAGnD,CAAD,IAAO,KAAKY,YAAL,CAAkBZ,CAAlB,EAAqBkD,GAAG,CAACjD,EAAzB,EAA4BiD,GAAG,CAACC,+BAAhC,CAA5K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,KAAK,EAAE;AAACK,UAAAA,UAAU,EAAC;AAAZ,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmCN,GAAG,CAACC,+BAAJ,gBAAoC;AAAI,QAAA,KAAK,EAAC,mBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAApC,gBAAuE;AAAI,QAAA,KAAK,EAAC,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1G,CADF,CARF,CADG,gBAeF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhBH,CADF;AAuBD,KAxBD,CAFE,CAVI,CADJ,CADJ;AA4CH;;AAlLuC;AAqL5C,eAAe3D,YAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport moment from 'moment';\n\nimport {\n    PopupboxManager,\n    PopupboxContainer\n  } from 'react-popupbox';\n\n\nexport class Subscription extends Component {\n\n    state = {\n       courses:[],\n        subscription:\"/mysubscription\",\n        myprofile: \"/userProfile\",\n        myposts:\"/myposts\",\n        likedposts: \"/likedposts\"\n    }\n\n    componentDidMount() {\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            Authorization: `JWT ${localStorage.getItem(\"token\")}`\n      \n          };\n          const url = \"http://localhost:8000/api/courses?branch=&institute=\";\n          axios\n            .get(url, { headers })\n            .then((result) => {\n      \n              \n              this.setState({ courses: result.data });\n              \n      \n              console.log(result.data);\n            })\n            .catch((error) => {\n              console.log(error);\n              \n            });\n      }\n\n      courseHandler = (e, id,name) => {\n    \n        console.log(id);\n        console.log(name);\n        localStorage.setItem(\"course\",id);\n            const url = \"/posts/\" + localStorage.getItem('course');\n            this.props.history.push(url);\n        \n        \n          }\n\n\n          popupHandler=(e,id,subs)=>{\n            const content = (\n                <div>\n                  <span>Open popupbox</span>\n                  <button onClick={this.subscribeHandler(e,id,subs)}>Update!</button>\n                </div>\n\n              )\n              PopupboxManager.open({\n                content,\n                config: {\n                  titleBar: {\n                    enable: true,\n                    text: 'Step 1'\n                  },\n                  fadeIn: true,\n                  fadeInSpeed: 500\n                }\n              })\n          }\n          subscribeHandler=(e,id,subs)=>{\n\n    \n            if(!subs){\n             \n              const url=\"http://localhost:8000/api/email-notification-subscription\";\n              const headers = {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n                Authorization: `JWT ${localStorage.getItem(\"token\")}`\n          \n              };\n              const user = localStorage.getItem('userid');\n            \n            \n            const course=id;\n            \n            let bodyFormData = new FormData();\n            bodyFormData.set(\"course\",course);\n            bodyFormData.set(\"user\", user);\n        \n            axios\n            .post(url, bodyFormData, { headers })\n            .then((result) => {\n        \n        \n                // this.setState({ profile: result.data });\n        \n        \n                console.log(result.data);\n            })\n            .catch((error) => {\n                console.log(error);\n        \n            });\n        \n            }\n        \n            else{\n              \n              const url=\"http://localhost:8000/api/email-notification-subscription/\"+subs;\n              const headers = {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n                Authorization: `JWT ${localStorage.getItem(\"token\")}`\n          \n              };\n              \n            axios\n            .delete(url,  { headers })\n            .then((result) => {\n        \n        \n                // this.setState({ profile: result.data });\n        \n        \n                console.log(result.data);\n            })\n            .catch((error) => {\n                console.log(error);\n        \n            });\n        \n            }\n        \n            window.location.reload(2000);\n          }\n    render() {\n        return (\n            <div>\n                <div className=\"container\">\n                <div>\n\n<a type=\"button\" href={this.state.myprofile}><button style={{ marginRight: '4px'}} className=\"btn btn-outline-success \">My Profile</button></a>\n<a type=\"button\" href={this.state.myposts}><button style={{ marginRight: '4px' }} className=\"btn btn-outline-success \">My Posts</button></a>\n<a type=\"button\" href={this.state.likedposts}><button style={{ marginRight: '4px' }} className=\"btn btn-outline-success \">Liked Posts</button> </a>\n<a type=\"button\" href={this.state.subscription}><button style={{ marginRight: '4px',color: 'white', backgroundColor: \"green\"  }} className=\"btn btn-outline-success \">My Subscription</button> </a>\n</div>\n            <br></br>\n\n            <div>\n            {this.state.courses.length == 0 ? <div><h1>No Courses added</h1></div> :\n          this.state.courses.map((val) => {\n            return (\n              <div className=\" container \">\n                  {val.email_notification_subscription?\n                <div className=\"btn-group \">\n                  \n                  <button style={{width: \"90%\", textAlign:\"center\"}}  className=\"btn btn-outline-success btn-block\" onClick={(e) => this.courseHandler(e, val.id,val.name)}>\n                    <h3>{val.name}</h3>\n                    <h3>{val.branch}</h3>\n                    \n                    \n                  </button>\n                  <button  style={{width: \"40px\", height: \"40px\"}} className={val.email_notification_subscription?\"btn btn-success btn-block \":\"btn btn-secondary btn-block\"} onClick={(e) => this.popupHandler(e, val.id,val.email_notification_subscription)}>\n                    <h5 style={{alignItems:\"center\"}}>{val.email_notification_subscription?<i  class=\"fas fa-bell-slash\"></i>:<i  class=\"fas fa-bell\"></i>}</h5>\n                    \n                  </button>\n                  \n                </div>\n                :<div></div>\n                  }\n                \n              </div>\n\n            );\n          })\n          }\n          </div>\n          </div>\n            </div>\n        )\n    }\n}\n\nexport default Subscription\n"]},"metadata":{},"sourceType":"module"}